!function(){"use strict";angular.module("icat_control_escolar",["ui.router","ui.bootstrap","lbServices","LocalStorageModule","ui.event","oitozero.ngSweetAlert","ui.date","NgSwitchery","naif.base64","ngDropdowns","ngFileSaver","ngOrderObjectBy","angular-flot","templates"])}(),function(){"use strict";function config($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("login"),$stateProvider.state("login",{url:"/login",templateUrl:"app/components/autorizacion/login.html",controller:"loginController",controllerAs:"vm"}).state("logout",{url:"/logout",controller:"logoutController",controllerAs:"vm"}).state("index",{abstract:!0,url:"/index",templateUrl:"app/shared/layout/content-top-navigation.html"}).state("index.inicio",{url:"/inicio",templateUrl:"app/components/inicio/inicio.html",controller:"inicioController",controllerAs:"vm",authenticate:!0}).state("index.catalogo_temas",{url:"/catalogo_temas",templateUrl:"app/components/catalogos/catalogo-temas/principal-catalogo-temas.html",controller:"PrincipalCatalogoTemasController",controllerAs:"vm",authenticate:!0}).state("index.catalogo_especialidades",{url:"/catalogo_especialidades",templateUrl:"app/components/catalogos/catalogo-especialidades/principal-catalogo-especialidades.html",controller:"PrincipalCatalogoEspecialidadesController",controllerAs:"vm",authenticate:!0}).state("index.catalogo_cursos",{url:"/catalogo_cursos",templateUrl:"app/components/catalogos/catalogo-cursos/principal-catalogo-cursos.html",controller:"PrincipalCatalogoCursosController",controllerAs:"vm",authenticate:!0}).state("admin",{abstract:!0,url:"/admin",templateUrl:"app/shared/layout/content-top-navigation.html"}).state("admin.usuarios",{url:"/usuarios",templateUrl:"app/components/admin-sistema/usuarios/admin-usuarios-principal.html",controller:"AdminUsuariosPrincipalController",controllerAs:"vm",authenticate:!0}).state("ptc",{abstract:!0,url:"/ptc",templateUrl:"app/shared/layout/content-top-navigation.html"}).state("ptc.asigna_horas",{url:"/asigna_horas",templateUrl:"app/components/ptc/asignacion-horas/principal-horas-unidad.html",controller:"PrincipalHorasUnidadController",controllerAs:"vm",authenticate:!0}).state("ptc.planeacion_ptc",{url:"/planeacion_ptc",templateUrl:"app/components/ptc/ptc-unidad/principal-ptc-unidad.html",controller:"PrincipalPTCUnidadController",controllerAs:"vm",authenticate:!0}).state("ptc.revision_ptc",{url:"/revision_ptc",templateUrl:"app/components/ptc/revision-ptc/principal-revision-ptc.html",controller:"PrincipalRevisionPTCController",controllerAs:"vm",authenticate:!0}).state("ptc.pct_autorizados",{url:"/pct_autorizados",templateUrl:"app/components/ptc/autorizados/ptc-autorizados.html",controller:"PTCAutorizadosController",controllerAs:"vm",authenticate:!0}).state("instructores",{abstract:!0,url:"/instructores",templateUrl:"app/shared/layout/content-top-navigation.html"}).state("ptc.cat_instructores",{url:"/cat_instructores",templateUrl:"app/components/instructores/admin-instructores.html",controller:"AdminInstructoresController",controllerAs:"vm",authenticate:!0}).state("pre_apertura",{abstract:!0,url:"/pre_apertura",templateUrl:"app/shared/layout/content-top-navigation.html"}).state("pre_apertura.cursos_ptc",{url:"/cursos_ptc",templateUrl:"app/components/preapertura-cursos/cursos-ptc/pre-apertura-curso.html",controller:"PreAperturaCursoPTCController",controllerAs:"vm",authenticate:!0}).state("pre_apertura.cursos_ptc_extra",{url:"/cursos_ptc_extra",templateUrl:"app/components/preapertura-cursos/cursos-fuera-ptc/pre-apertura-curso-extra.html",controller:"PreAperturaCursoExtraController",controllerAs:"vm",authenticate:!0}).state("pre_apertura.valida_apertura_cursos",{url:"/valida_apertura_cursos",templateUrl:"app/components/preapertura-cursos/validacion/valida-apertura-cursos.html",controller:"ValidaAperturaCursosController",controllerAs:"vm",authenticate:!0}).state("cursos_autorizados",{abstract:!0,url:"/cursos_autorizados",templateUrl:"app/shared/layout/content-top-navigation.html"}).state("cursos_autorizados.resumen_cursos",{url:"/resumen_cursos:tipo",templateUrl:"app/components/cursos_oficiales/resumen-cursos/principal-resumen-cursos.html",controller:"ResumenCursosController",controllerAs:"vm",authenticate:!0}).state("capacitandos",{abstract:!0,url:"/capacitandos",templateUrl:"app/shared/layout/content-top-navigation.html"}).state("capacitandos.principal_capacitandos",{url:"/principal_capacitandos",templateUrl:"app/components/capacitandos/principal-capacitandos.html",controller:"PrincipalCapacitandosController",controllerAs:"vm",authenticate:!0}).state("inscripcion",{abstract:!0,url:"/inscripcion",templateUrl:"app/shared/layout/content-top-navigation.html"}).state("inscripcion.registro_inscripcion_pagos",{url:"/registro_inscripcion_pagos",templateUrl:"app/components/cursos_oficiales/inscripciones-pagos/registra-inscrip-pago-curso.html",controller:"RegistroInscripPagoCursoController",controllerAs:"vm",authenticate:!0}).state("reportes",{abstract:!0,url:"/reportes",templateUrl:"app/shared/layout/content-top-navigation.html"}).state("reportes.bitacora",{url:"/bitacora",templateUrl:"app/components/bitacora/bitacora-eventos.html",controller:"BitacoraController",controllerAs:"vm",authenticate:!0}).state("reportes.resumen_general",{url:"/resumen_general",templateUrl:"app/components/resumen/resumen-general.html",controller:"ResumenGeneralController",controllerAs:"vm",authenticate:!0})}angular.module("icat_control_escolar").config(config),config.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function runBlock($rootScope,$state,localStorageService){$rootScope.$on("$stateChangeStart",function(event,next){void 0!==localStorageService.get("usuario")&&null!==localStorageService.get("usuario")&&($rootScope.currentUser=localStorageService.get("usuario")),next.authenticate&&!$rootScope.currentUser&&(event.preventDefault(),$state.go("login"))}),$rootScope.$state=$state}angular.module("icat_control_escolar").run(runBlock),runBlock.$inject=["$rootScope","$state","localStorageService"]}(),function(){"use strict";function minimalizaSidebar($timeout){return{restrict:"A",template:'<a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="" ng-click="minimalize()"><i class="fa fa-bars"></i></a>',controller:function($scope,$element){$scope.minimalize=function(){$("body").toggleClass("mini-navbar"),!$("body").hasClass("mini-navbar")||$("body").hasClass("body-small")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(400)},200)):$("body").hasClass("fixed-sidebar")?($("#side-menu").hide(),setTimeout(function(){$("#side-menu").fadeIn(400)},100)):$("#side-menu").removeAttr("style")}}}}angular.module("icat_control_escolar").directive("minimalizaSidebar",minimalizaSidebar)}(),function(){"use strict";function pageTitle($rootScope,$timeout){return{link:function(scope,element){var listener=function(event,toState,toParams,fromState,fromParams){var title="ICAT Control Escolar";toState.data&&toState.data.pageTitle&&(title="ICATQR | "+toState.data.pageTitle),$timeout(function(){element.text(title)})};$rootScope.$on("$stateChangeStart",listener)}}}angular.module("icat_control_escolar").directive("pageTitle",pageTitle)}(),function(){"use strict";function sideNavigation($timeout){return{restrict:"A",link:function(scope,element){$timeout(function(){element.metisMenu()});var sidebar=element.parent();sidebar.slimScroll({height:"100%",railOpacity:.9})}}}angular.module("icat_control_escolar").directive("sideNavigation",sideNavigation)}(),function(){"use strict";function fullScroll($timeout){return{restrict:"A",link:function(scope,element){$timeout(function(){element.slimscroll({height:"100%",railOpacity:.9,alwaysVisible:!0})})}}}angular.module("icat_control_escolar").directive("fullScroll",fullScroll)}(),function(){"use strict";function ngTeclaenter(){return function(scope,element,attrs){element.bind("keydown keypress",function(event){13===event.which&&(scope.$apply(function(){scope.$eval(attrs.ngTeclaenter)}),event.preventDefault())})}}angular.module("icat_control_escolar").directive("ngTeclaenter",ngTeclaenter)}(),function(){"use strict";function tablaPaginacion(){return{restrict:"AE",scope:{tabla:"=config",paginar:"&"},template:'<div class="row"><div class="col-md-5"><span class="pull-left medium text-muted" style="margin-top:22px;font-size: 12px;">Mostrando registros {{(tabla.inicio+1)}} al {{tabla.fin}} de un total de {{tabla.totalElementos}} registros</span></div><div class="col-md-7"><pagination total-items="tabla.totalElementos" ng-model="tabla.paginaActual" previous-text="Anterior" next-text="Siguiente" first-text="Primero" last-text="&Uacute;ltimo" max-size="5" boundary-links="true" ng-change="paginar()" items-per-page="tabla.registrosPorPagina" class="pagination-sm pull-right" rotate="false"></pagination></div></div>'}}angular.module("icat_control_escolar").directive("tablaPaginacion",tablaPaginacion)}(),function(){"use strict";function icheck($timeout){return{restrict:"A",require:"ngModel",link:function($scope,element,$attrs,ngModel){return $timeout(function(){var value;return value=$attrs.value,$scope.$watch($attrs.ngModel,function(newValue){$(element).iCheck("update")}),$(element).iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"}).on("ifChanged",function(event){if("checkbox"===$(element).attr("type")&&$attrs.ngModel&&$scope.$apply(function(){return ngModel.$setViewValue(event.target.checked)}),"radio"===$(element).attr("type")&&$attrs.ngModel)return $scope.$apply(function(){return ngModel.$setViewValue(value)})})})}}}angular.module("icat_control_escolar").directive("icheck",icheck)}(),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="lbServices"),function(window,angular,undefined){"use strict";function getHost(url){var m=url.match(/^(?:https?:)?\/\/([^\/]+)/);return m?m[1]:null}var urlBase="/api",authHeader="authorization",urlBaseHost=getHost(urlBase)||location.host,module=angular.module("lbServices",["ngResource"]);module.factory("RoleMapping",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/RoleMappings/:id",{id:"@id"},{prototype$__get__role:{url:urlBase+"/RoleMappings/:id/role",method:"GET"},create:{url:urlBase+"/RoleMappings",method:"POST"},createMany:{isArray:!0,url:urlBase+"/RoleMappings",method:"POST"},upsert:{url:urlBase+"/RoleMappings",method:"PATCH"},replaceOrCreate:{url:urlBase+"/RoleMappings/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/RoleMappings/:id/exists",method:"GET"},findById:{url:urlBase+"/RoleMappings/:id",method:"GET"},replaceById:{url:urlBase+"/RoleMappings/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/RoleMappings",method:"GET"},findOne:{url:urlBase+"/RoleMappings/findOne",method:"GET"},updateAll:{url:urlBase+"/RoleMappings/update",method:"POST"},deleteById:{url:urlBase+"/RoleMappings/:id",method:"DELETE"},count:{url:urlBase+"/RoleMappings/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/RoleMappings/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/RoleMappings/change-stream",method:"POST"},"::findById::Role::principals":{params:{fk:"@fk"},url:urlBase+"/Roles/:id/principals/:fk",method:"GET"},"::destroyById::Role::principals":{params:{fk:"@fk"},url:urlBase+"/Roles/:id/principals/:fk",method:"DELETE"},"::updateById::Role::principals":{params:{fk:"@fk"},url:urlBase+"/Roles/:id/principals/:fk",method:"PUT"},"::get::Role::principals":{isArray:!0,url:urlBase+"/Roles/:id/principals",method:"GET"},"::create::Role::principals":{url:urlBase+"/Roles/:id/principals",method:"POST"},"::createMany::Role::principals":{isArray:!0,url:urlBase+"/Roles/:id/principals",method:"POST"},"::delete::Role::principals":{url:urlBase+"/Roles/:id/principals",method:"DELETE"},"::count::Role::principals":{url:urlBase+"/Roles/:id/principals/count",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="RoleMapping",R.role=function(){var TargetResource=$injector.get("Role"),action=TargetResource["::get::RoleMapping::role"];return action.apply(R,arguments)},R}]),module.factory("Role",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/Roles/:id",{id:"@id"},{prototype$__findById__principals:{params:{fk:"@fk"},url:urlBase+"/Roles/:id/principals/:fk",method:"GET"},prototype$__destroyById__principals:{params:{fk:"@fk"},url:urlBase+"/Roles/:id/principals/:fk",method:"DELETE"},prototype$__updateById__principals:{params:{fk:"@fk"},url:urlBase+"/Roles/:id/principals/:fk",method:"PUT"},prototype$__get__principals:{isArray:!0,url:urlBase+"/Roles/:id/principals",method:"GET"},prototype$__create__principals:{url:urlBase+"/Roles/:id/principals",method:"POST"},prototype$__delete__principals:{url:urlBase+"/Roles/:id/principals",method:"DELETE"},prototype$__count__principals:{url:urlBase+"/Roles/:id/principals/count",method:"GET"},create:{url:urlBase+"/Roles",method:"POST"},createMany:{isArray:!0,url:urlBase+"/Roles",method:"POST"},upsert:{url:urlBase+"/Roles",method:"PATCH"},replaceOrCreate:{url:urlBase+"/Roles/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/Roles/:id/exists",method:"GET"},findById:{url:urlBase+"/Roles/:id",method:"GET"},replaceById:{url:urlBase+"/Roles/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/Roles",method:"GET"},findOne:{url:urlBase+"/Roles/findOne",method:"GET"},updateAll:{url:urlBase+"/Roles/update",method:"POST"},deleteById:{url:urlBase+"/Roles/:id",method:"DELETE"},count:{url:urlBase+"/Roles/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/Roles/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/Roles/change-stream",method:"POST"},"::get::RoleMapping::role":{url:urlBase+"/RoleMappings/:id/role",method:"GET"},"::findById::Usuario::perfil":{params:{fk:"@fk"},url:urlBase+"/Usuarios/:id/perfil/:fk",method:"GET"},"::destroyById::Usuario::perfil":{params:{fk:"@fk"},url:urlBase+"/Usuarios/:id/perfil/:fk",method:"DELETE"},"::updateById::Usuario::perfil":{params:{fk:"@fk"},url:urlBase+"/Usuarios/:id/perfil/:fk",method:"PUT"},"::link::Usuario::perfil":{params:{fk:"@fk"},url:urlBase+"/Usuarios/:id/perfil/rel/:fk",method:"PUT"},"::unlink::Usuario::perfil":{params:{fk:"@fk"},url:urlBase+"/Usuarios/:id/perfil/rel/:fk",method:"DELETE"},"::exists::Usuario::perfil":{params:{fk:"@fk"},url:urlBase+"/Usuarios/:id/perfil/rel/:fk",method:"HEAD"},"::get::Usuario::perfil":{isArray:!0,url:urlBase+"/Usuarios/:id/perfil",method:"GET"},"::create::Usuario::perfil":{url:urlBase+"/Usuarios/:id/perfil",method:"POST"},"::createMany::Usuario::perfil":{isArray:!0,url:urlBase+"/Usuarios/:id/perfil",method:"POST"},"::delete::Usuario::perfil":{url:urlBase+"/Usuarios/:id/perfil",method:"DELETE"},"::count::Usuario::perfil":{url:urlBase+"/Usuarios/:id/perfil/count",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="Role",R.principals=function(){var TargetResource=$injector.get("RoleMapping"),action=TargetResource["::get::Role::principals"];return action.apply(R,arguments)},R.principals.count=function(){var TargetResource=$injector.get("RoleMapping"),action=TargetResource["::count::Role::principals"];return action.apply(R,arguments)},R.principals.create=function(){var TargetResource=$injector.get("RoleMapping"),action=TargetResource["::create::Role::principals"];return action.apply(R,arguments)},R.principals.createMany=function(){var TargetResource=$injector.get("RoleMapping"),action=TargetResource["::createMany::Role::principals"];return action.apply(R,arguments)},R.principals.destroyAll=function(){var TargetResource=$injector.get("RoleMapping"),action=TargetResource["::delete::Role::principals"];return action.apply(R,arguments)},R.principals.destroyById=function(){var TargetResource=$injector.get("RoleMapping"),action=TargetResource["::destroyById::Role::principals"];return action.apply(R,arguments)},R.principals.findById=function(){var TargetResource=$injector.get("RoleMapping"),action=TargetResource["::findById::Role::principals"];return action.apply(R,arguments)},R.principals.updateById=function(){var TargetResource=$injector.get("RoleMapping"),action=TargetResource["::updateById::Role::principals"];return action.apply(R,arguments)},R}]),module.factory("Email",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/Emails/:id",{id:"@id"},{});return R.modelName="Email",R}]),module.factory("Usuario",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/Usuarios/:id",{id:"@id"},{prototype$__findById__accessTokens:{params:{fk:"@fk"},url:urlBase+"/Usuarios/:id/accessTokens/:fk",method:"GET"},prototype$__destroyById__accessTokens:{params:{fk:"@fk"},url:urlBase+"/Usuarios/:id/accessTokens/:fk",method:"DELETE"},prototype$__updateById__accessTokens:{params:{fk:"@fk"},url:urlBase+"/Usuarios/:id/accessTokens/:fk",method:"PUT"},prototype$__findById__perfil:{params:{fk:"@fk"},url:urlBase+"/Usuarios/:id/perfil/:fk",method:"GET"},prototype$__destroyById__perfil:{params:{fk:"@fk"},url:urlBase+"/Usuarios/:id/perfil/:fk",method:"DELETE"},prototype$__updateById__perfil:{params:{fk:"@fk"},url:urlBase+"/Usuarios/:id/perfil/:fk",method:"PUT"},prototype$__link__perfil:{params:{fk:"@fk"},url:urlBase+"/Usuarios/:id/perfil/rel/:fk",method:"PUT"},prototype$__unlink__perfil:{params:{fk:"@fk"},url:urlBase+"/Usuarios/:id/perfil/rel/:fk",method:"DELETE"},prototype$__exists__perfil:{params:{fk:"@fk"},url:urlBase+"/Usuarios/:id/perfil/rel/:fk",method:"HEAD"},prototype$__get__unidad_pertenece:{url:urlBase+"/Usuarios/:id/unidad_pertenece",method:"GET"},prototype$__get__accessTokens:{isArray:!0,url:urlBase+"/Usuarios/:id/accessTokens",method:"GET"},prototype$__create__accessTokens:{url:urlBase+"/Usuarios/:id/accessTokens",method:"POST"},prototype$__delete__accessTokens:{url:urlBase+"/Usuarios/:id/accessTokens",method:"DELETE"},prototype$__count__accessTokens:{url:urlBase+"/Usuarios/:id/accessTokens/count",method:"GET"},prototype$__get__perfil:{isArray:!0,url:urlBase+"/Usuarios/:id/perfil",method:"GET"},prototype$__create__perfil:{url:urlBase+"/Usuarios/:id/perfil",method:"POST"},prototype$__delete__perfil:{url:urlBase+"/Usuarios/:id/perfil",method:"DELETE"},prototype$__count__perfil:{url:urlBase+"/Usuarios/:id/perfil/count",method:"GET"},create:{url:urlBase+"/Usuarios",method:"POST"},createMany:{isArray:!0,url:urlBase+"/Usuarios",method:"POST"},upsert:{url:urlBase+"/Usuarios",method:"PATCH"},replaceOrCreate:{url:urlBase+"/Usuarios/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/Usuarios/:id/exists",method:"GET"},findById:{url:urlBase+"/Usuarios/:id",method:"GET"},replaceById:{url:urlBase+"/Usuarios/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/Usuarios",method:"GET"},findOne:{url:urlBase+"/Usuarios/findOne",method:"GET"},updateAll:{url:urlBase+"/Usuarios/update",method:"POST"},deleteById:{url:urlBase+"/Usuarios/:id",method:"DELETE"},count:{url:urlBase+"/Usuarios/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/Usuarios/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/Usuarios/change-stream",method:"POST"},login:{params:{include:"user"},interceptor:{response:function(response){var accessToken=response.data;return LoopBackAuth.setUser(accessToken.id,accessToken.userId,accessToken.user),LoopBackAuth.rememberMe=response.config.params.rememberMe!==!1,LoopBackAuth.save(),response.resource}},url:urlBase+"/Usuarios/login",method:"POST"},logout:{interceptor:{response:function(response){return LoopBackAuth.clearUser(),LoopBackAuth.clearStorage(),response.resource},responseError:function(responseError){return LoopBackAuth.clearUser(),LoopBackAuth.clearStorage(),responseError.resource}},url:urlBase+"/Usuarios/logout",method:"POST"},confirm:{url:urlBase+"/Usuarios/confirm",method:"GET"},resetPassword:{url:urlBase+"/Usuarios/reset",method:"POST"},"::get::DestinatariosAvisos::usuario":{url:urlBase+"/DestinatariosAvisos/:id/usuario",method:"GET"},getCurrent:{url:urlBase+"/Usuarios/:id",method:"GET",params:{id:function(){var id=LoopBackAuth.currentUserId;return null==id&&(id="__anonymous__"),id}},interceptor:{response:function(response){return LoopBackAuth.currentUserData=response.data,response.resource}},__isGetCurrentUser__:!0}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.getCachedCurrent=function(){var data=LoopBackAuth.currentUserData;return data?new R(data):null},R.isAuthenticated=function(){return null!=this.getCurrentId()},R.getCurrentId=function(){return LoopBackAuth.currentUserId},R.modelName="Usuario",R.perfil=function(){var TargetResource=$injector.get("Role"),action=TargetResource["::get::Usuario::perfil"];return action.apply(R,arguments)},R.perfil.count=function(){var TargetResource=$injector.get("Role"),action=TargetResource["::count::Usuario::perfil"];return action.apply(R,arguments)},R.perfil.create=function(){var TargetResource=$injector.get("Role"),action=TargetResource["::create::Usuario::perfil"];return action.apply(R,arguments)},R.perfil.createMany=function(){var TargetResource=$injector.get("Role"),action=TargetResource["::createMany::Usuario::perfil"];return action.apply(R,arguments)},R.perfil.destroyAll=function(){var TargetResource=$injector.get("Role"),action=TargetResource["::delete::Usuario::perfil"];return action.apply(R,arguments)},R.perfil.destroyById=function(){var TargetResource=$injector.get("Role"),action=TargetResource["::destroyById::Usuario::perfil"];return action.apply(R,arguments)},R.perfil.exists=function(){var TargetResource=$injector.get("Role"),action=TargetResource["::exists::Usuario::perfil"];return action.apply(R,arguments)},R.perfil.findById=function(){var TargetResource=$injector.get("Role"),action=TargetResource["::findById::Usuario::perfil"];return action.apply(R,arguments)},R.perfil.link=function(){var TargetResource=$injector.get("Role"),action=TargetResource["::link::Usuario::perfil"];return action.apply(R,arguments)},R.perfil.unlink=function(){var TargetResource=$injector.get("Role"),action=TargetResource["::unlink::Usuario::perfil"];return action.apply(R,arguments)},R.perfil.updateById=function(){var TargetResource=$injector.get("Role"),action=TargetResource["::updateById::Usuario::perfil"];return action.apply(R,arguments)},R.unidad_pertenece=function(){var TargetResource=$injector.get("CatalogoUnidadesAdmtvas"),action=TargetResource["::get::Usuario::unidad_pertenece"];return action.apply(R,arguments)},R}]),module.factory("CatalogoUnidadesAdmtvas",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/CatalogoUnidadesAdmtvas/:id",{id:"@id"},{prototype$__findById__horas_asignadas:{params:{fk:"@fk"},url:urlBase+"/CatalogoUnidadesAdmtvas/:id/horas_asignadas/:fk",method:"GET"},prototype$__destroyById__horas_asignadas:{params:{fk:"@fk"},url:urlBase+"/CatalogoUnidadesAdmtvas/:id/horas_asignadas/:fk",method:"DELETE"},prototype$__updateById__horas_asignadas:{params:{fk:"@fk"},url:urlBase+"/CatalogoUnidadesAdmtvas/:id/horas_asignadas/:fk",method:"PUT"},prototype$__get__horas_asignadas:{isArray:!0,url:urlBase+"/CatalogoUnidadesAdmtvas/:id/horas_asignadas",method:"GET"},prototype$__create__horas_asignadas:{url:urlBase+"/CatalogoUnidadesAdmtvas/:id/horas_asignadas",method:"POST"},prototype$__delete__horas_asignadas:{url:urlBase+"/CatalogoUnidadesAdmtvas/:id/horas_asignadas",method:"DELETE"},prototype$__count__horas_asignadas:{url:urlBase+"/CatalogoUnidadesAdmtvas/:id/horas_asignadas/count",method:"GET"},create:{url:urlBase+"/CatalogoUnidadesAdmtvas",method:"POST"},createMany:{isArray:!0,url:urlBase+"/CatalogoUnidadesAdmtvas",method:"POST"},upsert:{url:urlBase+"/CatalogoUnidadesAdmtvas",method:"PATCH"},replaceOrCreate:{url:urlBase+"/CatalogoUnidadesAdmtvas/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/CatalogoUnidadesAdmtvas/:id/exists",method:"GET"},findById:{url:urlBase+"/CatalogoUnidadesAdmtvas/:id",method:"GET"},replaceById:{url:urlBase+"/CatalogoUnidadesAdmtvas/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/CatalogoUnidadesAdmtvas",method:"GET"},findOne:{url:urlBase+"/CatalogoUnidadesAdmtvas/findOne",method:"GET"},updateAll:{url:urlBase+"/CatalogoUnidadesAdmtvas/update",method:"POST"},deleteById:{url:urlBase+"/CatalogoUnidadesAdmtvas/:id",method:"DELETE"},count:{url:urlBase+"/CatalogoUnidadesAdmtvas/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/CatalogoUnidadesAdmtvas/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/CatalogoUnidadesAdmtvas/change-stream",method:"POST"},"::get::Usuario::unidad_pertenece":{url:urlBase+"/Usuarios/:id/unidad_pertenece",method:"GET"},"::get::ProgTrimCursos::unidad_pertenece":{url:urlBase+"/ProgTrimCursos/:id/unidad_pertenece",method:"GET"},"::get::CatalogoInstructores::unidad_pertenece":{url:urlBase+"/CatalogoInstructores/:id/unidad_pertenece",method:"GET"},"::get::CursosOficiales::unidad_pertenece":{url:urlBase+"/CursosOficiales/:id/unidad_pertenece",method:"GET"},"::get::Capacitandos::unidad_pertenece":{url:urlBase+"/Capacitandos/:id/unidad_pertenece",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="CatalogoUnidadesAdmtvas",R.horas_asignadas=function(){var TargetResource=$injector.get("HorasAsignadasUnidad"),action=TargetResource["::get::CatalogoUnidadesAdmtvas::horas_asignadas"];return action.apply(R,arguments)},R.horas_asignadas.count=function(){var TargetResource=$injector.get("HorasAsignadasUnidad"),action=TargetResource["::count::CatalogoUnidadesAdmtvas::horas_asignadas"];return action.apply(R,arguments)},R.horas_asignadas.create=function(){var TargetResource=$injector.get("HorasAsignadasUnidad"),action=TargetResource["::create::CatalogoUnidadesAdmtvas::horas_asignadas"];return action.apply(R,arguments)},R.horas_asignadas.createMany=function(){var TargetResource=$injector.get("HorasAsignadasUnidad"),action=TargetResource["::createMany::CatalogoUnidadesAdmtvas::horas_asignadas"];return action.apply(R,arguments)},R.horas_asignadas.destroyAll=function(){var TargetResource=$injector.get("HorasAsignadasUnidad"),action=TargetResource["::delete::CatalogoUnidadesAdmtvas::horas_asignadas"];return action.apply(R,arguments)},R.horas_asignadas.destroyById=function(){var TargetResource=$injector.get("HorasAsignadasUnidad"),action=TargetResource["::destroyById::CatalogoUnidadesAdmtvas::horas_asignadas"];return action.apply(R,arguments)},R.horas_asignadas.findById=function(){var TargetResource=$injector.get("HorasAsignadasUnidad"),action=TargetResource["::findById::CatalogoUnidadesAdmtvas::horas_asignadas"];return action.apply(R,arguments)},R.horas_asignadas.updateById=function(){var TargetResource=$injector.get("HorasAsignadasUnidad"),action=TargetResource["::updateById::CatalogoUnidadesAdmtvas::horas_asignadas"];return action.apply(R,arguments)},R}]),module.factory("CatalogoTemas",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/CatalogoTemas/:id",{id:"@id"},{prototype$__findById__especialidades:{params:{fk:"@fk"},url:urlBase+"/CatalogoTemas/:id/especialidades/:fk",method:"GET"},prototype$__destroyById__especialidades:{params:{fk:"@fk"},url:urlBase+"/CatalogoTemas/:id/especialidades/:fk",method:"DELETE"},prototype$__updateById__especialidades:{params:{fk:"@fk"},url:urlBase+"/CatalogoTemas/:id/especialidades/:fk",method:"PUT"},prototype$__get__especialidades:{isArray:!0,url:urlBase+"/CatalogoTemas/:id/especialidades",method:"GET"},prototype$__create__especialidades:{url:urlBase+"/CatalogoTemas/:id/especialidades",method:"POST"},prototype$__delete__especialidades:{url:urlBase+"/CatalogoTemas/:id/especialidades",method:"DELETE"},prototype$__count__especialidades:{url:urlBase+"/CatalogoTemas/:id/especialidades/count",method:"GET"},create:{url:urlBase+"/CatalogoTemas",method:"POST"},createMany:{isArray:!0,url:urlBase+"/CatalogoTemas",method:"POST"},upsert:{url:urlBase+"/CatalogoTemas",method:"PATCH"},replaceOrCreate:{url:urlBase+"/CatalogoTemas/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/CatalogoTemas/:id/exists",method:"GET"},findById:{url:urlBase+"/CatalogoTemas/:id",method:"GET"},replaceById:{url:urlBase+"/CatalogoTemas/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/CatalogoTemas",method:"GET"},findOne:{url:urlBase+"/CatalogoTemas/findOne",method:"GET"},updateAll:{url:urlBase+"/CatalogoTemas/update",method:"POST"},deleteById:{url:urlBase+"/CatalogoTemas/:id",method:"DELETE"},count:{url:urlBase+"/CatalogoTemas/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/CatalogoTemas/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/CatalogoTemas/change-stream",method:"POST"},"::get::CatalogoEspecialidades::tema_pertenece":{url:urlBase+"/CatalogoEspecialidades/:id/tema_pertenece",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="CatalogoTemas",R.especialidades=function(){var TargetResource=$injector.get("CatalogoEspecialidades"),action=TargetResource["::get::CatalogoTemas::especialidades"];return action.apply(R,arguments)},R.especialidades.count=function(){var TargetResource=$injector.get("CatalogoEspecialidades"),action=TargetResource["::count::CatalogoTemas::especialidades"];return action.apply(R,arguments)},R.especialidades.create=function(){var TargetResource=$injector.get("CatalogoEspecialidades"),action=TargetResource["::create::CatalogoTemas::especialidades"];return action.apply(R,arguments)},R.especialidades.createMany=function(){var TargetResource=$injector.get("CatalogoEspecialidades"),action=TargetResource["::createMany::CatalogoTemas::especialidades"];return action.apply(R,arguments)},R.especialidades.destroyAll=function(){var TargetResource=$injector.get("CatalogoEspecialidades"),action=TargetResource["::delete::CatalogoTemas::especialidades"];return action.apply(R,arguments)},R.especialidades.destroyById=function(){var TargetResource=$injector.get("CatalogoEspecialidades"),action=TargetResource["::destroyById::CatalogoTemas::especialidades"];return action.apply(R,arguments)},R.especialidades.findById=function(){var TargetResource=$injector.get("CatalogoEspecialidades"),action=TargetResource["::findById::CatalogoTemas::especialidades"];return action.apply(R,arguments)},R.especialidades.updateById=function(){var TargetResource=$injector.get("CatalogoEspecialidades"),action=TargetResource["::updateById::CatalogoTemas::especialidades"];return action.apply(R,arguments)},R}]),module.factory("CatalogoTemarioCursos",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/CatalogoTemarioCursos/:id",{id:"@id"},{create:{url:urlBase+"/CatalogoTemarioCursos",method:"POST"},createMany:{isArray:!0,url:urlBase+"/CatalogoTemarioCursos",method:"POST"},upsert:{url:urlBase+"/CatalogoTemarioCursos",method:"PATCH"},replaceOrCreate:{url:urlBase+"/CatalogoTemarioCursos/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/CatalogoTemarioCursos/:id/exists",method:"GET"},findById:{url:urlBase+"/CatalogoTemarioCursos/:id",method:"GET"},replaceById:{url:urlBase+"/CatalogoTemarioCursos/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/CatalogoTemarioCursos",method:"GET"},findOne:{url:urlBase+"/CatalogoTemarioCursos/findOne",
method:"GET"},updateAll:{url:urlBase+"/CatalogoTemarioCursos/update",method:"POST"},deleteById:{url:urlBase+"/CatalogoTemarioCursos/:id",method:"DELETE"},count:{url:urlBase+"/CatalogoTemarioCursos/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/CatalogoTemarioCursos/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/CatalogoTemarioCursos/change-stream",method:"POST"},"::findById::CatalogoCursos::temario":{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/temario/:fk",method:"GET"},"::destroyById::CatalogoCursos::temario":{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/temario/:fk",method:"DELETE"},"::updateById::CatalogoCursos::temario":{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/temario/:fk",method:"PUT"},"::get::CatalogoCursos::temario":{isArray:!0,url:urlBase+"/CatalogoCursos/:id/temario",method:"GET"},"::create::CatalogoCursos::temario":{url:urlBase+"/CatalogoCursos/:id/temario",method:"POST"},"::createMany::CatalogoCursos::temario":{isArray:!0,url:urlBase+"/CatalogoCursos/:id/temario",method:"POST"},"::delete::CatalogoCursos::temario":{url:urlBase+"/CatalogoCursos/:id/temario",method:"DELETE"},"::count::CatalogoCursos::temario":{url:urlBase+"/CatalogoCursos/:id/temario/count",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="CatalogoTemarioCursos",R}]),module.factory("CatalogoEspecialidades",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/CatalogoEspecialidades/:id",{id:"@id"},{prototype$__get__tema_pertenece:{url:urlBase+"/CatalogoEspecialidades/:id/tema_pertenece",method:"GET"},prototype$__findById__RegistroCursos:{params:{fk:"@fk"},url:urlBase+"/CatalogoEspecialidades/:id/RegistroCursos/:fk",method:"GET"},prototype$__destroyById__RegistroCursos:{params:{fk:"@fk"},url:urlBase+"/CatalogoEspecialidades/:id/RegistroCursos/:fk",method:"DELETE"},prototype$__updateById__RegistroCursos:{params:{fk:"@fk"},url:urlBase+"/CatalogoEspecialidades/:id/RegistroCursos/:fk",method:"PUT"},prototype$__get__RegistroCursos:{isArray:!0,url:urlBase+"/CatalogoEspecialidades/:id/RegistroCursos",method:"GET"},prototype$__create__RegistroCursos:{url:urlBase+"/CatalogoEspecialidades/:id/RegistroCursos",method:"POST"},prototype$__delete__RegistroCursos:{url:urlBase+"/CatalogoEspecialidades/:id/RegistroCursos",method:"DELETE"},prototype$__count__RegistroCursos:{url:urlBase+"/CatalogoEspecialidades/:id/RegistroCursos/count",method:"GET"},create:{url:urlBase+"/CatalogoEspecialidades",method:"POST"},createMany:{isArray:!0,url:urlBase+"/CatalogoEspecialidades",method:"POST"},upsert:{url:urlBase+"/CatalogoEspecialidades",method:"PATCH"},replaceOrCreate:{url:urlBase+"/CatalogoEspecialidades/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/CatalogoEspecialidades/:id/exists",method:"GET"},findById:{url:urlBase+"/CatalogoEspecialidades/:id",method:"GET"},replaceById:{url:urlBase+"/CatalogoEspecialidades/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/CatalogoEspecialidades",method:"GET"},findOne:{url:urlBase+"/CatalogoEspecialidades/findOne",method:"GET"},updateAll:{url:urlBase+"/CatalogoEspecialidades/update",method:"POST"},deleteById:{url:urlBase+"/CatalogoEspecialidades/:id",method:"DELETE"},count:{url:urlBase+"/CatalogoEspecialidades/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/CatalogoEspecialidades/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/CatalogoEspecialidades/change-stream",method:"POST"},"::findById::CatalogoTemas::especialidades":{params:{fk:"@fk"},url:urlBase+"/CatalogoTemas/:id/especialidades/:fk",method:"GET"},"::destroyById::CatalogoTemas::especialidades":{params:{fk:"@fk"},url:urlBase+"/CatalogoTemas/:id/especialidades/:fk",method:"DELETE"},"::updateById::CatalogoTemas::especialidades":{params:{fk:"@fk"},url:urlBase+"/CatalogoTemas/:id/especialidades/:fk",method:"PUT"},"::get::CatalogoTemas::especialidades":{isArray:!0,url:urlBase+"/CatalogoTemas/:id/especialidades",method:"GET"},"::create::CatalogoTemas::especialidades":{url:urlBase+"/CatalogoTemas/:id/especialidades",method:"POST"},"::createMany::CatalogoTemas::especialidades":{isArray:!0,url:urlBase+"/CatalogoTemas/:id/especialidades",method:"POST"},"::delete::CatalogoTemas::especialidades":{url:urlBase+"/CatalogoTemas/:id/especialidades",method:"DELETE"},"::count::CatalogoTemas::especialidades":{url:urlBase+"/CatalogoTemas/:id/especialidades/count",method:"GET"},"::get::CatalogoCursos::especialidad":{url:urlBase+"/CatalogoCursos/:id/especialidad",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="CatalogoEspecialidades",R.tema_pertenece=function(){var TargetResource=$injector.get("CatalogoTemas"),action=TargetResource["::get::CatalogoEspecialidades::tema_pertenece"];return action.apply(R,arguments)},R.RegistroCursos=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::get::CatalogoEspecialidades::RegistroCursos"];return action.apply(R,arguments)},R.RegistroCursos.count=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::count::CatalogoEspecialidades::RegistroCursos"];return action.apply(R,arguments)},R.RegistroCursos.create=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::create::CatalogoEspecialidades::RegistroCursos"];return action.apply(R,arguments)},R.RegistroCursos.createMany=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::createMany::CatalogoEspecialidades::RegistroCursos"];return action.apply(R,arguments)},R.RegistroCursos.destroyAll=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::delete::CatalogoEspecialidades::RegistroCursos"];return action.apply(R,arguments)},R.RegistroCursos.destroyById=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::destroyById::CatalogoEspecialidades::RegistroCursos"];return action.apply(R,arguments)},R.RegistroCursos.findById=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::findById::CatalogoEspecialidades::RegistroCursos"];return action.apply(R,arguments)},R.RegistroCursos.updateById=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::updateById::CatalogoEspecialidades::RegistroCursos"];return action.apply(R,arguments)},R}]),module.factory("CatalogoLocalidades",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/CatalogoLocalidades/:id",{id:"@id"},{create:{url:urlBase+"/CatalogoLocalidades",method:"POST"},createMany:{isArray:!0,url:urlBase+"/CatalogoLocalidades",method:"POST"},upsert:{url:urlBase+"/CatalogoLocalidades",method:"PATCH"},replaceOrCreate:{url:urlBase+"/CatalogoLocalidades/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/CatalogoLocalidades/:id/exists",method:"GET"},findById:{url:urlBase+"/CatalogoLocalidades/:id",method:"GET"},replaceById:{url:urlBase+"/CatalogoLocalidades/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/CatalogoLocalidades",method:"GET"},findOne:{url:urlBase+"/CatalogoLocalidades/findOne",method:"GET"},updateAll:{url:urlBase+"/CatalogoLocalidades/update",method:"POST"},deleteById:{url:urlBase+"/CatalogoLocalidades/:id",method:"DELETE"},count:{url:urlBase+"/CatalogoLocalidades/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/CatalogoLocalidades/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/CatalogoLocalidades/change-stream",method:"POST"},"::get::CatalogoInstructores::localidad_pertenece":{url:urlBase+"/CatalogoInstructores/:id/localidad_pertenece",method:"GET"},"::get::CursosOficiales::localidad_pertenece":{url:urlBase+"/CursosOficiales/:id/localidad_pertenece",method:"GET"},"::get::Capacitandos::localidad_pertenece":{url:urlBase+"/Capacitandos/:id/localidad_pertenece",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="CatalogoLocalidades",R}]),module.factory("CatalogoCursos",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/CatalogoCursos/:id",{id:"@id"},{prototype$__get__especialidad:{url:urlBase+"/CatalogoCursos/:id/especialidad",method:"GET"},prototype$__findById__temario:{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/temario/:fk",method:"GET"},prototype$__destroyById__temario:{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/temario/:fk",method:"DELETE"},prototype$__updateById__temario:{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/temario/:fk",method:"PUT"},prototype$__findById__cursosPTC_pertenece:{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/cursosPTC_pertenece/:fk",method:"GET"},prototype$__destroyById__cursosPTC_pertenece:{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/cursosPTC_pertenece/:fk",method:"DELETE"},prototype$__updateById__cursosPTC_pertenece:{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/cursosPTC_pertenece/:fk",method:"PUT"},prototype$__findById__instructores_habilitados:{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/instructores_habilitados/:fk",method:"GET"},prototype$__destroyById__instructores_habilitados:{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/instructores_habilitados/:fk",method:"DELETE"},prototype$__updateById__instructores_habilitados:{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/instructores_habilitados/:fk",method:"PUT"},prototype$__link__instructores_habilitados:{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/instructores_habilitados/rel/:fk",method:"PUT"},prototype$__unlink__instructores_habilitados:{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/instructores_habilitados/rel/:fk",method:"DELETE"},prototype$__exists__instructores_habilitados:{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/instructores_habilitados/rel/:fk",method:"HEAD"},prototype$__get__temario:{isArray:!0,url:urlBase+"/CatalogoCursos/:id/temario",method:"GET"},prototype$__create__temario:{url:urlBase+"/CatalogoCursos/:id/temario",method:"POST"},prototype$__delete__temario:{url:urlBase+"/CatalogoCursos/:id/temario",method:"DELETE"},prototype$__count__temario:{url:urlBase+"/CatalogoCursos/:id/temario/count",method:"GET"},prototype$__get__cursosPTC_pertenece:{isArray:!0,url:urlBase+"/CatalogoCursos/:id/cursosPTC_pertenece",method:"GET"},prototype$__create__cursosPTC_pertenece:{url:urlBase+"/CatalogoCursos/:id/cursosPTC_pertenece",method:"POST"},prototype$__delete__cursosPTC_pertenece:{url:urlBase+"/CatalogoCursos/:id/cursosPTC_pertenece",method:"DELETE"},prototype$__count__cursosPTC_pertenece:{url:urlBase+"/CatalogoCursos/:id/cursosPTC_pertenece/count",method:"GET"},prototype$__get__instructores_habilitados:{isArray:!0,url:urlBase+"/CatalogoCursos/:id/instructores_habilitados",method:"GET"},prototype$__create__instructores_habilitados:{url:urlBase+"/CatalogoCursos/:id/instructores_habilitados",method:"POST"},prototype$__delete__instructores_habilitados:{url:urlBase+"/CatalogoCursos/:id/instructores_habilitados",method:"DELETE"},prototype$__count__instructores_habilitados:{url:urlBase+"/CatalogoCursos/:id/instructores_habilitados/count",method:"GET"},create:{url:urlBase+"/CatalogoCursos",method:"POST"},createMany:{isArray:!0,url:urlBase+"/CatalogoCursos",method:"POST"},upsert:{url:urlBase+"/CatalogoCursos",method:"PATCH"},replaceOrCreate:{url:urlBase+"/CatalogoCursos/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/CatalogoCursos/:id/exists",method:"GET"},findById:{url:urlBase+"/CatalogoCursos/:id",method:"GET"},replaceById:{url:urlBase+"/CatalogoCursos/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/CatalogoCursos",method:"GET"},findOne:{url:urlBase+"/CatalogoCursos/findOne",method:"GET"},updateAll:{url:urlBase+"/CatalogoCursos/update",method:"POST"},deleteById:{url:urlBase+"/CatalogoCursos/:id",method:"DELETE"},count:{url:urlBase+"/CatalogoCursos/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/CatalogoCursos/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/CatalogoCursos/change-stream",method:"POST"},"::findById::CatalogoEspecialidades::RegistroCursos":{params:{fk:"@fk"},url:urlBase+"/CatalogoEspecialidades/:id/RegistroCursos/:fk",method:"GET"},"::destroyById::CatalogoEspecialidades::RegistroCursos":{params:{fk:"@fk"},url:urlBase+"/CatalogoEspecialidades/:id/RegistroCursos/:fk",method:"DELETE"},"::updateById::CatalogoEspecialidades::RegistroCursos":{params:{fk:"@fk"},url:urlBase+"/CatalogoEspecialidades/:id/RegistroCursos/:fk",method:"PUT"},"::get::CatalogoEspecialidades::RegistroCursos":{isArray:!0,url:urlBase+"/CatalogoEspecialidades/:id/RegistroCursos",method:"GET"},"::create::CatalogoEspecialidades::RegistroCursos":{url:urlBase+"/CatalogoEspecialidades/:id/RegistroCursos",method:"POST"},"::createMany::CatalogoEspecialidades::RegistroCursos":{isArray:!0,url:urlBase+"/CatalogoEspecialidades/:id/RegistroCursos",method:"POST"},"::delete::CatalogoEspecialidades::RegistroCursos":{url:urlBase+"/CatalogoEspecialidades/:id/RegistroCursos",method:"DELETE"},"::count::CatalogoEspecialidades::RegistroCursos":{url:urlBase+"/CatalogoEspecialidades/:id/RegistroCursos/count",method:"GET"},"::get::CursosPtc::detalle_curso":{url:urlBase+"/CursosPtcs/:id/detalle_curso",method:"GET"},"::findById::CatalogoInstructores::cursos_habilitados":{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados/:fk",method:"GET"},"::destroyById::CatalogoInstructores::cursos_habilitados":{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados/:fk",method:"DELETE"},"::updateById::CatalogoInstructores::cursos_habilitados":{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados/:fk",method:"PUT"},"::link::CatalogoInstructores::cursos_habilitados":{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados/rel/:fk",method:"PUT"},"::unlink::CatalogoInstructores::cursos_habilitados":{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados/rel/:fk",method:"DELETE"},"::exists::CatalogoInstructores::cursos_habilitados":{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados/rel/:fk",method:"HEAD"},"::get::CatalogoInstructores::cursos_habilitados":{isArray:!0,url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados",method:"GET"},"::create::CatalogoInstructores::cursos_habilitados":{url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados",method:"POST"},"::createMany::CatalogoInstructores::cursos_habilitados":{isArray:!0,url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados",method:"POST"},"::delete::CatalogoInstructores::cursos_habilitados":{url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados",method:"DELETE"},"::count::CatalogoInstructores::cursos_habilitados":{url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados/count",method:"GET"},"::get::RelInstrucCatCurso::CatalogoCursos":{url:urlBase+"/RelInstrucCatCursos/:id/CatalogoCursos",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="CatalogoCursos",R.especialidad=function(){var TargetResource=$injector.get("CatalogoEspecialidades"),action=TargetResource["::get::CatalogoCursos::especialidad"];return action.apply(R,arguments)},R.temario=function(){var TargetResource=$injector.get("CatalogoTemarioCursos"),action=TargetResource["::get::CatalogoCursos::temario"];return action.apply(R,arguments)},R.temario.count=function(){var TargetResource=$injector.get("CatalogoTemarioCursos"),action=TargetResource["::count::CatalogoCursos::temario"];return action.apply(R,arguments)},R.temario.create=function(){var TargetResource=$injector.get("CatalogoTemarioCursos"),action=TargetResource["::create::CatalogoCursos::temario"];return action.apply(R,arguments)},R.temario.createMany=function(){var TargetResource=$injector.get("CatalogoTemarioCursos"),action=TargetResource["::createMany::CatalogoCursos::temario"];return action.apply(R,arguments)},R.temario.destroyAll=function(){var TargetResource=$injector.get("CatalogoTemarioCursos"),action=TargetResource["::delete::CatalogoCursos::temario"];return action.apply(R,arguments)},R.temario.destroyById=function(){var TargetResource=$injector.get("CatalogoTemarioCursos"),action=TargetResource["::destroyById::CatalogoCursos::temario"];return action.apply(R,arguments)},R.temario.findById=function(){var TargetResource=$injector.get("CatalogoTemarioCursos"),action=TargetResource["::findById::CatalogoCursos::temario"];return action.apply(R,arguments)},R.temario.updateById=function(){var TargetResource=$injector.get("CatalogoTemarioCursos"),action=TargetResource["::updateById::CatalogoCursos::temario"];return action.apply(R,arguments)},R.cursosPTC_pertenece=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::get::CatalogoCursos::cursosPTC_pertenece"];return action.apply(R,arguments)},R.cursosPTC_pertenece.count=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::count::CatalogoCursos::cursosPTC_pertenece"];return action.apply(R,arguments)},R.cursosPTC_pertenece.create=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::create::CatalogoCursos::cursosPTC_pertenece"];return action.apply(R,arguments)},R.cursosPTC_pertenece.createMany=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::createMany::CatalogoCursos::cursosPTC_pertenece"];return action.apply(R,arguments)},R.cursosPTC_pertenece.destroyAll=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::delete::CatalogoCursos::cursosPTC_pertenece"];return action.apply(R,arguments)},R.cursosPTC_pertenece.destroyById=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::destroyById::CatalogoCursos::cursosPTC_pertenece"];return action.apply(R,arguments)},R.cursosPTC_pertenece.findById=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::findById::CatalogoCursos::cursosPTC_pertenece"];return action.apply(R,arguments)},R.cursosPTC_pertenece.updateById=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::updateById::CatalogoCursos::cursosPTC_pertenece"];return action.apply(R,arguments)},R.instructores_habilitados=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::get::CatalogoCursos::instructores_habilitados"];return action.apply(R,arguments)},R.instructores_habilitados.count=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::count::CatalogoCursos::instructores_habilitados"];return action.apply(R,arguments)},R.instructores_habilitados.create=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::create::CatalogoCursos::instructores_habilitados"];return action.apply(R,arguments)},R.instructores_habilitados.createMany=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::createMany::CatalogoCursos::instructores_habilitados"];return action.apply(R,arguments)},R.instructores_habilitados.destroyAll=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::delete::CatalogoCursos::instructores_habilitados"];return action.apply(R,arguments)},R.instructores_habilitados.destroyById=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::destroyById::CatalogoCursos::instructores_habilitados"];return action.apply(R,arguments)},R.instructores_habilitados.exists=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::exists::CatalogoCursos::instructores_habilitados"];return action.apply(R,arguments)},R.instructores_habilitados.findById=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::findById::CatalogoCursos::instructores_habilitados"];return action.apply(R,arguments)},R.instructores_habilitados.link=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::link::CatalogoCursos::instructores_habilitados"];return action.apply(R,arguments)},R.instructores_habilitados.unlink=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::unlink::CatalogoCursos::instructores_habilitados"];return action.apply(R,arguments)},R.instructores_habilitados.updateById=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::updateById::CatalogoCursos::instructores_habilitados"];return action.apply(R,arguments)},R}]),module.factory("ProgTrimCursos",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/ProgTrimCursos/:id",{id:"@id"},{prototype$__get__unidad_pertenece:{url:urlBase+"/ProgTrimCursos/:id/unidad_pertenece",method:"GET"},prototype$__findById__cursos_programados:{params:{fk:"@fk"},url:urlBase+"/ProgTrimCursos/:id/cursos_programados/:fk",method:"GET"},prototype$__destroyById__cursos_programados:{params:{fk:"@fk"},url:urlBase+"/ProgTrimCursos/:id/cursos_programados/:fk",method:"DELETE"},prototype$__updateById__cursos_programados:{params:{fk:"@fk"},url:urlBase+"/ProgTrimCursos/:id/cursos_programados/:fk",method:"PUT"},prototype$__findById__cursos_no_programados:{params:{fk:"@fk"},url:urlBase+"/ProgTrimCursos/:id/cursos_no_programados/:fk",method:"GET"},prototype$__destroyById__cursos_no_programados:{params:{fk:"@fk"},url:urlBase+"/ProgTrimCursos/:id/cursos_no_programados/:fk",method:"DELETE"},prototype$__updateById__cursos_no_programados:{params:{fk:"@fk"},url:urlBase+"/ProgTrimCursos/:id/cursos_no_programados/:fk",method:"PUT"},prototype$__get__cursos_programados:{isArray:!0,url:urlBase+"/ProgTrimCursos/:id/cursos_programados",method:"GET"},prototype$__create__cursos_programados:{url:urlBase+"/ProgTrimCursos/:id/cursos_programados",method:"POST"},prototype$__delete__cursos_programados:{url:urlBase+"/ProgTrimCursos/:id/cursos_programados",method:"DELETE"},prototype$__count__cursos_programados:{url:urlBase+"/ProgTrimCursos/:id/cursos_programados/count",method:"GET"},prototype$__get__cursos_no_programados:{isArray:!0,url:urlBase+"/ProgTrimCursos/:id/cursos_no_programados",method:"GET"},prototype$__create__cursos_no_programados:{url:urlBase+"/ProgTrimCursos/:id/cursos_no_programados",method:"POST"},prototype$__delete__cursos_no_programados:{url:urlBase+"/ProgTrimCursos/:id/cursos_no_programados",method:"DELETE"},prototype$__count__cursos_no_programados:{url:urlBase+"/ProgTrimCursos/:id/cursos_no_programados/count",method:"GET"},create:{url:urlBase+"/ProgTrimCursos",method:"POST"},createMany:{isArray:!0,url:urlBase+"/ProgTrimCursos",method:"POST"},upsert:{url:urlBase+"/ProgTrimCursos",method:"PATCH"},replaceOrCreate:{url:urlBase+"/ProgTrimCursos/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/ProgTrimCursos/:id/exists",method:"GET"},findById:{url:urlBase+"/ProgTrimCursos/:id",method:"GET"},replaceById:{url:urlBase+"/ProgTrimCursos/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/ProgTrimCursos",method:"GET"},findOne:{url:urlBase+"/ProgTrimCursos/findOne",method:"GET"},updateAll:{url:urlBase+"/ProgTrimCursos/update",method:"POST"},deleteById:{url:urlBase+"/ProgTrimCursos/:id",method:"DELETE"},count:{url:urlBase+"/ProgTrimCursos/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/ProgTrimCursos/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/ProgTrimCursos/change-stream",method:"POST"},"::get::CursosOficiales::ptc_pertenece":{url:urlBase+"/CursosOficiales/:id/ptc_pertenece",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="ProgTrimCursos",R.unidad_pertenece=function(){var TargetResource=$injector.get("CatalogoUnidadesAdmtvas"),action=TargetResource["::get::ProgTrimCursos::unidad_pertenece"];return action.apply(R,arguments)},R.cursos_programados=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::get::ProgTrimCursos::cursos_programados"];return action.apply(R,arguments)},R.cursos_programados.count=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::count::ProgTrimCursos::cursos_programados"];return action.apply(R,arguments)},R.cursos_programados.create=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::create::ProgTrimCursos::cursos_programados"];return action.apply(R,arguments)},R.cursos_programados.createMany=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::createMany::ProgTrimCursos::cursos_programados"];return action.apply(R,arguments)},R.cursos_programados.destroyAll=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::delete::ProgTrimCursos::cursos_programados"];return action.apply(R,arguments)},R.cursos_programados.destroyById=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::destroyById::ProgTrimCursos::cursos_programados"];return action.apply(R,arguments)},R.cursos_programados.findById=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::findById::ProgTrimCursos::cursos_programados"];return action.apply(R,arguments)},R.cursos_programados.updateById=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::updateById::ProgTrimCursos::cursos_programados"];return action.apply(R,arguments)},R.cursos_no_programados=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::get::ProgTrimCursos::cursos_no_programados"];return action.apply(R,arguments)},R.cursos_no_programados.count=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::count::ProgTrimCursos::cursos_no_programados"];return action.apply(R,arguments)},R.cursos_no_programados.create=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::create::ProgTrimCursos::cursos_no_programados"];return action.apply(R,arguments)},R.cursos_no_programados.createMany=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::createMany::ProgTrimCursos::cursos_no_programados"];return action.apply(R,arguments)},R.cursos_no_programados.destroyAll=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::delete::ProgTrimCursos::cursos_no_programados"];return action.apply(R,arguments)},R.cursos_no_programados.destroyById=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::destroyById::ProgTrimCursos::cursos_no_programados"];return action.apply(R,arguments)},R.cursos_no_programados.findById=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::findById::ProgTrimCursos::cursos_no_programados"];return action.apply(R,arguments)},R.cursos_no_programados.updateById=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::updateById::ProgTrimCursos::cursos_no_programados"];return action.apply(R,arguments)},R}]),module.factory("CursosPtc",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/CursosPtcs/:id",{id:"@id"},{prototype$__get__detalle_curso:{url:urlBase+"/CursosPtcs/:id/detalle_curso",method:"GET"},prototype$__findById__instructores_propuestos:{params:{fk:"@fk"},url:urlBase+"/CursosPtcs/:id/instructores_propuestos/:fk",method:"GET"},prototype$__destroyById__instructores_propuestos:{params:{fk:"@fk"},url:urlBase+"/CursosPtcs/:id/instructores_propuestos/:fk",method:"DELETE"},prototype$__updateById__instructores_propuestos:{params:{fk:"@fk"},url:urlBase+"/CursosPtcs/:id/instructores_propuestos/:fk",method:"PUT"},prototype$__link__instructores_propuestos:{params:{fk:"@fk"},url:urlBase+"/CursosPtcs/:id/instructores_propuestos/rel/:fk",method:"PUT"},prototype$__unlink__instructores_propuestos:{params:{fk:"@fk"},url:urlBase+"/CursosPtcs/:id/instructores_propuestos/rel/:fk",method:"DELETE"},prototype$__exists__instructores_propuestos:{params:{fk:"@fk"},url:urlBase+"/CursosPtcs/:id/instructores_propuestos/rel/:fk",method:"HEAD"},prototype$__findById__curso_oficial_registrado:{params:{fk:"@fk"},url:urlBase+"/CursosPtcs/:id/curso_oficial_registrado/:fk",method:"GET"},prototype$__destroyById__curso_oficial_registrado:{params:{fk:"@fk"},url:urlBase+"/CursosPtcs/:id/curso_oficial_registrado/:fk",method:"DELETE"},prototype$__updateById__curso_oficial_registrado:{params:{fk:"@fk"},url:urlBase+"/CursosPtcs/:id/curso_oficial_registrado/:fk",method:"PUT"},prototype$__get__instructores_propuestos:{isArray:!0,url:urlBase+"/CursosPtcs/:id/instructores_propuestos",method:"GET"},prototype$__create__instructores_propuestos:{url:urlBase+"/CursosPtcs/:id/instructores_propuestos",method:"POST"},prototype$__delete__instructores_propuestos:{url:urlBase+"/CursosPtcs/:id/instructores_propuestos",method:"DELETE"},prototype$__count__instructores_propuestos:{url:urlBase+"/CursosPtcs/:id/instructores_propuestos/count",method:"GET"},prototype$__get__curso_oficial_registrado:{isArray:!0,url:urlBase+"/CursosPtcs/:id/curso_oficial_registrado",method:"GET"},prototype$__create__curso_oficial_registrado:{url:urlBase+"/CursosPtcs/:id/curso_oficial_registrado",method:"POST"},prototype$__delete__curso_oficial_registrado:{url:urlBase+"/CursosPtcs/:id/curso_oficial_registrado",method:"DELETE"},prototype$__count__curso_oficial_registrado:{url:urlBase+"/CursosPtcs/:id/curso_oficial_registrado/count",method:"GET"},create:{url:urlBase+"/CursosPtcs",method:"POST"},createMany:{isArray:!0,url:urlBase+"/CursosPtcs",method:"POST"},upsert:{url:urlBase+"/CursosPtcs",method:"PATCH"},replaceOrCreate:{url:urlBase+"/CursosPtcs/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/CursosPtcs/:id/exists",method:"GET"},findById:{url:urlBase+"/CursosPtcs/:id",method:"GET"},replaceById:{url:urlBase+"/CursosPtcs/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/CursosPtcs",method:"GET"},findOne:{url:urlBase+"/CursosPtcs/findOne",method:"GET"},updateAll:{url:urlBase+"/CursosPtcs/update",method:"POST"},deleteById:{url:urlBase+"/CursosPtcs/:id",method:"DELETE"},count:{url:urlBase+"/CursosPtcs/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/CursosPtcs/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/CursosPtcs/change-stream",method:"POST"},"::findById::CatalogoCursos::cursosPTC_pertenece":{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/cursosPTC_pertenece/:fk",method:"GET"},"::destroyById::CatalogoCursos::cursosPTC_pertenece":{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/cursosPTC_pertenece/:fk",method:"DELETE"},"::updateById::CatalogoCursos::cursosPTC_pertenece":{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/cursosPTC_pertenece/:fk",method:"PUT"},"::get::CatalogoCursos::cursosPTC_pertenece":{isArray:!0,url:urlBase+"/CatalogoCursos/:id/cursosPTC_pertenece",method:"GET"},"::create::CatalogoCursos::cursosPTC_pertenece":{url:urlBase+"/CatalogoCursos/:id/cursosPTC_pertenece",method:"POST"},"::createMany::CatalogoCursos::cursosPTC_pertenece":{isArray:!0,url:urlBase+"/CatalogoCursos/:id/cursosPTC_pertenece",method:"POST"},"::delete::CatalogoCursos::cursosPTC_pertenece":{url:urlBase+"/CatalogoCursos/:id/cursosPTC_pertenece",method:"DELETE"},"::count::CatalogoCursos::cursosPTC_pertenece":{
url:urlBase+"/CatalogoCursos/:id/cursosPTC_pertenece/count",method:"GET"},"::findById::ProgTrimCursos::cursos_programados":{params:{fk:"@fk"},url:urlBase+"/ProgTrimCursos/:id/cursos_programados/:fk",method:"GET"},"::destroyById::ProgTrimCursos::cursos_programados":{params:{fk:"@fk"},url:urlBase+"/ProgTrimCursos/:id/cursos_programados/:fk",method:"DELETE"},"::updateById::ProgTrimCursos::cursos_programados":{params:{fk:"@fk"},url:urlBase+"/ProgTrimCursos/:id/cursos_programados/:fk",method:"PUT"},"::get::ProgTrimCursos::cursos_programados":{isArray:!0,url:urlBase+"/ProgTrimCursos/:id/cursos_programados",method:"GET"},"::create::ProgTrimCursos::cursos_programados":{url:urlBase+"/ProgTrimCursos/:id/cursos_programados",method:"POST"},"::createMany::ProgTrimCursos::cursos_programados":{isArray:!0,url:urlBase+"/ProgTrimCursos/:id/cursos_programados",method:"POST"},"::delete::ProgTrimCursos::cursos_programados":{url:urlBase+"/ProgTrimCursos/:id/cursos_programados",method:"DELETE"},"::count::ProgTrimCursos::cursos_programados":{url:urlBase+"/ProgTrimCursos/:id/cursos_programados/count",method:"GET"},"::findById::CatalogoInstructores::cursos_propuestos":{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos/:fk",method:"GET"},"::destroyById::CatalogoInstructores::cursos_propuestos":{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos/:fk",method:"DELETE"},"::updateById::CatalogoInstructores::cursos_propuestos":{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos/:fk",method:"PUT"},"::link::CatalogoInstructores::cursos_propuestos":{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos/rel/:fk",method:"PUT"},"::unlink::CatalogoInstructores::cursos_propuestos":{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos/rel/:fk",method:"DELETE"},"::exists::CatalogoInstructores::cursos_propuestos":{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos/rel/:fk",method:"HEAD"},"::get::CatalogoInstructores::cursos_propuestos":{isArray:!0,url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos",method:"GET"},"::create::CatalogoInstructores::cursos_propuestos":{url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos",method:"POST"},"::createMany::CatalogoInstructores::cursos_propuestos":{isArray:!0,url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos",method:"POST"},"::delete::CatalogoInstructores::cursos_propuestos":{url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos",method:"DELETE"},"::count::CatalogoInstructores::cursos_propuestos":{url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos/count",method:"GET"},"::get::RelInstrucPtc::CursosPtc":{url:urlBase+"/RelInstrucPtcs/:id/CursosPtc",method:"GET"},"::get::CursosOficiales::curso_ptc_pertenece":{url:urlBase+"/CursosOficiales/:id/curso_ptc_pertenece",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="CursosPtc",R.detalle_curso=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::get::CursosPtc::detalle_curso"];return action.apply(R,arguments)},R.instructores_propuestos=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::get::CursosPtc::instructores_propuestos"];return action.apply(R,arguments)},R.instructores_propuestos.count=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::count::CursosPtc::instructores_propuestos"];return action.apply(R,arguments)},R.instructores_propuestos.create=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::create::CursosPtc::instructores_propuestos"];return action.apply(R,arguments)},R.instructores_propuestos.createMany=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::createMany::CursosPtc::instructores_propuestos"];return action.apply(R,arguments)},R.instructores_propuestos.destroyAll=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::delete::CursosPtc::instructores_propuestos"];return action.apply(R,arguments)},R.instructores_propuestos.destroyById=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::destroyById::CursosPtc::instructores_propuestos"];return action.apply(R,arguments)},R.instructores_propuestos.exists=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::exists::CursosPtc::instructores_propuestos"];return action.apply(R,arguments)},R.instructores_propuestos.findById=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::findById::CursosPtc::instructores_propuestos"];return action.apply(R,arguments)},R.instructores_propuestos.link=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::link::CursosPtc::instructores_propuestos"];return action.apply(R,arguments)},R.instructores_propuestos.unlink=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::unlink::CursosPtc::instructores_propuestos"];return action.apply(R,arguments)},R.instructores_propuestos.updateById=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::updateById::CursosPtc::instructores_propuestos"];return action.apply(R,arguments)},R.curso_oficial_registrado=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::get::CursosPtc::curso_oficial_registrado"];return action.apply(R,arguments)},R.curso_oficial_registrado.count=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::count::CursosPtc::curso_oficial_registrado"];return action.apply(R,arguments)},R.curso_oficial_registrado.create=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::create::CursosPtc::curso_oficial_registrado"];return action.apply(R,arguments)},R.curso_oficial_registrado.createMany=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::createMany::CursosPtc::curso_oficial_registrado"];return action.apply(R,arguments)},R.curso_oficial_registrado.destroyAll=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::delete::CursosPtc::curso_oficial_registrado"];return action.apply(R,arguments)},R.curso_oficial_registrado.destroyById=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::destroyById::CursosPtc::curso_oficial_registrado"];return action.apply(R,arguments)},R.curso_oficial_registrado.findById=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::findById::CursosPtc::curso_oficial_registrado"];return action.apply(R,arguments)},R.curso_oficial_registrado.updateById=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::updateById::CursosPtc::curso_oficial_registrado"];return action.apply(R,arguments)},R}]),module.factory("CatalogoInstructores",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/CatalogoInstructores/:id",{id:"@id"},{prototype$__get__unidad_pertenece:{url:urlBase+"/CatalogoInstructores/:id/unidad_pertenece",method:"GET"},prototype$__get__localidad_pertenece:{url:urlBase+"/CatalogoInstructores/:id/localidad_pertenece",method:"GET"},prototype$__findById__cursos_propuestos:{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos/:fk",method:"GET"},prototype$__destroyById__cursos_propuestos:{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos/:fk",method:"DELETE"},prototype$__updateById__cursos_propuestos:{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos/:fk",method:"PUT"},prototype$__link__cursos_propuestos:{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos/rel/:fk",method:"PUT"},prototype$__unlink__cursos_propuestos:{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos/rel/:fk",method:"DELETE"},prototype$__exists__cursos_propuestos:{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos/rel/:fk",method:"HEAD"},prototype$__findById__cursos_habilitados:{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados/:fk",method:"GET"},prototype$__destroyById__cursos_habilitados:{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados/:fk",method:"DELETE"},prototype$__updateById__cursos_habilitados:{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados/:fk",method:"PUT"},prototype$__link__cursos_habilitados:{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados/rel/:fk",method:"PUT"},prototype$__unlink__cursos_habilitados:{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados/rel/:fk",method:"DELETE"},prototype$__exists__cursos_habilitados:{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados/rel/:fk",method:"HEAD"},prototype$__findById__evaluacion_curso:{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/evaluacion_curso/:fk",method:"GET"},prototype$__destroyById__evaluacion_curso:{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/evaluacion_curso/:fk",method:"DELETE"},prototype$__updateById__evaluacion_curso:{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/evaluacion_curso/:fk",method:"PUT"},prototype$__get__cursos_propuestos:{isArray:!0,url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos",method:"GET"},prototype$__create__cursos_propuestos:{url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos",method:"POST"},prototype$__delete__cursos_propuestos:{url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos",method:"DELETE"},prototype$__count__cursos_propuestos:{url:urlBase+"/CatalogoInstructores/:id/cursos_propuestos/count",method:"GET"},prototype$__get__cursos_habilitados:{isArray:!0,url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados",method:"GET"},prototype$__create__cursos_habilitados:{url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados",method:"POST"},prototype$__delete__cursos_habilitados:{url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados",method:"DELETE"},prototype$__count__cursos_habilitados:{url:urlBase+"/CatalogoInstructores/:id/cursos_habilitados/count",method:"GET"},prototype$__get__evaluacion_curso:{isArray:!0,url:urlBase+"/CatalogoInstructores/:id/evaluacion_curso",method:"GET"},prototype$__create__evaluacion_curso:{url:urlBase+"/CatalogoInstructores/:id/evaluacion_curso",method:"POST"},prototype$__delete__evaluacion_curso:{url:urlBase+"/CatalogoInstructores/:id/evaluacion_curso",method:"DELETE"},prototype$__count__evaluacion_curso:{url:urlBase+"/CatalogoInstructores/:id/evaluacion_curso/count",method:"GET"},create:{url:urlBase+"/CatalogoInstructores",method:"POST"},createMany:{isArray:!0,url:urlBase+"/CatalogoInstructores",method:"POST"},upsert:{url:urlBase+"/CatalogoInstructores",method:"PATCH"},replaceOrCreate:{url:urlBase+"/CatalogoInstructores/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/CatalogoInstructores/:id/exists",method:"GET"},findById:{url:urlBase+"/CatalogoInstructores/:id",method:"GET"},replaceById:{url:urlBase+"/CatalogoInstructores/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/CatalogoInstructores",method:"GET"},findOne:{url:urlBase+"/CatalogoInstructores/findOne",method:"GET"},updateAll:{url:urlBase+"/CatalogoInstructores/update",method:"POST"},deleteById:{url:urlBase+"/CatalogoInstructores/:id",method:"DELETE"},count:{url:urlBase+"/CatalogoInstructores/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/CatalogoInstructores/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/CatalogoInstructores/change-stream",method:"POST"},ef_ter_anio:{isArray:!0,url:urlBase+"/CatalogoInstructores/ef_ter_anio",method:"GET"},"::findById::CatalogoCursos::instructores_habilitados":{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/instructores_habilitados/:fk",method:"GET"},"::destroyById::CatalogoCursos::instructores_habilitados":{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/instructores_habilitados/:fk",method:"DELETE"},"::updateById::CatalogoCursos::instructores_habilitados":{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/instructores_habilitados/:fk",method:"PUT"},"::link::CatalogoCursos::instructores_habilitados":{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/instructores_habilitados/rel/:fk",method:"PUT"},"::unlink::CatalogoCursos::instructores_habilitados":{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/instructores_habilitados/rel/:fk",method:"DELETE"},"::exists::CatalogoCursos::instructores_habilitados":{params:{fk:"@fk"},url:urlBase+"/CatalogoCursos/:id/instructores_habilitados/rel/:fk",method:"HEAD"},"::get::CatalogoCursos::instructores_habilitados":{isArray:!0,url:urlBase+"/CatalogoCursos/:id/instructores_habilitados",method:"GET"},"::create::CatalogoCursos::instructores_habilitados":{url:urlBase+"/CatalogoCursos/:id/instructores_habilitados",method:"POST"},"::createMany::CatalogoCursos::instructores_habilitados":{isArray:!0,url:urlBase+"/CatalogoCursos/:id/instructores_habilitados",method:"POST"},"::delete::CatalogoCursos::instructores_habilitados":{url:urlBase+"/CatalogoCursos/:id/instructores_habilitados",method:"DELETE"},"::count::CatalogoCursos::instructores_habilitados":{url:urlBase+"/CatalogoCursos/:id/instructores_habilitados/count",method:"GET"},"::findById::CursosPtc::instructores_propuestos":{params:{fk:"@fk"},url:urlBase+"/CursosPtcs/:id/instructores_propuestos/:fk",method:"GET"},"::destroyById::CursosPtc::instructores_propuestos":{params:{fk:"@fk"},url:urlBase+"/CursosPtcs/:id/instructores_propuestos/:fk",method:"DELETE"},"::updateById::CursosPtc::instructores_propuestos":{params:{fk:"@fk"},url:urlBase+"/CursosPtcs/:id/instructores_propuestos/:fk",method:"PUT"},"::link::CursosPtc::instructores_propuestos":{params:{fk:"@fk"},url:urlBase+"/CursosPtcs/:id/instructores_propuestos/rel/:fk",method:"PUT"},"::unlink::CursosPtc::instructores_propuestos":{params:{fk:"@fk"},url:urlBase+"/CursosPtcs/:id/instructores_propuestos/rel/:fk",method:"DELETE"},"::exists::CursosPtc::instructores_propuestos":{params:{fk:"@fk"},url:urlBase+"/CursosPtcs/:id/instructores_propuestos/rel/:fk",method:"HEAD"},"::get::CursosPtc::instructores_propuestos":{isArray:!0,url:urlBase+"/CursosPtcs/:id/instructores_propuestos",method:"GET"},"::create::CursosPtc::instructores_propuestos":{url:urlBase+"/CursosPtcs/:id/instructores_propuestos",method:"POST"},"::createMany::CursosPtc::instructores_propuestos":{isArray:!0,url:urlBase+"/CursosPtcs/:id/instructores_propuestos",method:"POST"},"::delete::CursosPtc::instructores_propuestos":{url:urlBase+"/CursosPtcs/:id/instructores_propuestos",method:"DELETE"},"::count::CursosPtc::instructores_propuestos":{url:urlBase+"/CursosPtcs/:id/instructores_propuestos/count",method:"GET"},"::get::RelInstrucPtc::CatalogoInstructores":{url:urlBase+"/RelInstrucPtcs/:id/CatalogoInstructores",method:"GET"},"::get::RelInstrucCatCurso::CatalogoInstructores":{url:urlBase+"/RelInstrucCatCursos/:id/CatalogoInstructores",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="CatalogoInstructores",R.unidad_pertenece=function(){var TargetResource=$injector.get("CatalogoUnidadesAdmtvas"),action=TargetResource["::get::CatalogoInstructores::unidad_pertenece"];return action.apply(R,arguments)},R.localidad_pertenece=function(){var TargetResource=$injector.get("CatalogoLocalidades"),action=TargetResource["::get::CatalogoInstructores::localidad_pertenece"];return action.apply(R,arguments)},R.cursos_propuestos=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::get::CatalogoInstructores::cursos_propuestos"];return action.apply(R,arguments)},R.cursos_propuestos.count=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::count::CatalogoInstructores::cursos_propuestos"];return action.apply(R,arguments)},R.cursos_propuestos.create=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::create::CatalogoInstructores::cursos_propuestos"];return action.apply(R,arguments)},R.cursos_propuestos.createMany=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::createMany::CatalogoInstructores::cursos_propuestos"];return action.apply(R,arguments)},R.cursos_propuestos.destroyAll=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::delete::CatalogoInstructores::cursos_propuestos"];return action.apply(R,arguments)},R.cursos_propuestos.destroyById=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::destroyById::CatalogoInstructores::cursos_propuestos"];return action.apply(R,arguments)},R.cursos_propuestos.exists=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::exists::CatalogoInstructores::cursos_propuestos"];return action.apply(R,arguments)},R.cursos_propuestos.findById=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::findById::CatalogoInstructores::cursos_propuestos"];return action.apply(R,arguments)},R.cursos_propuestos.link=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::link::CatalogoInstructores::cursos_propuestos"];return action.apply(R,arguments)},R.cursos_propuestos.unlink=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::unlink::CatalogoInstructores::cursos_propuestos"];return action.apply(R,arguments)},R.cursos_propuestos.updateById=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::updateById::CatalogoInstructores::cursos_propuestos"];return action.apply(R,arguments)},R.cursos_habilitados=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::get::CatalogoInstructores::cursos_habilitados"];return action.apply(R,arguments)},R.cursos_habilitados.count=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::count::CatalogoInstructores::cursos_habilitados"];return action.apply(R,arguments)},R.cursos_habilitados.create=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::create::CatalogoInstructores::cursos_habilitados"];return action.apply(R,arguments)},R.cursos_habilitados.createMany=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::createMany::CatalogoInstructores::cursos_habilitados"];return action.apply(R,arguments)},R.cursos_habilitados.destroyAll=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::delete::CatalogoInstructores::cursos_habilitados"];return action.apply(R,arguments)},R.cursos_habilitados.destroyById=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::destroyById::CatalogoInstructores::cursos_habilitados"];return action.apply(R,arguments)},R.cursos_habilitados.exists=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::exists::CatalogoInstructores::cursos_habilitados"];return action.apply(R,arguments)},R.cursos_habilitados.findById=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::findById::CatalogoInstructores::cursos_habilitados"];return action.apply(R,arguments)},R.cursos_habilitados.link=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::link::CatalogoInstructores::cursos_habilitados"];return action.apply(R,arguments)},R.cursos_habilitados.unlink=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::unlink::CatalogoInstructores::cursos_habilitados"];return action.apply(R,arguments)},R.cursos_habilitados.updateById=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::updateById::CatalogoInstructores::cursos_habilitados"];return action.apply(R,arguments)},R.evaluacion_curso=function(){var TargetResource=$injector.get("RelInstrucCatCurso"),action=TargetResource["::get::CatalogoInstructores::evaluacion_curso"];return action.apply(R,arguments)},R.evaluacion_curso.count=function(){var TargetResource=$injector.get("RelInstrucCatCurso"),action=TargetResource["::count::CatalogoInstructores::evaluacion_curso"];return action.apply(R,arguments)},R.evaluacion_curso.create=function(){var TargetResource=$injector.get("RelInstrucCatCurso"),action=TargetResource["::create::CatalogoInstructores::evaluacion_curso"];return action.apply(R,arguments)},R.evaluacion_curso.createMany=function(){var TargetResource=$injector.get("RelInstrucCatCurso"),action=TargetResource["::createMany::CatalogoInstructores::evaluacion_curso"];return action.apply(R,arguments)},R.evaluacion_curso.destroyAll=function(){var TargetResource=$injector.get("RelInstrucCatCurso"),action=TargetResource["::delete::CatalogoInstructores::evaluacion_curso"];return action.apply(R,arguments)},R.evaluacion_curso.destroyById=function(){var TargetResource=$injector.get("RelInstrucCatCurso"),action=TargetResource["::destroyById::CatalogoInstructores::evaluacion_curso"];return action.apply(R,arguments)},R.evaluacion_curso.findById=function(){var TargetResource=$injector.get("RelInstrucCatCurso"),action=TargetResource["::findById::CatalogoInstructores::evaluacion_curso"];return action.apply(R,arguments)},R.evaluacion_curso.updateById=function(){var TargetResource=$injector.get("RelInstrucCatCurso"),action=TargetResource["::updateById::CatalogoInstructores::evaluacion_curso"];return action.apply(R,arguments)},R}]),module.factory("RelInstrucPtc",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/RelInstrucPtcs/:id",{id:"@id"},{prototype$__get__CursosPtc:{url:urlBase+"/RelInstrucPtcs/:id/CursosPtc",method:"GET"},prototype$__get__CatalogoInstructores:{url:urlBase+"/RelInstrucPtcs/:id/CatalogoInstructores",method:"GET"},create:{url:urlBase+"/RelInstrucPtcs",method:"POST"},createMany:{isArray:!0,url:urlBase+"/RelInstrucPtcs",method:"POST"},upsert:{url:urlBase+"/RelInstrucPtcs",method:"PATCH"},replaceOrCreate:{url:urlBase+"/RelInstrucPtcs/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/RelInstrucPtcs/:id/exists",method:"GET"},findById:{url:urlBase+"/RelInstrucPtcs/:id",method:"GET"},replaceById:{url:urlBase+"/RelInstrucPtcs/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/RelInstrucPtcs",method:"GET"},findOne:{url:urlBase+"/RelInstrucPtcs/findOne",method:"GET"},updateAll:{url:urlBase+"/RelInstrucPtcs/update",method:"POST"},deleteById:{url:urlBase+"/RelInstrucPtcs/:id",method:"DELETE"},count:{url:urlBase+"/RelInstrucPtcs/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/RelInstrucPtcs/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/RelInstrucPtcs/change-stream",method:"POST"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="RelInstrucPtc",R.CursosPtc=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::get::RelInstrucPtc::CursosPtc"];return action.apply(R,arguments)},R.CatalogoInstructores=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::get::RelInstrucPtc::CatalogoInstructores"];return action.apply(R,arguments)},R}]),module.factory("ControlProcesos",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/ControlProcesos/:id",{id:"@id"},{prototype$__findById__registro_destinatarios:{params:{fk:"@fk"},url:urlBase+"/ControlProcesos/:id/registro_destinatarios/:fk",method:"GET"},prototype$__destroyById__registro_destinatarios:{params:{fk:"@fk"},url:urlBase+"/ControlProcesos/:id/registro_destinatarios/:fk",method:"DELETE"},prototype$__updateById__registro_destinatarios:{params:{fk:"@fk"},url:urlBase+"/ControlProcesos/:id/registro_destinatarios/:fk",method:"PUT"},prototype$__get__registro_destinatarios:{isArray:!0,url:urlBase+"/ControlProcesos/:id/registro_destinatarios",method:"GET"},prototype$__create__registro_destinatarios:{url:urlBase+"/ControlProcesos/:id/registro_destinatarios",method:"POST"},prototype$__delete__registro_destinatarios:{url:urlBase+"/ControlProcesos/:id/registro_destinatarios",method:"DELETE"},prototype$__count__registro_destinatarios:{url:urlBase+"/ControlProcesos/:id/registro_destinatarios/count",method:"GET"},create:{url:urlBase+"/ControlProcesos",method:"POST"},createMany:{isArray:!0,url:urlBase+"/ControlProcesos",method:"POST"},upsert:{url:urlBase+"/ControlProcesos",method:"PATCH"},replaceOrCreate:{url:urlBase+"/ControlProcesos/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/ControlProcesos/:id/exists",method:"GET"},findById:{url:urlBase+"/ControlProcesos/:id",method:"GET"},replaceById:{url:urlBase+"/ControlProcesos/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/ControlProcesos",method:"GET"},findOne:{url:urlBase+"/ControlProcesos/findOne",method:"GET"},updateAll:{url:urlBase+"/ControlProcesos/update",method:"POST"},deleteById:{url:urlBase+"/ControlProcesos/:id",method:"DELETE"},count:{url:urlBase+"/ControlProcesos/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/ControlProcesos/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/ControlProcesos/change-stream",method:"POST"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="ControlProcesos",R.registro_destinatarios=function(){var TargetResource=$injector.get("DestinatariosAvisos"),action=TargetResource["::get::ControlProcesos::registro_destinatarios"];return action.apply(R,arguments)},R.registro_destinatarios.count=function(){var TargetResource=$injector.get("DestinatariosAvisos"),action=TargetResource["::count::ControlProcesos::registro_destinatarios"];return action.apply(R,arguments)},R.registro_destinatarios.create=function(){var TargetResource=$injector.get("DestinatariosAvisos"),action=TargetResource["::create::ControlProcesos::registro_destinatarios"];return action.apply(R,arguments)},R.registro_destinatarios.createMany=function(){var TargetResource=$injector.get("DestinatariosAvisos"),action=TargetResource["::createMany::ControlProcesos::registro_destinatarios"];return action.apply(R,arguments)},R.registro_destinatarios.destroyAll=function(){var TargetResource=$injector.get("DestinatariosAvisos"),action=TargetResource["::delete::ControlProcesos::registro_destinatarios"];return action.apply(R,arguments)},R.registro_destinatarios.destroyById=function(){var TargetResource=$injector.get("DestinatariosAvisos"),action=TargetResource["::destroyById::ControlProcesos::registro_destinatarios"];return action.apply(R,arguments)},R.registro_destinatarios.findById=function(){var TargetResource=$injector.get("DestinatariosAvisos"),action=TargetResource["::findById::ControlProcesos::registro_destinatarios"];return action.apply(R,arguments)},R.registro_destinatarios.updateById=function(){var TargetResource=$injector.get("DestinatariosAvisos"),action=TargetResource["::updateById::ControlProcesos::registro_destinatarios"];return action.apply(R,arguments)},R}]),module.factory("RelInstrucCatCurso",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/RelInstrucCatCursos/:id",{id:"@id"},{prototype$__get__CatalogoInstructores:{url:urlBase+"/RelInstrucCatCursos/:id/CatalogoInstructores",method:"GET"},prototype$__get__CatalogoCursos:{url:urlBase+"/RelInstrucCatCursos/:id/CatalogoCursos",method:"GET"},create:{url:urlBase+"/RelInstrucCatCursos",method:"POST"},createMany:{isArray:!0,url:urlBase+"/RelInstrucCatCursos",method:"POST"},upsert:{url:urlBase+"/RelInstrucCatCursos",method:"PATCH"},replaceOrCreate:{url:urlBase+"/RelInstrucCatCursos/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/RelInstrucCatCursos/:id/exists",method:"GET"},findById:{url:urlBase+"/RelInstrucCatCursos/:id",method:"GET"},replaceById:{url:urlBase+"/RelInstrucCatCursos/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/RelInstrucCatCursos",method:"GET"},findOne:{url:urlBase+"/RelInstrucCatCursos/findOne",method:"GET"},updateAll:{url:urlBase+"/RelInstrucCatCursos/update",method:"POST"},deleteById:{url:urlBase+"/RelInstrucCatCursos/:id",method:"DELETE"},count:{url:urlBase+"/RelInstrucCatCursos/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/RelInstrucCatCursos/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/RelInstrucCatCursos/change-stream",method:"POST"},"::findById::CatalogoInstructores::evaluacion_curso":{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/evaluacion_curso/:fk",method:"GET"},"::destroyById::CatalogoInstructores::evaluacion_curso":{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/evaluacion_curso/:fk",method:"DELETE"},"::updateById::CatalogoInstructores::evaluacion_curso":{params:{fk:"@fk"},url:urlBase+"/CatalogoInstructores/:id/evaluacion_curso/:fk",method:"PUT"},"::get::CatalogoInstructores::evaluacion_curso":{isArray:!0,url:urlBase+"/CatalogoInstructores/:id/evaluacion_curso",method:"GET"},"::create::CatalogoInstructores::evaluacion_curso":{url:urlBase+"/CatalogoInstructores/:id/evaluacion_curso",method:"POST"},"::createMany::CatalogoInstructores::evaluacion_curso":{isArray:!0,url:urlBase+"/CatalogoInstructores/:id/evaluacion_curso",method:"POST"},"::delete::CatalogoInstructores::evaluacion_curso":{url:urlBase+"/CatalogoInstructores/:id/evaluacion_curso",method:"DELETE"},"::count::CatalogoInstructores::evaluacion_curso":{url:urlBase+"/CatalogoInstructores/:id/evaluacion_curso/count",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="RelInstrucCatCurso",R.CatalogoInstructores=function(){var TargetResource=$injector.get("CatalogoInstructores"),action=TargetResource["::get::RelInstrucCatCurso::CatalogoInstructores"];return action.apply(R,arguments)},R.CatalogoCursos=function(){var TargetResource=$injector.get("CatalogoCursos"),action=TargetResource["::get::RelInstrucCatCurso::CatalogoCursos"];return action.apply(R,arguments)},R}]),module.factory("CursosOficiales",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/CursosOficiales/:id",{id:"@id"},{prototype$__get__unidad_pertenece:{url:urlBase+"/CursosOficiales/:id/unidad_pertenece",method:"GET"},prototype$__get__curso_ptc_pertenece:{url:urlBase+"/CursosOficiales/:id/curso_ptc_pertenece",method:"GET"},prototype$__get__ptc_pertenece:{url:urlBase+"/CursosOficiales/:id/ptc_pertenece",method:"GET"},prototype$__get__localidad_pertenece:{url:urlBase+"/CursosOficiales/:id/localidad_pertenece",method:"GET"},prototype$__findById__alumnos_inscritos:{params:{fk:"@fk"},url:urlBase+"/CursosOficiales/:id/alumnos_inscritos/:fk",method:"GET"},prototype$__destroyById__alumnos_inscritos:{params:{fk:"@fk"},url:urlBase+"/CursosOficiales/:id/alumnos_inscritos/:fk",method:"DELETE"},prototype$__updateById__alumnos_inscritos:{params:{fk:"@fk"},url:urlBase+"/CursosOficiales/:id/alumnos_inscritos/:fk",method:"PUT"},prototype$__link__alumnos_inscritos:{params:{fk:"@fk"},url:urlBase+"/CursosOficiales/:id/alumnos_inscritos/rel/:fk",method:"PUT"},prototype$__unlink__alumnos_inscritos:{params:{fk:"@fk"
},url:urlBase+"/CursosOficiales/:id/alumnos_inscritos/rel/:fk",method:"DELETE"},prototype$__exists__alumnos_inscritos:{params:{fk:"@fk"},url:urlBase+"/CursosOficiales/:id/alumnos_inscritos/rel/:fk",method:"HEAD"},prototype$__findById__inscripcionesCursos:{params:{fk:"@fk"},url:urlBase+"/CursosOficiales/:id/inscripcionesCursos/:fk",method:"GET"},prototype$__destroyById__inscripcionesCursos:{params:{fk:"@fk"},url:urlBase+"/CursosOficiales/:id/inscripcionesCursos/:fk",method:"DELETE"},prototype$__updateById__inscripcionesCursos:{params:{fk:"@fk"},url:urlBase+"/CursosOficiales/:id/inscripcionesCursos/:fk",method:"PUT"},prototype$__get__alumnos_inscritos:{isArray:!0,url:urlBase+"/CursosOficiales/:id/alumnos_inscritos",method:"GET"},prototype$__create__alumnos_inscritos:{url:urlBase+"/CursosOficiales/:id/alumnos_inscritos",method:"POST"},prototype$__delete__alumnos_inscritos:{url:urlBase+"/CursosOficiales/:id/alumnos_inscritos",method:"DELETE"},prototype$__count__alumnos_inscritos:{url:urlBase+"/CursosOficiales/:id/alumnos_inscritos/count",method:"GET"},prototype$__get__inscripcionesCursos:{isArray:!0,url:urlBase+"/CursosOficiales/:id/inscripcionesCursos",method:"GET"},prototype$__create__inscripcionesCursos:{url:urlBase+"/CursosOficiales/:id/inscripcionesCursos",method:"POST"},prototype$__delete__inscripcionesCursos:{url:urlBase+"/CursosOficiales/:id/inscripcionesCursos",method:"DELETE"},prototype$__count__inscripcionesCursos:{url:urlBase+"/CursosOficiales/:id/inscripcionesCursos/count",method:"GET"},create:{url:urlBase+"/CursosOficiales",method:"POST"},createMany:{isArray:!0,url:urlBase+"/CursosOficiales",method:"POST"},upsert:{url:urlBase+"/CursosOficiales",method:"PATCH"},replaceOrCreate:{url:urlBase+"/CursosOficiales/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/CursosOficiales/:id/exists",method:"GET"},findById:{url:urlBase+"/CursosOficiales/:id",method:"GET"},replaceById:{url:urlBase+"/CursosOficiales/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/CursosOficiales",method:"GET"},findOne:{url:urlBase+"/CursosOficiales/findOne",method:"GET"},updateAll:{url:urlBase+"/CursosOficiales/update",method:"POST"},deleteById:{url:urlBase+"/CursosOficiales/:id",method:"DELETE"},count:{url:urlBase+"/CursosOficiales/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/CursosOficiales/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/CursosOficiales/change-stream",method:"POST"},cursos_mes:{isArray:!0,url:urlBase+"/CursosOficiales/cursos_mes",method:"GET"},resumen_total:{isArray:!0,url:urlBase+"/CursosOficiales/resumen_total",method:"GET"},"::findById::ProgTrimCursos::cursos_no_programados":{params:{fk:"@fk"},url:urlBase+"/ProgTrimCursos/:id/cursos_no_programados/:fk",method:"GET"},"::destroyById::ProgTrimCursos::cursos_no_programados":{params:{fk:"@fk"},url:urlBase+"/ProgTrimCursos/:id/cursos_no_programados/:fk",method:"DELETE"},"::updateById::ProgTrimCursos::cursos_no_programados":{params:{fk:"@fk"},url:urlBase+"/ProgTrimCursos/:id/cursos_no_programados/:fk",method:"PUT"},"::get::ProgTrimCursos::cursos_no_programados":{isArray:!0,url:urlBase+"/ProgTrimCursos/:id/cursos_no_programados",method:"GET"},"::create::ProgTrimCursos::cursos_no_programados":{url:urlBase+"/ProgTrimCursos/:id/cursos_no_programados",method:"POST"},"::createMany::ProgTrimCursos::cursos_no_programados":{isArray:!0,url:urlBase+"/ProgTrimCursos/:id/cursos_no_programados",method:"POST"},"::delete::ProgTrimCursos::cursos_no_programados":{url:urlBase+"/ProgTrimCursos/:id/cursos_no_programados",method:"DELETE"},"::count::ProgTrimCursos::cursos_no_programados":{url:urlBase+"/ProgTrimCursos/:id/cursos_no_programados/count",method:"GET"},"::findById::CursosPtc::curso_oficial_registrado":{params:{fk:"@fk"},url:urlBase+"/CursosPtcs/:id/curso_oficial_registrado/:fk",method:"GET"},"::destroyById::CursosPtc::curso_oficial_registrado":{params:{fk:"@fk"},url:urlBase+"/CursosPtcs/:id/curso_oficial_registrado/:fk",method:"DELETE"},"::updateById::CursosPtc::curso_oficial_registrado":{params:{fk:"@fk"},url:urlBase+"/CursosPtcs/:id/curso_oficial_registrado/:fk",method:"PUT"},"::get::CursosPtc::curso_oficial_registrado":{isArray:!0,url:urlBase+"/CursosPtcs/:id/curso_oficial_registrado",method:"GET"},"::create::CursosPtc::curso_oficial_registrado":{url:urlBase+"/CursosPtcs/:id/curso_oficial_registrado",method:"POST"},"::createMany::CursosPtc::curso_oficial_registrado":{isArray:!0,url:urlBase+"/CursosPtcs/:id/curso_oficial_registrado",method:"POST"},"::delete::CursosPtc::curso_oficial_registrado":{url:urlBase+"/CursosPtcs/:id/curso_oficial_registrado",method:"DELETE"},"::count::CursosPtc::curso_oficial_registrado":{url:urlBase+"/CursosPtcs/:id/curso_oficial_registrado/count",method:"GET"},"::findById::Capacitandos::cursos_inscritos":{params:{fk:"@fk"},url:urlBase+"/Capacitandos/:id/cursos_inscritos/:fk",method:"GET"},"::destroyById::Capacitandos::cursos_inscritos":{params:{fk:"@fk"},url:urlBase+"/Capacitandos/:id/cursos_inscritos/:fk",method:"DELETE"},"::updateById::Capacitandos::cursos_inscritos":{params:{fk:"@fk"},url:urlBase+"/Capacitandos/:id/cursos_inscritos/:fk",method:"PUT"},"::link::Capacitandos::cursos_inscritos":{params:{fk:"@fk"},url:urlBase+"/Capacitandos/:id/cursos_inscritos/rel/:fk",method:"PUT"},"::unlink::Capacitandos::cursos_inscritos":{params:{fk:"@fk"},url:urlBase+"/Capacitandos/:id/cursos_inscritos/rel/:fk",method:"DELETE"},"::exists::Capacitandos::cursos_inscritos":{params:{fk:"@fk"},url:urlBase+"/Capacitandos/:id/cursos_inscritos/rel/:fk",method:"HEAD"},"::get::Capacitandos::cursos_inscritos":{isArray:!0,url:urlBase+"/Capacitandos/:id/cursos_inscritos",method:"GET"},"::create::Capacitandos::cursos_inscritos":{url:urlBase+"/Capacitandos/:id/cursos_inscritos",method:"POST"},"::createMany::Capacitandos::cursos_inscritos":{isArray:!0,url:urlBase+"/Capacitandos/:id/cursos_inscritos",method:"POST"},"::delete::Capacitandos::cursos_inscritos":{url:urlBase+"/Capacitandos/:id/cursos_inscritos",method:"DELETE"},"::count::Capacitandos::cursos_inscritos":{url:urlBase+"/Capacitandos/:id/cursos_inscritos/count",method:"GET"},"::get::InscripcionCurso::CursosOficiales":{url:urlBase+"/InscripcionCursos/:id/CursosOficiales",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="CursosOficiales",R.unidad_pertenece=function(){var TargetResource=$injector.get("CatalogoUnidadesAdmtvas"),action=TargetResource["::get::CursosOficiales::unidad_pertenece"];return action.apply(R,arguments)},R.curso_ptc_pertenece=function(){var TargetResource=$injector.get("CursosPtc"),action=TargetResource["::get::CursosOficiales::curso_ptc_pertenece"];return action.apply(R,arguments)},R.ptc_pertenece=function(){var TargetResource=$injector.get("ProgTrimCursos"),action=TargetResource["::get::CursosOficiales::ptc_pertenece"];return action.apply(R,arguments)},R.localidad_pertenece=function(){var TargetResource=$injector.get("CatalogoLocalidades"),action=TargetResource["::get::CursosOficiales::localidad_pertenece"];return action.apply(R,arguments)},R.alumnos_inscritos=function(){var TargetResource=$injector.get("Capacitandos"),action=TargetResource["::get::CursosOficiales::alumnos_inscritos"];return action.apply(R,arguments)},R.alumnos_inscritos.count=function(){var TargetResource=$injector.get("Capacitandos"),action=TargetResource["::count::CursosOficiales::alumnos_inscritos"];return action.apply(R,arguments)},R.alumnos_inscritos.create=function(){var TargetResource=$injector.get("Capacitandos"),action=TargetResource["::create::CursosOficiales::alumnos_inscritos"];return action.apply(R,arguments)},R.alumnos_inscritos.createMany=function(){var TargetResource=$injector.get("Capacitandos"),action=TargetResource["::createMany::CursosOficiales::alumnos_inscritos"];return action.apply(R,arguments)},R.alumnos_inscritos.destroyAll=function(){var TargetResource=$injector.get("Capacitandos"),action=TargetResource["::delete::CursosOficiales::alumnos_inscritos"];return action.apply(R,arguments)},R.alumnos_inscritos.destroyById=function(){var TargetResource=$injector.get("Capacitandos"),action=TargetResource["::destroyById::CursosOficiales::alumnos_inscritos"];return action.apply(R,arguments)},R.alumnos_inscritos.exists=function(){var TargetResource=$injector.get("Capacitandos"),action=TargetResource["::exists::CursosOficiales::alumnos_inscritos"];return action.apply(R,arguments)},R.alumnos_inscritos.findById=function(){var TargetResource=$injector.get("Capacitandos"),action=TargetResource["::findById::CursosOficiales::alumnos_inscritos"];return action.apply(R,arguments)},R.alumnos_inscritos.link=function(){var TargetResource=$injector.get("Capacitandos"),action=TargetResource["::link::CursosOficiales::alumnos_inscritos"];return action.apply(R,arguments)},R.alumnos_inscritos.unlink=function(){var TargetResource=$injector.get("Capacitandos"),action=TargetResource["::unlink::CursosOficiales::alumnos_inscritos"];return action.apply(R,arguments)},R.alumnos_inscritos.updateById=function(){var TargetResource=$injector.get("Capacitandos"),action=TargetResource["::updateById::CursosOficiales::alumnos_inscritos"];return action.apply(R,arguments)},R.inscripcionesCursos=function(){var TargetResource=$injector.get("InscripcionCurso"),action=TargetResource["::get::CursosOficiales::inscripcionesCursos"];return action.apply(R,arguments)},R.inscripcionesCursos.count=function(){var TargetResource=$injector.get("InscripcionCurso"),action=TargetResource["::count::CursosOficiales::inscripcionesCursos"];return action.apply(R,arguments)},R.inscripcionesCursos.create=function(){var TargetResource=$injector.get("InscripcionCurso"),action=TargetResource["::create::CursosOficiales::inscripcionesCursos"];return action.apply(R,arguments)},R.inscripcionesCursos.createMany=function(){var TargetResource=$injector.get("InscripcionCurso"),action=TargetResource["::createMany::CursosOficiales::inscripcionesCursos"];return action.apply(R,arguments)},R.inscripcionesCursos.destroyAll=function(){var TargetResource=$injector.get("InscripcionCurso"),action=TargetResource["::delete::CursosOficiales::inscripcionesCursos"];return action.apply(R,arguments)},R.inscripcionesCursos.destroyById=function(){var TargetResource=$injector.get("InscripcionCurso"),action=TargetResource["::destroyById::CursosOficiales::inscripcionesCursos"];return action.apply(R,arguments)},R.inscripcionesCursos.findById=function(){var TargetResource=$injector.get("InscripcionCurso"),action=TargetResource["::findById::CursosOficiales::inscripcionesCursos"];return action.apply(R,arguments)},R.inscripcionesCursos.updateById=function(){var TargetResource=$injector.get("InscripcionCurso"),action=TargetResource["::updateById::CursosOficiales::inscripcionesCursos"];return action.apply(R,arguments)},R}]),module.factory("Capacitandos",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/Capacitandos/:id",{id:"@id"},{prototype$__get__unidad_pertenece:{url:urlBase+"/Capacitandos/:id/unidad_pertenece",method:"GET"},prototype$__get__localidad_pertenece:{url:urlBase+"/Capacitandos/:id/localidad_pertenece",method:"GET"},prototype$__findById__cursos_inscritos:{params:{fk:"@fk"},url:urlBase+"/Capacitandos/:id/cursos_inscritos/:fk",method:"GET"},prototype$__destroyById__cursos_inscritos:{params:{fk:"@fk"},url:urlBase+"/Capacitandos/:id/cursos_inscritos/:fk",method:"DELETE"},prototype$__updateById__cursos_inscritos:{params:{fk:"@fk"},url:urlBase+"/Capacitandos/:id/cursos_inscritos/:fk",method:"PUT"},prototype$__link__cursos_inscritos:{params:{fk:"@fk"},url:urlBase+"/Capacitandos/:id/cursos_inscritos/rel/:fk",method:"PUT"},prototype$__unlink__cursos_inscritos:{params:{fk:"@fk"},url:urlBase+"/Capacitandos/:id/cursos_inscritos/rel/:fk",method:"DELETE"},prototype$__exists__cursos_inscritos:{params:{fk:"@fk"},url:urlBase+"/Capacitandos/:id/cursos_inscritos/rel/:fk",method:"HEAD"},prototype$__findById__inscripcionesCursos:{params:{fk:"@fk"},url:urlBase+"/Capacitandos/:id/inscripcionesCursos/:fk",method:"GET"},prototype$__destroyById__inscripcionesCursos:{params:{fk:"@fk"},url:urlBase+"/Capacitandos/:id/inscripcionesCursos/:fk",method:"DELETE"},prototype$__updateById__inscripcionesCursos:{params:{fk:"@fk"},url:urlBase+"/Capacitandos/:id/inscripcionesCursos/:fk",method:"PUT"},prototype$__get__actividades_desempena:{url:urlBase+"/Capacitandos/:id/actividades_desempena",method:"GET"},prototype$__get__experiencia_laboral:{url:urlBase+"/Capacitandos/:id/experiencia_laboral",method:"GET"},prototype$__get__motivos_capacitarse:{url:urlBase+"/Capacitandos/:id/motivos_capacitarse",method:"GET"},prototype$__get__medio_comunicacion:{url:urlBase+"/Capacitandos/:id/medio_comunicacion",method:"GET"},prototype$__get__nivel_estudios:{url:urlBase+"/Capacitandos/:id/nivel_estudios",method:"GET"},prototype$__get__cursos_inscritos:{isArray:!0,url:urlBase+"/Capacitandos/:id/cursos_inscritos",method:"GET"},prototype$__create__cursos_inscritos:{url:urlBase+"/Capacitandos/:id/cursos_inscritos",method:"POST"},prototype$__delete__cursos_inscritos:{url:urlBase+"/Capacitandos/:id/cursos_inscritos",method:"DELETE"},prototype$__count__cursos_inscritos:{url:urlBase+"/Capacitandos/:id/cursos_inscritos/count",method:"GET"},prototype$__get__inscripcionesCursos:{isArray:!0,url:urlBase+"/Capacitandos/:id/inscripcionesCursos",method:"GET"},prototype$__create__inscripcionesCursos:{url:urlBase+"/Capacitandos/:id/inscripcionesCursos",method:"POST"},prototype$__delete__inscripcionesCursos:{url:urlBase+"/Capacitandos/:id/inscripcionesCursos",method:"DELETE"},prototype$__count__inscripcionesCursos:{url:urlBase+"/Capacitandos/:id/inscripcionesCursos/count",method:"GET"},create:{url:urlBase+"/Capacitandos",method:"POST"},createMany:{isArray:!0,url:urlBase+"/Capacitandos",method:"POST"},upsert:{url:urlBase+"/Capacitandos",method:"PATCH"},replaceOrCreate:{url:urlBase+"/Capacitandos/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/Capacitandos/:id/exists",method:"GET"},findById:{url:urlBase+"/Capacitandos/:id",method:"GET"},replaceById:{url:urlBase+"/Capacitandos/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/Capacitandos",method:"GET"},findOne:{url:urlBase+"/Capacitandos/findOne",method:"GET"},updateAll:{url:urlBase+"/Capacitandos/update",method:"POST"},deleteById:{url:urlBase+"/Capacitandos/:id",method:"DELETE"},count:{url:urlBase+"/Capacitandos/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/Capacitandos/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/Capacitandos/change-stream",method:"POST"},"::findById::CursosOficiales::alumnos_inscritos":{params:{fk:"@fk"},url:urlBase+"/CursosOficiales/:id/alumnos_inscritos/:fk",method:"GET"},"::destroyById::CursosOficiales::alumnos_inscritos":{params:{fk:"@fk"},url:urlBase+"/CursosOficiales/:id/alumnos_inscritos/:fk",method:"DELETE"},"::updateById::CursosOficiales::alumnos_inscritos":{params:{fk:"@fk"},url:urlBase+"/CursosOficiales/:id/alumnos_inscritos/:fk",method:"PUT"},"::link::CursosOficiales::alumnos_inscritos":{params:{fk:"@fk"},url:urlBase+"/CursosOficiales/:id/alumnos_inscritos/rel/:fk",method:"PUT"},"::unlink::CursosOficiales::alumnos_inscritos":{params:{fk:"@fk"},url:urlBase+"/CursosOficiales/:id/alumnos_inscritos/rel/:fk",method:"DELETE"},"::exists::CursosOficiales::alumnos_inscritos":{params:{fk:"@fk"},url:urlBase+"/CursosOficiales/:id/alumnos_inscritos/rel/:fk",method:"HEAD"},"::get::CursosOficiales::alumnos_inscritos":{isArray:!0,url:urlBase+"/CursosOficiales/:id/alumnos_inscritos",method:"GET"},"::create::CursosOficiales::alumnos_inscritos":{url:urlBase+"/CursosOficiales/:id/alumnos_inscritos",method:"POST"},"::createMany::CursosOficiales::alumnos_inscritos":{isArray:!0,url:urlBase+"/CursosOficiales/:id/alumnos_inscritos",method:"POST"},"::delete::CursosOficiales::alumnos_inscritos":{url:urlBase+"/CursosOficiales/:id/alumnos_inscritos",method:"DELETE"},"::count::CursosOficiales::alumnos_inscritos":{url:urlBase+"/CursosOficiales/:id/alumnos_inscritos/count",method:"GET"},"::get::InscripcionCurso::Capacitandos":{url:urlBase+"/InscripcionCursos/:id/Capacitandos",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="Capacitandos",R.unidad_pertenece=function(){var TargetResource=$injector.get("CatalogoUnidadesAdmtvas"),action=TargetResource["::get::Capacitandos::unidad_pertenece"];return action.apply(R,arguments)},R.localidad_pertenece=function(){var TargetResource=$injector.get("CatalogoLocalidades"),action=TargetResource["::get::Capacitandos::localidad_pertenece"];return action.apply(R,arguments)},R.cursos_inscritos=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::get::Capacitandos::cursos_inscritos"];return action.apply(R,arguments)},R.cursos_inscritos.count=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::count::Capacitandos::cursos_inscritos"];return action.apply(R,arguments)},R.cursos_inscritos.create=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::create::Capacitandos::cursos_inscritos"];return action.apply(R,arguments)},R.cursos_inscritos.createMany=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::createMany::Capacitandos::cursos_inscritos"];return action.apply(R,arguments)},R.cursos_inscritos.destroyAll=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::delete::Capacitandos::cursos_inscritos"];return action.apply(R,arguments)},R.cursos_inscritos.destroyById=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::destroyById::Capacitandos::cursos_inscritos"];return action.apply(R,arguments)},R.cursos_inscritos.exists=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::exists::Capacitandos::cursos_inscritos"];return action.apply(R,arguments)},R.cursos_inscritos.findById=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::findById::Capacitandos::cursos_inscritos"];return action.apply(R,arguments)},R.cursos_inscritos.link=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::link::Capacitandos::cursos_inscritos"];return action.apply(R,arguments)},R.cursos_inscritos.unlink=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::unlink::Capacitandos::cursos_inscritos"];return action.apply(R,arguments)},R.cursos_inscritos.updateById=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::updateById::Capacitandos::cursos_inscritos"];return action.apply(R,arguments)},R.inscripcionesCursos=function(){var TargetResource=$injector.get("InscripcionCurso"),action=TargetResource["::get::Capacitandos::inscripcionesCursos"];return action.apply(R,arguments)},R.inscripcionesCursos.count=function(){var TargetResource=$injector.get("InscripcionCurso"),action=TargetResource["::count::Capacitandos::inscripcionesCursos"];return action.apply(R,arguments)},R.inscripcionesCursos.create=function(){var TargetResource=$injector.get("InscripcionCurso"),action=TargetResource["::create::Capacitandos::inscripcionesCursos"];return action.apply(R,arguments)},R.inscripcionesCursos.createMany=function(){var TargetResource=$injector.get("InscripcionCurso"),action=TargetResource["::createMany::Capacitandos::inscripcionesCursos"];return action.apply(R,arguments)},R.inscripcionesCursos.destroyAll=function(){var TargetResource=$injector.get("InscripcionCurso"),action=TargetResource["::delete::Capacitandos::inscripcionesCursos"];return action.apply(R,arguments)},R.inscripcionesCursos.destroyById=function(){var TargetResource=$injector.get("InscripcionCurso"),action=TargetResource["::destroyById::Capacitandos::inscripcionesCursos"];return action.apply(R,arguments)},R.inscripcionesCursos.findById=function(){var TargetResource=$injector.get("InscripcionCurso"),action=TargetResource["::findById::Capacitandos::inscripcionesCursos"];return action.apply(R,arguments)},R.inscripcionesCursos.updateById=function(){var TargetResource=$injector.get("InscripcionCurso"),action=TargetResource["::updateById::Capacitandos::inscripcionesCursos"];return action.apply(R,arguments)},R.actividades_desempena=function(){var TargetResource=$injector.get("CatalogoActividades"),action=TargetResource["::get::Capacitandos::actividades_desempena"];return action.apply(R,arguments)},R.experiencia_laboral=function(){var TargetResource=$injector.get("CatalogoExperiencias"),action=TargetResource["::get::Capacitandos::experiencia_laboral"];return action.apply(R,arguments)},R.motivos_capacitarse=function(){var TargetResource=$injector.get("CatalogoMotivos"),action=TargetResource["::get::Capacitandos::motivos_capacitarse"];return action.apply(R,arguments)},R.medio_comunicacion=function(){var TargetResource=$injector.get("CatalogoMedios"),action=TargetResource["::get::Capacitandos::medio_comunicacion"];return action.apply(R,arguments)},R.nivel_estudios=function(){var TargetResource=$injector.get("CatalogoNivelEstudios"),action=TargetResource["::get::Capacitandos::nivel_estudios"];return action.apply(R,arguments)},R}]),module.factory("InscripcionCurso",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/InscripcionCursos/:id",{id:"@id"},{prototype$__get__Capacitandos:{url:urlBase+"/InscripcionCursos/:id/Capacitandos",method:"GET"},prototype$__get__CursosOficiales:{url:urlBase+"/InscripcionCursos/:id/CursosOficiales",method:"GET"},create:{url:urlBase+"/InscripcionCursos",method:"POST"},createMany:{isArray:!0,url:urlBase+"/InscripcionCursos",method:"POST"},upsert:{url:urlBase+"/InscripcionCursos",method:"PATCH"},replaceOrCreate:{url:urlBase+"/InscripcionCursos/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/InscripcionCursos/:id/exists",method:"GET"},findById:{url:urlBase+"/InscripcionCursos/:id",method:"GET"},replaceById:{url:urlBase+"/InscripcionCursos/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/InscripcionCursos",method:"GET"},findOne:{url:urlBase+"/InscripcionCursos/findOne",method:"GET"},updateAll:{url:urlBase+"/InscripcionCursos/update",method:"POST"},deleteById:{url:urlBase+"/InscripcionCursos/:id",method:"DELETE"},count:{url:urlBase+"/InscripcionCursos/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/InscripcionCursos/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/InscripcionCursos/change-stream",method:"POST"},"::findById::CursosOficiales::inscripcionesCursos":{params:{fk:"@fk"},url:urlBase+"/CursosOficiales/:id/inscripcionesCursos/:fk",method:"GET"},"::destroyById::CursosOficiales::inscripcionesCursos":{params:{fk:"@fk"},url:urlBase+"/CursosOficiales/:id/inscripcionesCursos/:fk",method:"DELETE"},"::updateById::CursosOficiales::inscripcionesCursos":{params:{fk:"@fk"},url:urlBase+"/CursosOficiales/:id/inscripcionesCursos/:fk",method:"PUT"},"::get::CursosOficiales::inscripcionesCursos":{isArray:!0,url:urlBase+"/CursosOficiales/:id/inscripcionesCursos",method:"GET"},"::create::CursosOficiales::inscripcionesCursos":{url:urlBase+"/CursosOficiales/:id/inscripcionesCursos",method:"POST"},"::createMany::CursosOficiales::inscripcionesCursos":{isArray:!0,url:urlBase+"/CursosOficiales/:id/inscripcionesCursos",method:"POST"},"::delete::CursosOficiales::inscripcionesCursos":{url:urlBase+"/CursosOficiales/:id/inscripcionesCursos",method:"DELETE"},"::count::CursosOficiales::inscripcionesCursos":{url:urlBase+"/CursosOficiales/:id/inscripcionesCursos/count",method:"GET"},"::findById::Capacitandos::inscripcionesCursos":{params:{fk:"@fk"},url:urlBase+"/Capacitandos/:id/inscripcionesCursos/:fk",method:"GET"},"::destroyById::Capacitandos::inscripcionesCursos":{params:{fk:"@fk"},url:urlBase+"/Capacitandos/:id/inscripcionesCursos/:fk",method:"DELETE"},"::updateById::Capacitandos::inscripcionesCursos":{params:{fk:"@fk"},url:urlBase+"/Capacitandos/:id/inscripcionesCursos/:fk",method:"PUT"},"::get::Capacitandos::inscripcionesCursos":{isArray:!0,url:urlBase+"/Capacitandos/:id/inscripcionesCursos",method:"GET"},"::create::Capacitandos::inscripcionesCursos":{url:urlBase+"/Capacitandos/:id/inscripcionesCursos",method:"POST"},"::createMany::Capacitandos::inscripcionesCursos":{isArray:!0,url:urlBase+"/Capacitandos/:id/inscripcionesCursos",method:"POST"},"::delete::Capacitandos::inscripcionesCursos":{url:urlBase+"/Capacitandos/:id/inscripcionesCursos",method:"DELETE"},"::count::Capacitandos::inscripcionesCursos":{url:urlBase+"/Capacitandos/:id/inscripcionesCursos/count",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="InscripcionCurso",R.Capacitandos=function(){var TargetResource=$injector.get("Capacitandos"),action=TargetResource["::get::InscripcionCurso::Capacitandos"];return action.apply(R,arguments)},R.CursosOficiales=function(){var TargetResource=$injector.get("CursosOficiales"),action=TargetResource["::get::InscripcionCurso::CursosOficiales"];return action.apply(R,arguments)},R}]),module.factory("CatalogoActividades",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/CatalogoActividades/:id",{id:"@id"},{create:{url:urlBase+"/CatalogoActividades",method:"POST"},createMany:{isArray:!0,url:urlBase+"/CatalogoActividades",method:"POST"},upsert:{url:urlBase+"/CatalogoActividades",method:"PATCH"},replaceOrCreate:{url:urlBase+"/CatalogoActividades/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/CatalogoActividades/:id/exists",method:"GET"},findById:{url:urlBase+"/CatalogoActividades/:id",method:"GET"},replaceById:{url:urlBase+"/CatalogoActividades/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/CatalogoActividades",method:"GET"},findOne:{url:urlBase+"/CatalogoActividades/findOne",method:"GET"},updateAll:{url:urlBase+"/CatalogoActividades/update",method:"POST"},deleteById:{url:urlBase+"/CatalogoActividades/:id",method:"DELETE"},count:{url:urlBase+"/CatalogoActividades/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/CatalogoActividades/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/CatalogoActividades/change-stream",method:"POST"},"::get::Capacitandos::actividades_desempena":{url:urlBase+"/Capacitandos/:id/actividades_desempena",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="CatalogoActividades",R}]),module.factory("CatalogoExperiencias",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/CatalogoExperiencias/:id",{id:"@id"},{create:{url:urlBase+"/CatalogoExperiencias",method:"POST"},createMany:{isArray:!0,url:urlBase+"/CatalogoExperiencias",method:"POST"},upsert:{url:urlBase+"/CatalogoExperiencias",method:"PATCH"},replaceOrCreate:{url:urlBase+"/CatalogoExperiencias/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/CatalogoExperiencias/:id/exists",method:"GET"},findById:{url:urlBase+"/CatalogoExperiencias/:id",method:"GET"},replaceById:{url:urlBase+"/CatalogoExperiencias/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/CatalogoExperiencias",method:"GET"},findOne:{url:urlBase+"/CatalogoExperiencias/findOne",method:"GET"},updateAll:{url:urlBase+"/CatalogoExperiencias/update",method:"POST"},deleteById:{url:urlBase+"/CatalogoExperiencias/:id",method:"DELETE"},count:{url:urlBase+"/CatalogoExperiencias/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/CatalogoExperiencias/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/CatalogoExperiencias/change-stream",method:"POST"},"::get::Capacitandos::experiencia_laboral":{url:urlBase+"/Capacitandos/:id/experiencia_laboral",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="CatalogoExperiencias",R}]),module.factory("CatalogoMotivos",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/CatalogoMotivos/:id",{id:"@id"},{create:{url:urlBase+"/CatalogoMotivos",method:"POST"},createMany:{isArray:!0,url:urlBase+"/CatalogoMotivos",method:"POST"},upsert:{url:urlBase+"/CatalogoMotivos",method:"PATCH"},replaceOrCreate:{url:urlBase+"/CatalogoMotivos/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/CatalogoMotivos/:id/exists",method:"GET"},findById:{url:urlBase+"/CatalogoMotivos/:id",method:"GET"},replaceById:{url:urlBase+"/CatalogoMotivos/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/CatalogoMotivos",method:"GET"},findOne:{url:urlBase+"/CatalogoMotivos/findOne",method:"GET"},updateAll:{url:urlBase+"/CatalogoMotivos/update",method:"POST"},deleteById:{url:urlBase+"/CatalogoMotivos/:id",method:"DELETE"},count:{url:urlBase+"/CatalogoMotivos/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/CatalogoMotivos/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/CatalogoMotivos/change-stream",method:"POST"},"::get::Capacitandos::motivos_capacitarse":{url:urlBase+"/Capacitandos/:id/motivos_capacitarse",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="CatalogoMotivos",R}]),module.factory("CatalogoMedios",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/CatalogoMedios/:id",{id:"@id"},{create:{url:urlBase+"/CatalogoMedios",method:"POST"},createMany:{isArray:!0,url:urlBase+"/CatalogoMedios",method:"POST"},upsert:{url:urlBase+"/CatalogoMedios",method:"PATCH"},replaceOrCreate:{url:urlBase+"/CatalogoMedios/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/CatalogoMedios/:id/exists",method:"GET"},findById:{url:urlBase+"/CatalogoMedios/:id",method:"GET"},replaceById:{url:urlBase+"/CatalogoMedios/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/CatalogoMedios",method:"GET"},findOne:{url:urlBase+"/CatalogoMedios/findOne",method:"GET"},updateAll:{url:urlBase+"/CatalogoMedios/update",method:"POST"},deleteById:{url:urlBase+"/CatalogoMedios/:id",method:"DELETE"},count:{url:urlBase+"/CatalogoMedios/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/CatalogoMedios/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/CatalogoMedios/change-stream",method:"POST"},"::get::Capacitandos::medio_comunicacion":{url:urlBase+"/Capacitandos/:id/medio_comunicacion",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="CatalogoMedios",R}]),module.factory("CatalogoNivelEstudios",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/CatalogoNivelEstudios/:id",{id:"@id"},{create:{url:urlBase+"/CatalogoNivelEstudios",method:"POST"},createMany:{isArray:!0,url:urlBase+"/CatalogoNivelEstudios",method:"POST"},upsert:{url:urlBase+"/CatalogoNivelEstudios",method:"PATCH"},replaceOrCreate:{url:urlBase+"/CatalogoNivelEstudios/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/CatalogoNivelEstudios/:id/exists",method:"GET"},findById:{url:urlBase+"/CatalogoNivelEstudios/:id",method:"GET"},replaceById:{url:urlBase+"/CatalogoNivelEstudios/:id/replace",method:"POST"},find:{isArray:!0,
url:urlBase+"/CatalogoNivelEstudios",method:"GET"},findOne:{url:urlBase+"/CatalogoNivelEstudios/findOne",method:"GET"},updateAll:{url:urlBase+"/CatalogoNivelEstudios/update",method:"POST"},deleteById:{url:urlBase+"/CatalogoNivelEstudios/:id",method:"DELETE"},count:{url:urlBase+"/CatalogoNivelEstudios/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/CatalogoNivelEstudios/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/CatalogoNivelEstudios/change-stream",method:"POST"},"::get::Capacitandos::nivel_estudios":{url:urlBase+"/Capacitandos/:id/nivel_estudios",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="CatalogoNivelEstudios",R}]),module.factory("HorasAsignadasUnidad",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/HorasAsignadasUnidads/:id",{id:"@id"},{create:{url:urlBase+"/HorasAsignadasUnidads",method:"POST"},createMany:{isArray:!0,url:urlBase+"/HorasAsignadasUnidads",method:"POST"},upsert:{url:urlBase+"/HorasAsignadasUnidads",method:"PATCH"},replaceOrCreate:{url:urlBase+"/HorasAsignadasUnidads/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/HorasAsignadasUnidads/:id/exists",method:"GET"},findById:{url:urlBase+"/HorasAsignadasUnidads/:id",method:"GET"},replaceById:{url:urlBase+"/HorasAsignadasUnidads/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/HorasAsignadasUnidads",method:"GET"},findOne:{url:urlBase+"/HorasAsignadasUnidads/findOne",method:"GET"},updateAll:{url:urlBase+"/HorasAsignadasUnidads/update",method:"POST"},deleteById:{url:urlBase+"/HorasAsignadasUnidads/:id",method:"DELETE"},count:{url:urlBase+"/HorasAsignadasUnidads/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/HorasAsignadasUnidads/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/HorasAsignadasUnidads/change-stream",method:"POST"},"::findById::CatalogoUnidadesAdmtvas::horas_asignadas":{params:{fk:"@fk"},url:urlBase+"/CatalogoUnidadesAdmtvas/:id/horas_asignadas/:fk",method:"GET"},"::destroyById::CatalogoUnidadesAdmtvas::horas_asignadas":{params:{fk:"@fk"},url:urlBase+"/CatalogoUnidadesAdmtvas/:id/horas_asignadas/:fk",method:"DELETE"},"::updateById::CatalogoUnidadesAdmtvas::horas_asignadas":{params:{fk:"@fk"},url:urlBase+"/CatalogoUnidadesAdmtvas/:id/horas_asignadas/:fk",method:"PUT"},"::get::CatalogoUnidadesAdmtvas::horas_asignadas":{isArray:!0,url:urlBase+"/CatalogoUnidadesAdmtvas/:id/horas_asignadas",method:"GET"},"::create::CatalogoUnidadesAdmtvas::horas_asignadas":{url:urlBase+"/CatalogoUnidadesAdmtvas/:id/horas_asignadas",method:"POST"},"::createMany::CatalogoUnidadesAdmtvas::horas_asignadas":{isArray:!0,url:urlBase+"/CatalogoUnidadesAdmtvas/:id/horas_asignadas",method:"POST"},"::delete::CatalogoUnidadesAdmtvas::horas_asignadas":{url:urlBase+"/CatalogoUnidadesAdmtvas/:id/horas_asignadas",method:"DELETE"},"::count::CatalogoUnidadesAdmtvas::horas_asignadas":{url:urlBase+"/CatalogoUnidadesAdmtvas/:id/horas_asignadas/count",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="HorasAsignadasUnidad",R}]),module.factory("VistaControlProcesos",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/VistaControlProcesos/:id",{id:"@id"},{create:{url:urlBase+"/VistaControlProcesos",method:"POST"},createMany:{isArray:!0,url:urlBase+"/VistaControlProcesos",method:"POST"},upsert:{url:urlBase+"/VistaControlProcesos",method:"PATCH"},replaceOrCreate:{url:urlBase+"/VistaControlProcesos/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/VistaControlProcesos/:id/exists",method:"GET"},findById:{url:urlBase+"/VistaControlProcesos/:id",method:"GET"},replaceById:{url:urlBase+"/VistaControlProcesos/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/VistaControlProcesos",method:"GET"},findOne:{url:urlBase+"/VistaControlProcesos/findOne",method:"GET"},updateAll:{url:urlBase+"/VistaControlProcesos/update",method:"POST"},deleteById:{url:urlBase+"/VistaControlProcesos/:id",method:"DELETE"},count:{url:urlBase+"/VistaControlProcesos/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/VistaControlProcesos/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/VistaControlProcesos/change-stream",method:"POST"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="VistaControlProcesos",R}]),module.factory("DestinatariosAvisos",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/DestinatariosAvisos/:id",{id:"@id"},{prototype$__get__usuario:{url:urlBase+"/DestinatariosAvisos/:id/usuario",method:"GET"},create:{url:urlBase+"/DestinatariosAvisos",method:"POST"},createMany:{isArray:!0,url:urlBase+"/DestinatariosAvisos",method:"POST"},upsert:{url:urlBase+"/DestinatariosAvisos",method:"PATCH"},replaceOrCreate:{url:urlBase+"/DestinatariosAvisos/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/DestinatariosAvisos/:id/exists",method:"GET"},findById:{url:urlBase+"/DestinatariosAvisos/:id",method:"GET"},replaceById:{url:urlBase+"/DestinatariosAvisos/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/DestinatariosAvisos",method:"GET"},findOne:{url:urlBase+"/DestinatariosAvisos/findOne",method:"GET"},updateAll:{url:urlBase+"/DestinatariosAvisos/update",method:"POST"},deleteById:{url:urlBase+"/DestinatariosAvisos/:id",method:"DELETE"},count:{url:urlBase+"/DestinatariosAvisos/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/DestinatariosAvisos/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/DestinatariosAvisos/change-stream",method:"POST"},"::findById::ControlProcesos::registro_destinatarios":{params:{fk:"@fk"},url:urlBase+"/ControlProcesos/:id/registro_destinatarios/:fk",method:"GET"},"::destroyById::ControlProcesos::registro_destinatarios":{params:{fk:"@fk"},url:urlBase+"/ControlProcesos/:id/registro_destinatarios/:fk",method:"DELETE"},"::updateById::ControlProcesos::registro_destinatarios":{params:{fk:"@fk"},url:urlBase+"/ControlProcesos/:id/registro_destinatarios/:fk",method:"PUT"},"::get::ControlProcesos::registro_destinatarios":{isArray:!0,url:urlBase+"/ControlProcesos/:id/registro_destinatarios",method:"GET"},"::create::ControlProcesos::registro_destinatarios":{url:urlBase+"/ControlProcesos/:id/registro_destinatarios",method:"POST"},"::createMany::ControlProcesos::registro_destinatarios":{isArray:!0,url:urlBase+"/ControlProcesos/:id/registro_destinatarios",method:"POST"},"::delete::ControlProcesos::registro_destinatarios":{url:urlBase+"/ControlProcesos/:id/registro_destinatarios",method:"DELETE"},"::count::ControlProcesos::registro_destinatarios":{url:urlBase+"/ControlProcesos/:id/registro_destinatarios/count",method:"GET"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="DestinatariosAvisos",R.usuario=function(){var TargetResource=$injector.get("Usuario"),action=TargetResource["::get::DestinatariosAvisos::usuario"];return action.apply(R,arguments)},R}]),module.factory("AppAlumno",["LoopBackResource","LoopBackAuth","$injector",function(Resource,LoopBackAuth,$injector){var R=Resource(urlBase+"/AppAlumnos/:id",{id:"@id"},{create:{url:urlBase+"/AppAlumnos",method:"POST"},createMany:{isArray:!0,url:urlBase+"/AppAlumnos",method:"POST"},upsert:{url:urlBase+"/AppAlumnos",method:"PATCH"},replaceOrCreate:{url:urlBase+"/AppAlumnos/replaceOrCreate",method:"POST"},exists:{url:urlBase+"/AppAlumnos/:id/exists",method:"GET"},findById:{url:urlBase+"/AppAlumnos/:id",method:"GET"},replaceById:{url:urlBase+"/AppAlumnos/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/AppAlumnos",method:"GET"},findOne:{url:urlBase+"/AppAlumnos/findOne",method:"GET"},updateAll:{url:urlBase+"/AppAlumnos/update",method:"POST"},deleteById:{url:urlBase+"/AppAlumnos/:id",method:"DELETE"},count:{url:urlBase+"/AppAlumnos/count",method:"GET"},prototype$updateAttributes:{url:urlBase+"/AppAlumnos/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/AppAlumnos/change-stream",method:"POST"}});return R.patchOrCreate=R.upsert,R.updateOrCreate=R.upsert,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.patchAttributes=R.prototype$updateAttributes,R.modelName="AppAlumno",R}]),module.factory("LoopBackAuth",function(){function LoopBackAuth(){var self=this;props.forEach(function(name){self[name]=load(name)}),this.currentUserData=null}function save(storage,name,value){try{var key=propsPrefix+name;null==value&&(value=""),storage[key]=value}catch(err){console.log("Cannot access local/session storage:",err)}}function load(name){var key=propsPrefix+name;return localStorage[key]||sessionStorage[key]||null}var props=["accessTokenId","currentUserId","rememberMe"],propsPrefix="$LoopBack$";return LoopBackAuth.prototype.save=function(){var self=this,storage=this.rememberMe?localStorage:sessionStorage;props.forEach(function(name){save(storage,name,self[name])})},LoopBackAuth.prototype.setUser=function(accessTokenId,userId,userData){this.accessTokenId=accessTokenId,this.currentUserId=userId,this.currentUserData=userData},LoopBackAuth.prototype.clearUser=function(){this.accessTokenId=null,this.currentUserId=null,this.currentUserData=null},LoopBackAuth.prototype.clearStorage=function(){props.forEach(function(name){save(sessionStorage,name,null),save(localStorage,name,null)})},new LoopBackAuth}).config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push("LoopBackAuthRequestInterceptor")}]).factory("LoopBackAuthRequestInterceptor",["$q","LoopBackAuth",function($q,LoopBackAuth){return{request:function(config){var host=getHost(config.url);if(host&&host!==urlBaseHost)return config;if(LoopBackAuth.accessTokenId)config.headers[authHeader]=LoopBackAuth.accessTokenId;else if(config.__isGetCurrentUser__){var res={body:{error:{status:401}},status:401,config:config,headers:function(){return undefined}};return $q.reject(res)}return config||$q.when(config)}}}]).provider("LoopBackResource",function(){this.setAuthHeader=function(header){authHeader=header},this.getAuthHeader=function(){return authHeader},this.setUrlBase=function(url){urlBase=url,urlBaseHost=getHost(urlBase)||location.host},this.getUrlBase=function(){return urlBase},this.$get=["$resource",function($resource){var LoopBackResource=function(url,params,actions){var resource=$resource(url,params,actions);return resource.prototype.$save=function(success,error){var result=resource.upsert.call(this,{},this,success,error);return result.$promise||result},resource};return LoopBackResource.getUrlBase=function(){return urlBase},LoopBackResource.getAuthHeader=function(){return authHeader},LoopBackResource}]})}(window,window.angular),function(){"use strict";function tablaDatosService($q){this.obtiene_datos_tabla=function(modelo,obj_config_tabla){var defer=$q.defer(),fin=obj_config_tabla.registrosPorPagina,inicio=0,total_registros=0;return modelo.count({where:obj_config_tabla.condicion}).$promise.then(function(resp){total_registros=resp.count,fin>total_registros&&(fin=total_registros),0==total_registros&&(inicio=-1),obj_config_tabla.filtro_datos.filter.where=obj_config_tabla.condicion,obj_config_tabla.filtro_datos.filter.limit=obj_config_tabla.registrosPorPagina,obj_config_tabla.filtro_datos.filter.skip=obj_config_tabla.paginaActual-1,modelo.find(obj_config_tabla.filtro_datos).$promise.then(function(resultado){defer.resolve({total_registros:total_registros,inicio:inicio,fin:fin,datos:resultado})})}),defer.promise},this.cambia_pagina=function(modelo,obj_config_tabla){var inicio=(obj_config_tabla.paginaActual-1)*obj_config_tabla.registrosPorPagina,fin=inicio+obj_config_tabla.registrosPorPagina;fin>obj_config_tabla.totalElementos&&(fin=obj_config_tabla.totalElementos),obj_config_tabla.filtro_datos.filter.where=obj_config_tabla.condicion,obj_config_tabla.filtro_datos.filter.limit=obj_config_tabla.registrosPorPagina,obj_config_tabla.filtro_datos.filter.skip=inicio;var defer=$q.defer();return modelo.find(obj_config_tabla.filtro_datos).$promise.then(function(resultado){defer.resolve({inicio:inicio,fin:fin,datos:resultado})}),defer.promise}}angular.module("icat_control_escolar").service("tablaDatosService",tablaDatosService),tablaDatosService.$inject=["$q"]}(),function(){"use strict";function loginController($rootScope,$timeout,$state,localStorageService,Usuario){function login(){vm.mostrar_msg_login=!1,Usuario.login({username:vm.user.username,password:vm.user.password}).$promise.then(function(response){Usuario.find({filter:{where:{and:[{idUsuario:response.userId},{activo:!0}]},fields:["idUsuario","nombre","puesto","idUnidadAdmtva","avisoCurso"],include:["unidad_pertenece",{relation:"perfil",scope:{fields:["name","description"]}}]}}).$promise.then(function(resp){0==resp.length?(vm.msg_login_txt="Usuario desactivado",vm.msg_color="warning",vm.mostrar_msg_login=!0,$timeout(function(){vm.mostrar_msg_login=!1,vm.msg_login_txt=""},3e3)):(vm.msg_login_txt="Entrando al sistema...",vm.msg_color="success",vm.mostrar_msg_login=!0,$timeout(function(){var usuario=resp[0];$rootScope.currentUser={id_usuario:usuario.idUsuario,nombre:usuario.nombre,puesto:usuario.puesto,perfil:usuario.perfil[0].name,descripcion_perfil:usuario.perfil[0].description,unidad_pertenece_id:usuario.idUnidadAdmtva,nombre_unidad:usuario.unidad_pertenece.nombre,estatus:200},localStorageService.set("usuario",$rootScope.currentUser),$state.go("index.inicio")},1e3))})}).catch(function(error){401==error.status&&($rootScope.currentUser={estatus:error.status},"login failed as the email has not been verified"==error.data.error.message?(vm.msg_login_txt="El email no ha sido verificado",vm.msg_color="warning"):(vm.msg_login_txt="El nombre de usuario no existe o contraseña incorrecta",vm.msg_color="danger"),vm.mostrar_msg_login=!0,$timeout(function(){vm.mostrar_msg_login=!1,vm.msg_login_txt=""},3e3))})}var vm=this;vm.login=login,vm.user={username:"",password:""},vm.mostrar_msg_login=!1,vm.msg_login_txt="",vm.msg_color="danger"}angular.module("icat_control_escolar").controller("loginController",loginController),loginController.$inject=["$rootScope","$timeout","$state","localStorageService","Usuario"]}(),function(){"use strict";function logoutController($rootScope,localStorageService,Usuario,$state){Usuario.logout().$promise.then(function(){$rootScope.currentUser=null,localStorageService.remove("usuario"),$state.go("login")})}angular.module("icat_control_escolar").controller("logoutController",logoutController),logoutController.$inject=["$rootScope","localStorageService","Usuario","$state"]}(),function(){"use strict";function inicioController($rootScope,$timeout,$state,localStorageService,Usuario){function inicia(){}inicia()}angular.module("icat_control_escolar").controller("inicioController",inicioController),inicioController.$inject=["$rootScope","$timeout","$state","localStorageService","Usuario"]}(),function(){"use strict";function AdminUsuariosPrincipalController($timeout,$modal,tablaDatosService,Usuario){function inicia(){vm.tablaListaUsuarios.filtro_datos={filter:{where:vm.tablaListaUsuarios.condicion,fields:["idUsuario","username","email","nombre","puesto","idUnidadAdmtva","avisosPTC","avisosPreaperturaCursos","avisosInscripcion","avisosCierreCursos","activo"],order:["nombre ASC"],limit:vm.tablaListaUsuarios.registrosPorPagina,skip:vm.tablaListaUsuarios.paginaActual-1,include:["unidad_pertenece",{relation:"perfil",scope:{fields:["name","description"]}}]}},vm.usuarios={},vm.UsuarioSeleccionado={},vm.tablaListaUsuarios.fila_seleccionada=void 0,vm.client=1,tablaDatosService.obtiene_datos_tabla(Usuario,vm.tablaListaUsuarios).then(function(respuesta){vm.tablaListaUsuarios.totalElementos=respuesta.total_registros,vm.tablaListaUsuarios.inicio=respuesta.inicio,vm.tablaListaUsuarios.fin=respuesta.fin,vm.tablaListaUsuarios.totalElementos>0&&(vm.usuarios=respuesta.datos,vm.UsuarioSeleccionado=vm.usuarios[0],vm.client=2,vm.tablaListaUsuarios.fila_seleccionada=0,muestraDatosUsuarioActual(vm.UsuarioSeleccionado))})}function muestraResultadosBusqueda(){vm.usuarios={},vm.UsuarioSeleccionado={},vm.tablaListaUsuarios.fila_seleccionada=void 0,vm.client=1,vm.tablaListaUsuarios.paginaActual=1,vm.tablaListaUsuarios.inicio=0,vm.tablaListaUsuarios.fin=1,vm.tablaListaUsuarios.condicion={and:[{username:{neq:"adminsystem"}},{nombre:{regexp:"/.*"+vm.nombre_buscar+".*/i"}}]},tablaDatosService.obtiene_datos_tabla(Usuario,vm.tablaListaUsuarios).then(function(respuesta){vm.tablaListaUsuarios.totalElementos=respuesta.total_registros,vm.tablaListaUsuarios.inicio=respuesta.inicio,vm.tablaListaUsuarios.fin=respuesta.fin,vm.tablaListaUsuarios.totalElementos>0&&(vm.usuarios=respuesta.datos,vm.UsuarioSeleccionado=vm.usuarios[0],vm.client=2,vm.tablaListaUsuarios.fila_seleccionada=0,muestraDatosUsuarioActual(vm.UsuarioSeleccionado)),vm.mostrarbtnLimpiar=!0})}function limpiaBusqueda(){vm.usuarios={},vm.UsuarioSeleccionado={},vm.tablaListaUsuarios.fila_seleccionada=void 0,vm.client=1,vm.tablaListaUsuarios.paginaActual=1,vm.tablaListaUsuarios.inicio=0,vm.tablaListaUsuarios.fin=1,vm.tablaListaUsuarios.condicion={username:{neq:"adminsystem"}},tablaDatosService.obtiene_datos_tabla(Usuario,vm.tablaListaUsuarios).then(function(respuesta){vm.tablaListaUsuarios.totalElementos=respuesta.total_registros,vm.tablaListaUsuarios.inicio=respuesta.inicio,vm.tablaListaUsuarios.fin=respuesta.fin,vm.tablaListaUsuarios.totalElementos>0&&(vm.usuarios=respuesta.datos,vm.UsuarioSeleccionado=vm.usuarios[0],vm.client=2,vm.tablaListaUsuarios.fila_seleccionada=0,muestraDatosUsuarioActual(vm.UsuarioSeleccionado)),vm.mostrarbtnLimpiar=!1,vm.nombre_buscar=""})}function cambiarPagina(){vm.tablaListaUsuarios.totalElementos>0&&tablaDatosService.cambia_pagina(Usuario,vm.tablaListaUsuarios).then(function(respuesta){vm.tablaListaUsuarios.inicio=respuesta.inicio,vm.tablaListaUsuarios.fin=respuesta.fin,vm.usuarios=respuesta.datos,vm.UsuarioSeleccionado=vm.usuarios[0],vm.client=2,vm.tablaListaUsuarios.fila_seleccionada=0,muestraDatosUsuarioActual(vm.UsuarioSeleccionado)})}function muestraDatosUsuarioActual(seleccion){var index=vm.usuarios.indexOf(seleccion);vm.UsuarioSeleccionado=seleccion,vm.client=2,vm.tablaListaUsuarios.fila_seleccionada=index}function edita_datos_usuario(UsuarioSeleccionado){var modalInstance=$modal.open({templateUrl:"app/components/admin-sistema/usuarios/modal-edita-usuario.html",windowClass:"animated fadeIn",controller:"ModalEditaUsuarioController as vm",size:"lg",resolve:{usuarioEditar:function(){return UsuarioSeleccionado}}});modalInstance.result.then(function(respuesta){vm.UsuarioSeleccionado.nombre=respuesta.nombre,vm.UsuarioSeleccionado.puesto=respuesta.puesto,vm.UsuarioSeleccionado.email=respuesta.email,vm.UsuarioSeleccionado.username=respuesta.username,vm.UsuarioSeleccionado.unidad_pertenece.idUnidadAdmtva=respuesta.idUnidadAdmtva,vm.UsuarioSeleccionado.unidad_pertenece.nombre=respuesta.UnidadAdmtva,vm.UsuarioSeleccionado.avisosPTC=respuesta.avisosPTC,vm.UsuarioSeleccionado.avisosPreaperturaCursos=respuesta.avisosPreaperturaCursos,vm.UsuarioSeleccionado.avisosInscripcion=respuesta.avisosInscripcion,vm.UsuarioSeleccionado.avisosCierreCursos=respuesta.avisosCierreCursos,vm.UsuarioSeleccionado.activo=respuesta.activo,vm.UsuarioSeleccionado.perfil.length>0?(vm.UsuarioSeleccionado.perfil[0].id=respuesta.perfil.id,vm.UsuarioSeleccionado.perfil[0].description=respuesta.perfil.description,vm.UsuarioSeleccionado.perfil[0].name=respuesta.perfil.name):vm.UsuarioSeleccionado.perfil.push({id:respuesta.perfil.id,description:respuesta.perfil.description,name:respuesta.perfil.name})},function(){})}function nuevo_usuario(){var modalInstance=$modal.open({templateUrl:"app/components/admin-sistema/usuarios/modal-edita-usuario.html",windowClass:"animated fadeIn",controller:"ModalNuevoUsuarioController as vm",size:"lg"});modalInstance.result.then(function(){vm.limpiaBusqueda()},function(){})}function elimina_usuario(UsuarioSeleccionado){swal({title:"Confirmar",html:"Se eliminar&aacute; el usuario <strong>"+UsuarioSeleccionado.nombre+"</strong>, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),Usuario.perfil.destroyAll({id:UsuarioSeleccionado.idUsuario}).$promise.then(function(){Usuario.deleteById({id:UsuarioSeleccionado.idUsuario}).$promise.then(function(){vm.limpiaBusqueda(),swal("Usuario eliminado","","success")})})})}var vm=this;vm.muestraDatosUsuarioActual=muestraDatosUsuarioActual,vm.muestraResultadosBusqueda=muestraResultadosBusqueda,vm.limpiaBusqueda=limpiaBusqueda,vm.cambiarPagina=cambiarPagina,vm.edita_datos_usuario=edita_datos_usuario,vm.nuevo_usuario=nuevo_usuario,vm.elimina_usuario=elimina_usuario,vm.tablaListaUsuarios={totalElementos:0,paginaActual:1,registrosPorPagina:10,inicio:0,fin:1,condicion:{username:{neq:"adminsystem"}},filtro_datos:{},fila_seleccionada:0},inicia()}angular.module("icat_control_escolar").controller("AdminUsuariosPrincipalController",AdminUsuariosPrincipalController),AdminUsuariosPrincipalController.$inject=["$timeout","$modal","tablaDatosService","Usuario"]}(),function(){"use strict";function ModalNuevoUsuarioController($scope,$timeout,$modalInstance,Usuario,Role,CatalogoUnidadesAdmtvas){function inicia(){Role.find({filter:{where:{name:{neq:"admin_sistema"}},order:"description ASC"}}).$promise.then(function(resp){vm.listaRoles=resp}),CatalogoUnidadesAdmtvas.find({filter:{order:"nombre ASC"}}).$promise.then(function(resp){vm.listaUnidades=resp})}function guardar(){vm.mostrarSpiner=!0,""==vm.usuarioEditar.password||void 0===vm.usuarioEditar.password?(vm.mostrarSpiner=!1,vm.txt_msg_password="En necesario escribir el password",vm.msg_password=!0,$timeout(function(){vm.msg_password=!1,vm.txt_msg_password=""},3e3)):Usuario.create({nombre:vm.usuarioEditar.nombre,puesto:vm.usuarioEditar.puesto,email:vm.usuarioEditar.email,username:vm.usuarioEditar.username,password:vm.usuarioEditar.password,idUnidadAdmtva:vm.unidadSelecccionada.idUnidadAdmtva,avisosPTC:vm.usuarioEditar.avisosPTC,avisosPreaperturaCursos:vm.usuarioEditar.avisosPreaperturaCursos,avisosInscripcion:vm.usuarioEditar.avisosInscripcion,avisosCierreCursos:vm.usuarioEditar.avisosCierreCursos,activo:vm.usuarioEditar.activo}).$promise.then(function(respuesta){Role.principals.create({id:vm.perfilSeleccionado.id},{principalType:"USER",principalId:respuesta.idUsuario,roleId:vm.perfilSeleccionado.id}).$promise.then(function(){$modalInstance.close()})}).catch(function(error){422==error.status&&(vm.mostrarSpiner=!1,vm.txt_msg_password="El nombre de usuario o el email ya existen",vm.msg_password=!0,$timeout(function(){vm.msg_password=!1,vm.txt_msg_password=""},3e3))})}var vm=this;vm.guardar=guardar,vm.mostrarSpiner=!1,vm.msg_password=!1,vm.txt_msg_password="",vm.usuarioEditar={nombre:"",puesto:"",email:"",username:"",idUnidadAdmtva:0,UnidadAdmtva:"",avisosPTC:!1,avisosPreaperturaCursos:!1,avisosInscripcion:!1,avisosCierreCursos:!1,activo:!0,idPerfil:0,perfil:""},vm.perfilSeleccionado=0,vm.unidadSelecccionada=0,inicia()}angular.module("icat_control_escolar").controller("ModalNuevoUsuarioController",ModalNuevoUsuarioController),ModalNuevoUsuarioController.$inject=["$scope","$timeout","$modalInstance","Usuario","Role","CatalogoUnidadesAdmtvas"]}(),function(){"use strict";function ModalEditaUsuarioController($scope,$timeout,$modalInstance,usuarioEditar,Usuario,Role,CatalogoUnidadesAdmtvas){function inicia(){Role.find({filter:{where:{name:{neq:"admin_sistema"}},order:"description ASC"}}).$promise.then(function(resp){vm.listaRoles=resp;var perfilSeleccionadoIndex=vm.listaRoles.map(function(rol){return rol.id}).indexOf(vm.usuarioEditar.idPerfil);vm.perfilSeleccionado=vm.listaRoles[perfilSeleccionadoIndex]}),CatalogoUnidadesAdmtvas.find({filter:{order:"nombre ASC"}}).$promise.then(function(resp){vm.listaUnidades=resp;var unidadSelecccionadaIndex=vm.listaUnidades.map(function(unidad){return unidad.idUnidadAdmtva}).indexOf(vm.usuarioEditar.idUnidadAdmtva);vm.unidadSelecccionada=vm.listaUnidades[unidadSelecccionadaIndex]})}function guardar(){if(vm.mostrarSpiner=!0,""==vm.usuarioEditar.password||void 0===vm.usuarioEditar.password)var datos={nombre:vm.usuarioEditar.nombre,puesto:vm.usuarioEditar.puesto,email:vm.usuarioEditar.email,username:vm.usuarioEditar.username,idUnidadAdmtva:vm.unidadSelecccionada.idUnidadAdmtva,avisosPTC:vm.usuarioEditar.avisosPTC,avisosPreaperturaCursos:vm.usuarioEditar.avisosPreaperturaCursos,avisosInscripcion:vm.usuarioEditar.avisosInscripcion,avisosCierreCursos:vm.usuarioEditar.avisosCierreCursos,activo:vm.usuarioEditar.activo};else var datos={nombre:vm.usuarioEditar.nombre,puesto:vm.usuarioEditar.puesto,email:vm.usuarioEditar.email,username:vm.usuarioEditar.username,password:vm.usuarioEditar.password,idUnidadAdmtva:vm.unidadSelecccionada.idUnidadAdmtva,avisosPTC:vm.usuarioEditar.avisosPTC,avisosPreaperturaCursos:vm.usuarioEditar.avisosPreaperturaCursos,avisosInscripcion:vm.usuarioEditar.avisosInscripcion,avisosCierreCursos:vm.usuarioEditar.avisosCierreCursos,activo:vm.usuarioEditar.activo};vm.usuarioEditar.perfil=vm.perfilSeleccionado,vm.usuarioEditar.idUnidadAdmtva=vm.unidadSelecccionada.idUnidadAdmtva,vm.usuarioEditar.UnidadAdmtva=vm.unidadSelecccionada.nombre,Usuario.prototype$updateAttributes({id:vm.usuarioEditar.idUsuario},datos).$promise.then(function(respuesta){vm.usuarioEditar.idPerfil!=vm.perfilSeleccionado.id?Usuario.perfil.destroyAll({id:vm.usuarioEditar.idUsuario}).$promise.then(function(){Role.principals.create({id:vm.perfilSeleccionado.id},{principalType:"USER",principalId:vm.usuarioEditar.idUsuario,roleId:vm.perfilSeleccionado.id}).$promise.then(function(){$modalInstance.close(vm.usuarioEditar)})}):$modalInstance.close(vm.usuarioEditar)}).catch(function(error){422==error.status&&(vm.mostrarSpiner=!1,vm.txt_msg_password="El email ya existe",vm.msg_password=!0,$timeout(function(){vm.msg_password=!1,vm.txt_msg_password=""},3e3))})}var vm=this;vm.guardar=guardar,vm.mostrarSpiner=!1,vm.msg_password=!1,vm.txt_msg_password="",vm.usuarioEditar={idUsuario:usuarioEditar.idUsuario,nombre:usuarioEditar.nombre,puesto:usuarioEditar.puesto,email:usuarioEditar.email,username:usuarioEditar.username,idUnidadAdmtva:usuarioEditar.idUnidadAdmtva,UnidadAdmtva:"",avisosPTC:usuarioEditar.avisosPTC,avisosPreaperturaCursos:usuarioEditar.avisosPreaperturaCursos,avisosInscripcion:usuarioEditar.avisosInscripcion,avisosCierreCursos:usuarioEditar.avisosCierreCursos,activo:usuarioEditar.activo,idPerfil:usuarioEditar.perfil.length>0?usuarioEditar.perfil[0].id:0,perfil:""},vm.perfilSeleccionado=0,vm.unidadSelecccionada=0,inicia()}angular.module("icat_control_escolar").controller("ModalEditaUsuarioController",ModalEditaUsuarioController),ModalEditaUsuarioController.$inject=["$scope","$timeout","$modalInstance","usuarioEditar","Usuario","Role","CatalogoUnidadesAdmtvas"]}(),function(){"use strict";function PrincipalCatalogoEspecialidadesController($stateParams,$modal,tablaDatosService,CatalogoEspecialidades){function inicia(){vm.tablaCatalogo.filtro_datos={filter:{where:vm.tablaCatalogo.condicion,order:["nombre ASC"],fields:["idEspecialidad","idTema","clave","nombre"],limit:vm.tablaCatalogo.registrosPorPagina,skip:vm.tablaCatalogo.paginaActual-1,include:[{relation:"tema_pertenece",scope:{fields:["idTema","nombre"]}}]}},vm.descripcion_catalogo="Catálogo de especialidades",vm.CatalogoMostrar=CatalogoEspecialidades,vm.listaRegistros={},tablaDatosService.obtiene_datos_tabla(vm.CatalogoMostrar,vm.tablaCatalogo).then(function(respuesta){vm.tablaCatalogo.totalElementos=respuesta.total_registros,vm.tablaCatalogo.inicio=respuesta.inicio,vm.tablaCatalogo.fin=respuesta.fin,vm.tablaCatalogo.totalElementos>0&&(vm.listaRegistros=respuesta.datos)})}function muestraResultadosBusqueda(){vm.listaRegistros={},vm.tablaCatalogo.paginaActual=1,vm.tablaCatalogo.inicio=0,vm.tablaCatalogo.fin=1,vm.tablaCatalogo.condicion={nombre:{regexp:"/.*"+vm.cadena_buscar+".*/i"}},tablaDatosService.obtiene_datos_tabla(vm.CatalogoMostrar,vm.tablaCatalogo).then(function(respuesta){vm.tablaCatalogo.totalElementos=respuesta.total_registros,vm.tablaCatalogo.inicio=respuesta.inicio,vm.tablaCatalogo.fin=respuesta.fin,vm.tablaCatalogo.totalElementos>0&&(vm.listaRegistros=respuesta.datos),vm.mostrarbtnLimpiar=!0})}function limpiaBusqueda(){vm.listaRegistros={},vm.tablaCatalogo.paginaActual=1,vm.tablaCatalogo.inicio=0,vm.tablaCatalogo.fin=1,vm.tablaCatalogo.condicion={},tablaDatosService.obtiene_datos_tabla(vm.CatalogoMostrar,vm.tablaCatalogo).then(function(respuesta){vm.tablaCatalogo.totalElementos=respuesta.total_registros,vm.tablaCatalogo.inicio=respuesta.inicio,vm.tablaCatalogo.fin=respuesta.fin,vm.tablaCatalogo.totalElementos>0&&(vm.listaRegistros=respuesta.datos),vm.mostrarbtnLimpiar=!1,vm.cadena_buscar=""})}function cambiarPagina(){vm.tablaCatalogo.totalElementos>0&&tablaDatosService.cambia_pagina(vm.CatalogoMostrar,vm.tablaCatalogo).then(function(respuesta){vm.tablaCatalogo.inicio=respuesta.inicio,vm.tablaCatalogo.fin=respuesta.fin,vm.listaRegistros={},vm.listaRegistros=respuesta.datos})}function edita_registro(registroSeleccionado){vm.RegistroSeleccionado=registroSeleccionado,vm.registroEditar={idEspecialidad:registroSeleccionado.idEspecialidad,idTema:registroSeleccionado.idTema,clave:registroSeleccionado.clave,nombre:registroSeleccionado.nombre};var modalInstance=$modal.open({templateUrl:"app/components/catalogos/catalogo-especialidades/modal-edita-especialidad.html",windowClass:"animated fadeIn",controller:"ModalEditaEspecialidadController as vm",resolve:{registroEditar:function(){return vm.registroEditar}}});modalInstance.result.then(function(respuesta){vm.RegistroSeleccionado.idTema=respuesta.idTema,vm.RegistroSeleccionado.clave=respuesta.clave,vm.RegistroSeleccionado.nombre=respuesta.nombre,vm.RegistroSeleccionado.tema_pertenece.idTema=respuesta.idTema,vm.RegistroSeleccionado.tema_pertenece.nombre=respuesta.tema},function(){})}function nuevo_registro(){var modalInstance=$modal.open({templateUrl:"app/components/catalogos/catalogo-especialidades/modal-edita-especialidad.html",windowClass:"animated fadeIn",controller:"ModalNuevaEspecialidadController as vm"});modalInstance.result.then(function(){vm.limpiaBusqueda()},function(){})}function elimina_registro(registroSeleccionado){CatalogoEspecialidades.RegistroCursos.count({id:registroSeleccionado.idEspecialidad}).$promise.then(function(resultado){resultado.count>0?swal("No se puede eliminar el registro seleccionado porque tiene cursos asignados","","error"):swal({title:"Confirmar",html:"Se eliminar&aacute; la especialidad <strong>"+registroSeleccionado.nombre+"</strong>, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),vm.CatalogoMostrar.deleteById({id:registroSeleccionado.idEspecialidad}).$promise.then(function(){vm.limpiaBusqueda(),swal("Registro eliminado","","success")})})})}var vm=this;vm.descripcion_catalogo="",vm.listaRegistros=[],vm.muestraResultadosBusqueda=muestraResultadosBusqueda,vm.limpiaBusqueda=limpiaBusqueda,vm.cambiarPagina=cambiarPagina,vm.edita_registro=edita_registro,vm.nuevo_registro=nuevo_registro,vm.elimina_registro=elimina_registro,vm.tablaCatalogo={totalElementos:0,paginaActual:1,registrosPorPagina:10,inicio:0,fin:1,condicion:{},filtro_datos:{},fila_seleccionada:0},inicia();
}angular.module("icat_control_escolar").controller("PrincipalCatalogoEspecialidadesController",PrincipalCatalogoEspecialidadesController),PrincipalCatalogoEspecialidadesController.$inject=["$stateParams","$modal","tablaDatosService","CatalogoEspecialidades"]}(),function(){"use strict";function ModalEditaEspecialidadController($modalInstance,registroEditar,CatalogoEspecialidades,CatalogoTemas){function inicia(){CatalogoTemas.find({filter:{fields:["idTema","nombre"],order:"nombre ASC"}}).$promise.then(function(resp){vm.listaTemas=resp;var temaSeleccionadoIndex=vm.listaTemas.map(function(rol){return rol.idTema}).indexOf(vm.registroEditar.idTema);vm.temaSeleccionado=vm.listaTemas[temaSeleccionadoIndex]})}function guardar(){var datos={clave:vm.registroEditar.clave,nombre:vm.registroEditar.nombre,idTema:vm.temaSeleccionado.idTema};vm.registroEditar.idTema=vm.temaSeleccionado.idTema,vm.registroEditar.tema=vm.temaSeleccionado.nombre,CatalogoEspecialidades.prototype$updateAttributes({id:vm.registroEditar.idEspecialidad},datos).$promise.then(function(respuesta){$modalInstance.close(vm.registroEditar)})}var vm=this;vm.registroEditar={idEspecialidad:registroEditar.idEspecialidad,idTema:registroEditar.idTema,tema:"",clave:registroEditar.clave,nombre:registroEditar.nombre},vm.temaSeleccionado=0,vm.guardar=guardar,inicia()}angular.module("icat_control_escolar").controller("ModalEditaEspecialidadController",ModalEditaEspecialidadController),ModalEditaEspecialidadController.$inject=["$modalInstance","registroEditar","CatalogoEspecialidades","CatalogoTemas"]}(),function(){"use strict";function ModalNuevaEspecialidadController($modalInstance,CatalogoEspecialidades,CatalogoTemas){function inicia(){CatalogoTemas.find({filter:{fields:["idTema","nombre"],order:"nombre ASC"}}).$promise.then(function(resp){vm.listaTemas=resp})}function guardar(){CatalogoEspecialidades.create({nombre:vm.registroEditar.nombre,clave:vm.registroEditar.clave,idTema:vm.temaSeleccionado.idTema}).$promise.then(function(respuesta){$modalInstance.close()})}var vm=this;vm.registroEditar={idTema:0,tema:"",clave:"",nombre:""},vm.temaSeleccionado=0,vm.guardar=guardar,inicia()}angular.module("icat_control_escolar").controller("ModalNuevaEspecialidadController",ModalNuevaEspecialidadController),ModalNuevaEspecialidadController.$inject=["$modalInstance","CatalogoEspecialidades","CatalogoTemas"]}(),function(){"use strict";function PrincipalCatalogoCursosController($modal,tablaDatosService,CatalogoCursos){function inicia(){vm.tablaListaRegistros.filtro_datos={filter:{where:vm.tablaListaRegistros.condicion,fields:["idCatalogoCurso","claveCurso","descripcion","idEspecialidad","modalidad","nombreCurso","numeroHoras","activo"],order:["nombreCurso ASC"],limit:vm.tablaListaRegistros.registrosPorPagina,skip:vm.tablaListaRegistros.paginaActual-1,include:["temario",{relation:"especialidad",scope:{fields:["idEspecialidad","nombre"]}}]}},vm.registros={},vm.RegistroSeleccionado={},vm.tablaListaRegistros.fila_seleccionada=void 0,vm.client=1,tablaDatosService.obtiene_datos_tabla(CatalogoCursos,vm.tablaListaRegistros).then(function(respuesta){vm.tablaListaRegistros.totalElementos=respuesta.total_registros,vm.tablaListaRegistros.inicio=respuesta.inicio,vm.tablaListaRegistros.fin=respuesta.fin,vm.tablaListaRegistros.totalElementos>0&&(vm.registros=respuesta.datos,vm.RegistroSeleccionado=vm.registros[0],vm.client=2,vm.tablaListaRegistros.fila_seleccionada=0,muestraDatosRegistroActual(vm.RegistroSeleccionado))})}function muestraResultadosBusqueda(){vm.registros={},vm.RegistroSeleccionado={},vm.tablaListaRegistros.fila_seleccionada=void 0,vm.client=1,vm.tablaListaRegistros.paginaActual=1,vm.tablaListaRegistros.inicio=0,vm.tablaListaRegistros.fin=1,vm.tablaListaRegistros.condicion={nombreCurso:{regexp:"/.*"+vm.cadena_buscar+".*/i"}},tablaDatosService.obtiene_datos_tabla(CatalogoCursos,vm.tablaListaRegistros).then(function(respuesta){vm.tablaListaRegistros.totalElementos=respuesta.total_registros,vm.tablaListaRegistros.inicio=respuesta.inicio,vm.tablaListaRegistros.fin=respuesta.fin,vm.tablaListaRegistros.totalElementos>0&&(vm.registros=respuesta.datos,vm.RegistroSeleccionado=vm.registros[0],vm.client=2,vm.tablaListaRegistros.fila_seleccionada=0,muestraDatosRegistroActual(vm.RegistroSeleccionado)),vm.mostrarbtnLimpiar=!0})}function limpiaBusqueda(){vm.registros={},vm.RegistroSeleccionado={},vm.tablaListaRegistros.fila_seleccionada=void 0,vm.client=1,vm.tablaListaRegistros.paginaActual=1,vm.tablaListaRegistros.inicio=0,vm.tablaListaRegistros.fin=1,vm.tablaListaRegistros.condicion={},tablaDatosService.obtiene_datos_tabla(CatalogoCursos,vm.tablaListaRegistros).then(function(respuesta){vm.tablaListaRegistros.totalElementos=respuesta.total_registros,vm.tablaListaRegistros.inicio=respuesta.inicio,vm.tablaListaRegistros.fin=respuesta.fin,vm.tablaListaRegistros.totalElementos>0&&(vm.registros=respuesta.datos,vm.RegistroSeleccionado=vm.registros[0],vm.client=2,vm.tablaListaRegistros.fila_seleccionada=0,muestraDatosRegistroActual(vm.RegistroSeleccionado)),vm.mostrarbtnLimpiar=!1,vm.cadena_buscar=""})}function cambiarPagina(){vm.tablaListaRegistros.totalElementos>0&&tablaDatosService.cambia_pagina(CatalogoCursos,vm.tablaListaRegistros).then(function(respuesta){vm.tablaListaRegistros.inicio=respuesta.inicio,vm.tablaListaRegistros.fin=respuesta.fin,vm.registros=respuesta.datos,vm.RegistroSeleccionado=vm.registros[0],vm.client=2,vm.tablaListaRegistros.fila_seleccionada=0,muestraDatosRegistroActual(vm.RegistroSeleccionado)})}function muestraDatosRegistroActual(seleccion){var index=vm.registros.indexOf(seleccion);vm.RegistroSeleccionado=seleccion,vm.client=2,vm.tablaListaRegistros.fila_seleccionada=index}function edita_datos_registro(seleccion){var modalInstance=$modal.open({templateUrl:"app/components/catalogos/catalogo-cursos/modal-edita-cat-curso.html",windowClass:"animated fadeIn",controller:"ModalEditaCatCursoController as vm",windowClass:"app-modal-window",resolve:{registroEditar:function(){return seleccion}}});modalInstance.result.then(function(respuesta){vm.RegistroSeleccionado.claveCurso=respuesta.claveCurso,vm.RegistroSeleccionado.descripcion=respuesta.descripcion,vm.RegistroSeleccionado.idEspecialidad=respuesta.idEspecialidad,vm.RegistroSeleccionado.modalidad=respuesta.modalidad,vm.RegistroSeleccionado.nombreCurso=respuesta.nombreCurso,vm.RegistroSeleccionado.numeroHoras=respuesta.numeroHoras,vm.RegistroSeleccionado.especialidad.idEspecialidad=respuesta.idEspecialidad,vm.RegistroSeleccionado.especialidad.nombre=respuesta.especialidad,respuesta.temario.length>0&&(vm.RegistroSeleccionado.temario=[],angular.forEach(respuesta.temario,function(record){vm.RegistroSeleccionado.temario.push({idTemario:record.idTemario,idCatalogoCurso:record.idCatalogoCurso,tema:record.tema})}))},function(){})}function nuevo_registro(){var modalInstance=$modal.open({templateUrl:"app/components/catalogos/catalogo-cursos/modal-edita-cat-curso.html",windowClass:"animated fadeIn",controller:"ModalnuevoCatCursoController as vm",windowClass:"app-modal-window"});modalInstance.result.then(function(){vm.limpiaBusqueda()},function(){})}function desactiva_registro(RegistroSeleccionado){swal({title:"Confirmar",html:"El curso <strong>"+RegistroSeleccionado.nombreCurso+"</strong> ser&aacute; desactivado y no aparecer&aacute; en la lista de cursos para el armado del PTC, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),CatalogoCursos.prototype$updateAttributes({id:RegistroSeleccionado.idCatalogoCurso},{activo:!1}).$promise.then(function(respuesta){vm.RegistroSeleccionado.activo=respuesta.activo,swal("Curso desactivado","","success")})})}function activa_registro(RegistroSeleccionado){swal({title:"Confirmar",html:"El curso <strong>"+RegistroSeleccionado.nombreCurso+"</strong> ser&aacute; activado y podr&aacute; ser visualizado en la lista de cursos para el armado del PTC, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),CatalogoCursos.prototype$updateAttributes({id:RegistroSeleccionado.idCatalogoCurso},{activo:!0}).$promise.then(function(respuesta){vm.RegistroSeleccionado.activo=respuesta.activo,swal("Curso activado","","success")})})}function elimina_registro(RegistroSeleccionado){CatalogoCursos.instructores_habilitados.count({id:RegistroSeleccionado.idCatalogoCurso}).$promise.then(function(resultado){resultado.count>0?swal({title:"Error",html:"No se puede eliminar el curso seleccionado porque tiene instructores relacionados",type:"error",showCancelButton:!1,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar"}):CatalogoCursos.cursosPTC_pertenece.count({id:RegistroSeleccionado.idCatalogoCurso}).$promise.then(function(resultado){resultado.count>0?swal({title:"Error",html:"No se puede eliminar el curso seleccionado porque se encuentra registrado en alg&uacute;n PTC",type:"error",showCancelButton:!1,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar"}):swal({title:"Confirmar",html:"Se eliminar&aacute; el curso <strong>"+RegistroSeleccionado.nombreCurso+"</strong>, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),CatalogoCursos.temario.destroyAll({id:RegistroSeleccionado.idCatalogoCurso}).$promise.then(function(){CatalogoCursos.deleteById({id:RegistroSeleccionado.idCatalogoCurso}).$promise.then(function(){vm.limpiaBusqueda(),swal("Curso eliminado","","success")})})})})})}var vm=this;vm.muestraDatosRegistroActual=muestraDatosRegistroActual,vm.muestraResultadosBusqueda=muestraResultadosBusqueda,vm.limpiaBusqueda=limpiaBusqueda,vm.cambiarPagina=cambiarPagina,vm.edita_datos_registro=edita_datos_registro,vm.nuevo_registro=nuevo_registro,vm.desactiva_registro=desactiva_registro,vm.activa_registro=activa_registro,vm.elimina_registro=elimina_registro,vm.tablaListaRegistros={totalElementos:0,paginaActual:1,registrosPorPagina:5,inicio:0,fin:1,condicion:{},filtro_datos:{},fila_seleccionada:0},inicia()}angular.module("icat_control_escolar").controller("PrincipalCatalogoCursosController",PrincipalCatalogoCursosController),PrincipalCatalogoCursosController.$inject=["$modal","tablaDatosService","CatalogoCursos"]}(),function(){"use strict";function ModalEditaCatCursoController($scope,$timeout,$modalInstance,registroEditar,CatalogoCursos,CatalogoEspecialidades){function inicia(){CatalogoEspecialidades.find({filter:{fields:["idEspecialidad","nombre"],order:"nombre ASC"}}).$promise.then(function(resp){vm.listaEspecialidades=resp;var index=vm.listaEspecialidades.map(function(especialidad){return especialidad.idEspecialidad}).indexOf(vm.registroEdicion.idEspecialidad);vm.especialidadSeleccionada=vm.listaEspecialidades[index]})}function agregaTema(){vm.registroEdicion.temario.push({tema:""})}function eliminaRegistro(indice){vm.registroEdicion.temario.splice(indice,1)}function guardar(){vm.mostrarSpiner=!0;var temasVacios=!1;if(angular.forEach(vm.registroEdicion.temario,function(record){""==record.tema&&(temasVacios=!0)}),1==temasVacios)return vm.mostrarSpiner=!1,vm.mostrar_msg_error=!0,void $timeout(function(){vm.mostrar_msg_error=!1},2e3);var datos={claveCurso:vm.registroEdicion.claveCurso,descripcion:vm.registroEdicion.descripcion,idEspecialidad:vm.especialidadSeleccionada.idEspecialidad,modalidad:vm.registroEdicion.modalidad,nombreCurso:vm.registroEdicion.nombreCurso,numeroHoras:vm.registroEdicion.numeroHoras};vm.registroEdicion.idEspecialidad=vm.especialidadSeleccionada.idEspecialidad,vm.registroEdicion.especialidad=vm.especialidadSeleccionada.nombre,CatalogoCursos.prototype$updateAttributes({id:vm.registroEdicion.idCatalogoCurso},datos).$promise.then(function(respuesta){CatalogoCursos.temario.destroyAll({id:vm.registroEdicion.idCatalogoCurso}).$promise.then(function(){if(vm.registroEdicion.temario.length>0){var array_temario_enviar=[];angular.forEach(vm.registroEdicion.temario,function(record){array_temario_enviar.push({idCatalogoCurso:vm.registroEdicion.idCatalogoCurso,tema:record.tema})}),CatalogoCursos.temario.createMany({id:vm.registroEdicion.idCatalogoCurso},array_temario_enviar).$promise.then(function(lista_temas){vm.registroEdicion.temario=lista_temas,$modalInstance.close(vm.registroEdicion)})}else $modalInstance.close(vm.registroEdicion)})}).catch(function(error){})}var vm=this;vm.agregaTema=agregaTema,vm.eliminaRegistro=eliminaRegistro,vm.guardar=guardar,vm.mostrarSpiner=!1,vm.mostrar_msg_error=!1,vm.especialidadSeleccionada=0,vm.listaEspecialidades={},vm.registroEdicion={idCatalogoCurso:registroEditar.idCatalogoCurso,claveCurso:registroEditar.claveCurso,descripcion:registroEditar.descripcion,idEspecialidad:registroEditar.idEspecialidad,especialidad:"",modalidad:registroEditar.modalidad,nombreCurso:registroEditar.nombreCurso,numeroHoras:registroEditar.numeroHoras,temario:[]},angular.forEach(registroEditar.temario,function(record){vm.registroEdicion.temario.push({tema:record.tema})}),inicia()}angular.module("icat_control_escolar").controller("ModalEditaCatCursoController",ModalEditaCatCursoController),ModalEditaCatCursoController.$inject=["$scope","$timeout","$modalInstance","registroEditar","CatalogoCursos","CatalogoEspecialidades"]}(),function(){"use strict";function ModalnuevoCatCursoController($scope,$timeout,$modalInstance,CatalogoCursos,CatalogoEspecialidades){function inicia(){CatalogoEspecialidades.find({filter:{fields:["idEspecialidad","nombre"],order:"nombre ASC"}}).$promise.then(function(resp){vm.listaEspecialidades=resp})}function agregaTema(){vm.registroEdicion.temario.push({tema:""})}function eliminaRegistro(indice){vm.registroEdicion.temario.splice(indice,1)}function guardar(){vm.mostrarSpiner=!0;var temasVacios=!1;if(angular.forEach(vm.registroEdicion.temario,function(record){""==record.tema&&(temasVacios=!0)}),1==temasVacios)return vm.mostrarSpiner=!1,vm.mostrar_msg_error=!0,void $timeout(function(){vm.mostrar_msg_error=!1},2e3);({claveCurso:vm.registroEdicion.claveCurso,descripcion:vm.registroEdicion.descripcion,idEspecialidad:vm.especialidadSeleccionada.idEspecialidad,modalidad:vm.registroEdicion.modalidad,nombreCurso:vm.registroEdicion.nombreCurso,numeroHoras:vm.registroEdicion.numeroHoras});vm.registroEdicion.idEspecialidad=vm.especialidadSeleccionada.idEspecialidad,vm.registroEdicion.especialidad=vm.especialidadSeleccionada.nombre,CatalogoCursos.create({claveCurso:vm.registroEdicion.claveCurso,descripcion:vm.registroEdicion.descripcion,idEspecialidad:vm.especialidadSeleccionada.idEspecialidad,modalidad:vm.registroEdicion.modalidad,nombreCurso:vm.registroEdicion.nombreCurso,numeroHoras:vm.registroEdicion.numeroHoras}).$promise.then(function(respuesta){if(vm.registroEdicion.temario.length>0){var array_temario_enviar=[];angular.forEach(vm.registroEdicion.temario,function(record){array_temario_enviar.push({idCatalogoCurso:respuesta.idCatalogoCurso,tema:record.tema})}),CatalogoCursos.temario.createMany({id:respuesta.idCatalogoCurso},array_temario_enviar).$promise.then(function(lista_temas){$modalInstance.close()})}else $modalInstance.close()}).catch(function(error){})}var vm=this;vm.guardar=guardar,vm.agregaTema=agregaTema,vm.eliminaRegistro=eliminaRegistro,vm.mostrarSpiner=!1,vm.mostrar_msg_error=!1,vm.especialidadSeleccionada=0,vm.listaEspecialidades={},vm.registroEdicion={idCatalogoCurso:"",claveCurso:"",descripcion:"",idEspecialidad:"",especialidad:"",modalidad:"",nombreCurso:"",numeroHoras:"",temario:[]},inicia()}angular.module("icat_control_escolar").controller("ModalnuevoCatCursoController",ModalnuevoCatCursoController),ModalnuevoCatCursoController.$inject=["$scope","$timeout","$modalInstance","CatalogoCursos","CatalogoEspecialidades"]}(),function(){"use strict";function PrincipalCatalogoTemasController($stateParams,$modal,tablaDatosService,CatalogoTemas){function inicia(){vm.tablaCatalogo.filtro_datos={filter:{where:vm.tablaCatalogo.condicion,order:["nombre ASC"],fields:["idTema","nombre"],limit:vm.tablaCatalogo.registrosPorPagina,skip:vm.tablaCatalogo.paginaActual-1}},vm.CatalogoMostrar=CatalogoTemas,vm.listaRegistros={},tablaDatosService.obtiene_datos_tabla(vm.CatalogoMostrar,vm.tablaCatalogo).then(function(respuesta){vm.tablaCatalogo.totalElementos=respuesta.total_registros,vm.tablaCatalogo.inicio=respuesta.inicio,vm.tablaCatalogo.fin=respuesta.fin,vm.tablaCatalogo.totalElementos>0&&(vm.listaRegistros=respuesta.datos)})}function muestraResultadosBusqueda(){vm.listaRegistros={},vm.tablaCatalogo.paginaActual=1,vm.tablaCatalogo.inicio=0,vm.tablaCatalogo.fin=1,vm.tablaCatalogo.condicion={nombre:{regexp:"/.*"+vm.cadena_buscar+".*/i"}},tablaDatosService.obtiene_datos_tabla(vm.CatalogoMostrar,vm.tablaCatalogo).then(function(respuesta){vm.tablaCatalogo.totalElementos=respuesta.total_registros,vm.tablaCatalogo.inicio=respuesta.inicio,vm.tablaCatalogo.fin=respuesta.fin,vm.tablaCatalogo.totalElementos>0&&(vm.listaRegistros=respuesta.datos),vm.mostrarbtnLimpiar=!0})}function limpiaBusqueda(){vm.listaRegistros={},vm.tablaCatalogo.paginaActual=1,vm.tablaCatalogo.inicio=0,vm.tablaCatalogo.fin=1,vm.tablaCatalogo.condicion={},tablaDatosService.obtiene_datos_tabla(vm.CatalogoMostrar,vm.tablaCatalogo).then(function(respuesta){vm.tablaCatalogo.totalElementos=respuesta.total_registros,vm.tablaCatalogo.inicio=respuesta.inicio,vm.tablaCatalogo.fin=respuesta.fin,vm.tablaCatalogo.totalElementos>0&&(vm.listaRegistros=respuesta.datos),vm.mostrarbtnLimpiar=!1,vm.cadena_buscar=""})}function cambiarPagina(){vm.tablaCatalogo.totalElementos>0&&tablaDatosService.cambia_pagina(vm.CatalogoMostrar,vm.tablaCatalogo).then(function(respuesta){vm.tablaCatalogo.inicio=respuesta.inicio,vm.tablaCatalogo.fin=respuesta.fin,vm.listaRegistros={},vm.listaRegistros=respuesta.datos})}function edita_registro(registroSeleccionado){vm.RegistroSeleccionado=registroSeleccionado,vm.registroEditar={idTema:registroSeleccionado.idTema};var modalInstance=$modal.open({templateUrl:"app/components/catalogos/catalogo-temas/modal-edita-tema.html",windowClass:"animated fadeIn",controller:"ModalEditaTemaController as vm",size:"lg",resolve:{registroEditar:function(){return vm.registroEditar}}});modalInstance.result.then(function(respuesta){vm.RegistroSeleccionado.nombre=respuesta.nombre},function(){})}function nuevo_registro(){var modalInstance=$modal.open({templateUrl:"app/components/catalogos/catalogo-temas/modal-edita-tema.html",windowClass:"animated fadeIn",controller:"ModalNuevoTemaController as vm",size:"lg"});modalInstance.result.then(function(){vm.limpiaBusqueda()},function(){})}function elimina_registro(registroSeleccionado){CatalogoTemas.especialidades.count({id:registroSeleccionado.idTema}).$promise.then(function(resultado){resultado.count>0?swal("No se puede eliminar el registro seleccionado porque tiene especialidades asignadas","","error"):swal({title:"Confirmar",html:"Se eliminar&aacute; el tema <strong>"+registroSeleccionado.nombre+"</strong>, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),vm.CatalogoMostrar.deleteById({id:registroSeleccionado.idTema}).$promise.then(function(){vm.limpiaBusqueda(),swal("Registro eliminado","","success")})})})}var vm=this;vm.listaRegistros=[],vm.muestraResultadosBusqueda=muestraResultadosBusqueda,vm.limpiaBusqueda=limpiaBusqueda,vm.cambiarPagina=cambiarPagina,vm.edita_registro=edita_registro,vm.nuevo_registro=nuevo_registro,vm.elimina_registro=elimina_registro,vm.tablaCatalogo={totalElementos:0,paginaActual:1,registrosPorPagina:10,inicio:0,fin:1,condicion:{},filtro_datos:{},fila_seleccionada:0},inicia()}angular.module("icat_control_escolar").controller("PrincipalCatalogoTemasController",PrincipalCatalogoTemasController),PrincipalCatalogoTemasController.$inject=["$stateParams","$modal","tablaDatosService","CatalogoTemas"]}(),function(){"use strict";function ModalEditaTemaController($scope,$modalInstance,registroEditar,CatalogoEspecialidades,CatalogoTemas){function inicia(){CatalogoTemas.findById({id:registroEditar.idTema}).$promise.then(function(resp){vm.registroEdicion=resp,""!==vm.registroEdicion.fotoInicio&&void 0!==vm.registroEdicion.fotoInicio||(vm.registroEdicion.fotoInicio="assets/img/placeholder.png")})}function cargaImagen(e,reader,file,fileList,fileOjects,fileObj){fileObj.filesize/1024<200?vm.registroEdicion.fotoInicio="data:"+fileObj.filetype+";base64,"+fileObj.base64:reader.abort()}function borraFoto(){vm.registroEdicion.fotoInicio="assets/img/placeholder.png",vm.imagenTemp=void 0}function guardar(){"assets/img/placeholder.png"===vm.registroEdicion.fotoInicio&&(vm.registroEdicion.fotoInicio="");var datos={fotoInicio:vm.registroEdicion.fotoInicio,nombre:vm.registroEdicion.nombre};CatalogoTemas.prototype$updateAttributes({id:registroEditar.idTema},datos).$promise.then(function(respuesta){vm.registroEdicion.fotoInicio="",$modalInstance.close(vm.registroEdicion)})}var vm=this;vm.registroEdicion={},vm.imagenTemp,vm.borraFoto=borraFoto,vm.cargaImagen=cargaImagen,vm.guardar=guardar,inicia()}angular.module("icat_control_escolar").controller("ModalEditaTemaController",ModalEditaTemaController),ModalEditaTemaController.$inject=["$scope","$modalInstance","registroEditar","CatalogoEspecialidades","CatalogoTemas"]}(),function(){"use strict";function ModalNuevoTemaController($scope,$modalInstance,CatalogoEspecialidades,CatalogoTemas){function inicia(){}function cargaImagen(e,reader,file,fileList,fileOjects,fileObj){fileObj.filesize/1024<200?vm.registroEdicion.fotoInicio="data:"+fileObj.filetype+";base64,"+fileObj.base64:reader.abort()}function borraFoto(){vm.registroEdicion.fotoInicio="assets/img/placeholder.png",vm.imagenTemp=void 0}function guardar(){"assets/img/placeholder.png"===vm.registroEdicion.fotoInicio&&(vm.registroEdicion.fotoInicio=""),CatalogoTemas.create({fotoInicio:vm.registroEdicion.fotoInicio,nombre:vm.registroEdicion.nombre}).$promise.then(function(respuesta){$modalInstance.close()}).catch(function(error){})}var vm=this;vm.registroEdicion={nombre:"",fotoInicio:"assets/img/placeholder.png"},vm.imagenTemp,vm.borraFoto=borraFoto,vm.cargaImagen=cargaImagen,vm.guardar=guardar,inicia()}angular.module("icat_control_escolar").controller("ModalNuevoTemaController",ModalNuevoTemaController),ModalNuevoTemaController.$inject=["$scope","$modalInstance","CatalogoEspecialidades","CatalogoTemas"]}(),function(){"use strict";function PrincipalHorasUnidadController($modal,tablaDatosService,CatalogoUnidadesAdmtvas,HorasAsignadasUnidad,ProgTrimCursos){function inicia(){vm.tablaListaRegistros.condicion={idUnidadAdmtva:{gt:1}},vm.tablaListaRegistros.filtro_datos={filter:{where:vm.tablaListaRegistros.condicion,order:["nombre ASC"],limit:vm.tablaListaRegistros.registrosPorPagina,skip:vm.tablaListaRegistros.paginaActual-1,include:[{relation:"horas_asignadas",scope:{order:["anio DESC"]}}]}},vm.registros={},vm.RegistroSeleccionado={},vm.tablaListaRegistros.fila_seleccionada=void 0,vm.client=1,tablaDatosService.obtiene_datos_tabla(CatalogoUnidadesAdmtvas,vm.tablaListaRegistros).then(function(respuesta){vm.tablaListaRegistros.totalElementos=respuesta.total_registros,vm.tablaListaRegistros.inicio=respuesta.inicio,vm.tablaListaRegistros.fin=respuesta.fin,vm.tablaListaRegistros.totalElementos>0&&(vm.registros=respuesta.datos,vm.RegistroSeleccionado=vm.registros[0],vm.client=2,vm.tablaListaRegistros.fila_seleccionada=0,muestraDatosRegistroActual(vm.RegistroSeleccionado))})}function cambiarPagina(){vm.tablaListaRegistros.totalElementos>0&&tablaDatosService.cambia_pagina(CatalogoUnidadesAdmtvas,vm.tablaListaRegistros).then(function(respuesta){vm.tablaListaRegistros.inicio=respuesta.inicio,vm.tablaListaRegistros.fin=respuesta.fin,vm.registros=respuesta.datos,vm.RegistroSeleccionado=vm.registros[0],vm.client=2,vm.tablaListaRegistros.fila_seleccionada=0,muestraDatosRegistroActual(vm.RegistroSeleccionado)})}function muestraDatosRegistroActual(seleccion){var index=vm.registros.indexOf(seleccion);vm.RegistroSeleccionado=seleccion,vm.historial=[];for(var i=1;i<vm.RegistroSeleccionado.horas_asignadas.length;i++)vm.historial.push({id:vm.RegistroSeleccionado.horas_asignadas[i].id,idUnidadAdmtva:vm.RegistroSeleccionado.idUnidadAdmtva,anio:vm.RegistroSeleccionado.horas_asignadas[i].anio,horasAsignadas:vm.RegistroSeleccionado.horas_asignadas[i].horasAsignadas,horasSeparadas:vm.RegistroSeleccionado.horas_asignadas[i].horasSeparadas,horasAplicadas:vm.RegistroSeleccionado.horas_asignadas[i].horasAplicadas});vm.client=2,vm.tablaListaRegistros.fila_seleccionada=index}function nuevo_registro(seleccion){var modalInstance=$modal.open({templateUrl:"app/components/ptc/asignacion-horas/modal-captura-num-horas.html",windowClass:"animated fadeIn",controller:"ModalCapturaHorasController as vm",resolve:{registroEditar:function(){return seleccion}}});modalInstance.result.then(function(respuesta){vm.RegistroSeleccionado.horas_asignadas.unshift({id:respuesta.id,idUnidadAdmtva:vm.RegistroSeleccionado.idUnidadAdmtva,anio:respuesta.anio,horasAsignadas:respuesta.horasAsignadas,horasSeparadas:0,horasAplicadas:0}),vm.historial=[];for(var i=1;i<vm.RegistroSeleccionado.horas_asignadas.length;i++)vm.historial.push({id:vm.RegistroSeleccionado.horas_asignadas[i].id,idUnidadAdmtva:vm.RegistroSeleccionado.idUnidadAdmtva,anio:vm.RegistroSeleccionado.horas_asignadas[i].anio,horasAsignadas:vm.RegistroSeleccionado.horas_asignadas[i].horasAsignadas,horasSeparadas:vm.RegistroSeleccionado.horas_asignadas[i].horasSeparadas,horasAplicadas:vm.RegistroSeleccionado.horas_asignadas[i].horasAplicadas})},function(){})}function edita_datos_registro(seleccion){var modalInstance=$modal.open({templateUrl:"app/components/ptc/asignacion-horas/modal-captura-num-horas.html",windowClass:"animated fadeIn",controller:"ModalEditaHorasController as vm",resolve:{registroEditar:function(){return seleccion}}});modalInstance.result.then(function(respuesta){vm.RegistroSeleccionado.horas_asignadas[0].horasAsignadas=respuesta.horasAsignadas},function(){})}function elimina_registro(seleccion){ProgTrimCursos.find({filter:{where:{and:[{anio:seleccion.horas_asignadas[0].anio},{idUnidadAdmtva:seleccion.idUnidadAdmtva}]},fields:["idPtc"]}}).$promise.then(function(resultado){resultado.length>0?swal({title:"Error",html:"No se puede eliminar a&ntilde;o seleccionado ya que se ha usado para generar un PTC en la unidad",type:"error",showCancelButton:!1,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar"}):swal({title:"Confirmar",html:"Se eliminar&aacute; el a&ntilde;o <strong>"+seleccion.horas_asignadas[0].anio+"</strong> con sus horas asignadas, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),HorasAsignadasUnidad.deleteById({id:seleccion.horas_asignadas[0].id}).$promise.then(function(){vm.RegistroSeleccionado.horas_asignadas.splice(0,1),vm.historial.splice(0,1),swal("Registro eliminado","","success")})})})}var vm=this;vm.muestraDatosRegistroActual=muestraDatosRegistroActual,vm.cambiarPagina=cambiarPagina,vm.nuevo_registro=nuevo_registro,vm.edita_datos_registro=edita_datos_registro,vm.elimina_registro=elimina_registro,vm.indexUltimo=0,vm.registros=[],vm.RegistroSeleccionado=[],vm.historial=[],vm.tablaListaRegistros={totalElementos:0,paginaActual:1,registrosPorPagina:10,inicio:0,fin:1,condicion:{},filtro_datos:{},fila_seleccionada:0},inicia()}angular.module("icat_control_escolar").controller("PrincipalHorasUnidadController",PrincipalHorasUnidadController),PrincipalHorasUnidadController.$inject=["$modal","tablaDatosService","CatalogoUnidadesAdmtvas","HorasAsignadasUnidad","ProgTrimCursos"]}(),function(){"use strict";function ModalCapturaHorasController($scope,$modalInstance,registroEditar,CatalogoUnidadesAdmtvas){function inicia(){}function guardar(){vm.mostrarSpiner=!0,CatalogoUnidadesAdmtvas.horas_asignadas.create({id:registroEditar.idUnidadAdmtva},{anio:vm.registroEdicion.anio,horasAsignadas:vm.registroEdicion.horasAsignadas}).$promise.then(function(respuesta){vm.registroEdicion.id=respuesta.id,vm.registroEdicion.anio=respuesta.anio,vm.registroEdicion.horasAsignadas=respuesta.horasAsignadas,vm.registroEdicion.horasSeparadas=0,vm.registroEdicion.horasAplicadas=0,$modalInstance.close(vm.registroEdicion)}).catch(function(error){})}var vm=this;if(vm.guardar=guardar,vm.habilitar=!1,0==registroEditar.horas_asignadas.length)var fechaHoy=new Date,ultimo_anio=fechaHoy.getFullYear()-1;else var ultimo_anio=registroEditar.horas_asignadas[0].anio;vm.registroEdicion={id:0,anio:(ultimo_anio+1).toString(),horasAsignadas:0,horasSeparadas:0,horasAplicadas:0},inicia()}angular.module("icat_control_escolar").controller("ModalCapturaHorasController",ModalCapturaHorasController),ModalCapturaHorasController.$inject=["$scope","$modalInstance","registroEditar","CatalogoUnidadesAdmtvas"]}(),function(){"use strict";function ModalEditaHorasController($scope,$modalInstance,registroEditar,CatalogoUnidadesAdmtvas,HorasAsignadasUnidad){function inicia(){}function guardar(){vm.mostrarSpiner=!0,HorasAsignadasUnidad.prototype$updateAttributes({id:vm.registroEdicion.id},{horasAsignadas:vm.registroEdicion.horasAsignadas}).$promise.then(function(respuesta){vm.registroEdicion.id=respuesta.id,vm.registroEdicion.anio=respuesta.anio,vm.registroEdicion.horasAsignadas=respuesta.horasAsignadas,$modalInstance.close(vm.registroEdicion)}).catch(function(error){})}var vm=this;vm.guardar=guardar,vm.habilitar=!0,vm.registroEdicion={id:registroEditar.horas_asignadas[0].id,anio:registroEditar.horas_asignadas[0].anio.toString(),horasAsignadas:registroEditar.horas_asignadas[0].horasAsignadas},inicia()}angular.module("icat_control_escolar").controller("ModalEditaHorasController",ModalEditaHorasController),ModalEditaHorasController.$inject=["$scope","$modalInstance","registroEditar","CatalogoUnidadesAdmtvas","HorasAsignadasUnidad"]}(),function(){"use strict";function PrincipalPTCUnidadController($scope,$http,$modal,$q,tablaDatosService,HorasAsignadasUnidad,ProgTrimCursos,CursosPtc,ControlProcesos){function inicia(){vm.tablaListaPTCs.filtro_datos={filter:{where:vm.tablaListaPTCs.condicion,order:["idUnidadAdmtva ASC","anio DESC","trimestre DESC"],limit:vm.tablaListaPTCs.registrosPorPagina,skip:vm.tablaListaPTCs.paginaActual-1,include:["unidad_pertenece",{relation:"cursos_programados",scope:{fields:["idCursoPTC"]}}]}},vm.tablaListaCursos.filtro_datos={filter:{where:vm.tablaListaCursos.condicion,order:["fechaInicio ASC"],limit:vm.tablaListaCursos.registrosPorPagina,skip:vm.tablaListaCursos.paginaActual-1,include:[{relation:"detalle_curso",scope:{fields:["nombreCurso","modalidad"]}},{relation:"instructores_propuestos",scope:{fields:["idInstructor","apellidoPaterno","apellidoMaterno","nombre"],order:["apellidoPaterno ASC","apellidoMaterno ASC","nombre ASC"]}}]}};var fechaHoy=new Date;HorasAsignadasUnidad.find({filter:{where:{and:[{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},{anio:{gte:fechaHoy.getFullYear()}}]},fields:["id","anio","horasAsignadas"],order:"anio DESC"}}).$promise.then(function(resp){resp.length>0&&(vm.listaAniosDisp=resp,vm.anioSeleccionado=vm.listaAniosDisp[0],vm.muestra_ptc_anio())})}function cambiarPaginaDetalle(){vm.tablaListaCursos.totalElementos>0&&tablaDatosService.cambia_pagina(CursosPtc,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.registrosCursosPTCs=respuesta.datos})}function muestraCursosPTCActual(seleccion){var index=vm.registrosPTCs.indexOf(seleccion);vm.RegistroPTCSeleccionado=seleccion,vm.tablaListaPTCs.fila_seleccionada=index,
vm.client=1,vm.tablaListaCursos.paginaActual=1,vm.tablaListaCursos.inicio=0,vm.tablaListaCursos.fin=1,vm.tablaListaCursos.condicion={idPtc:seleccion.idPtc},vm.registrosCursosPTCs=[],tablaDatosService.obtiene_datos_tabla(CursosPtc,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.totalElementos=respuesta.total_registros,vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.tablaListaCursos.totalElementos>0&&(vm.client=2,vm.registrosCursosPTCs=respuesta.datos)})}function muestra_ptc_anio(){vm.registrosPTCs={},vm.RegistroPTCSeleccionado={},vm.tablaListaPTCs.fila_seleccionada=void 0,vm.client=1,vm.tablaListaPTCs.paginaActual=1,vm.tablaListaPTCs.inicio=0,vm.tablaListaPTCs.fin=1,vm.tablaListaPTCs.condicion={and:[{anio:vm.anioSeleccionado.anio},{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},{or:[{estatus:0},{estatus:1},{estatus:3}]}]},tablaDatosService.obtiene_datos_tabla(ProgTrimCursos,vm.tablaListaPTCs).then(function(respuesta){vm.tablaListaPTCs.totalElementos=respuesta.total_registros,vm.tablaListaPTCs.inicio=respuesta.inicio,vm.tablaListaPTCs.fin=respuesta.fin,vm.tablaListaPTCs.totalElementos>0&&(vm.registrosPTCs=respuesta.datos,vm.RegistroPTCSeleccionado=vm.registrosPTCs[0],vm.client=2,vm.tablaListaPTCs.fila_seleccionada=0,muestraCursosPTCActual(vm.RegistroPTCSeleccionado)),calcula_horas_disponibles()})}function abreDocPTC(seleccion){var link=angular.element('<a href="api/ProgTrimCursos/exporta_doc_ptc/'+seleccion.idPtc+'" target="_blank"></a>');angular.element(document.body).append(link),link[0].click(),link.remove()}function editaPTC(seleccion){var modalInstance=$modal.open({templateUrl:"app/components/ptc/ptc-unidad/modal-edita-ptc.html",windowClass:"animated fadeIn",controller:"ModalEditaPTCController as vm",resolve:{registroEditar:function(){return seleccion}}});modalInstance.result.then(function(respuesta){vm.RegistroPTCSeleccionado.anio=respuesta.anio,vm.RegistroPTCSeleccionado.trimestre=parseInt(respuesta.trimestre),vm.RegistroPTCSeleccionado.estatus=respuesta.estatus,vm.RegistroPTCSeleccionado.fechaModificacion=respuesta.fechaModificacion},function(){})}function nuevoPTC(){var modalInstance=$modal.open({templateUrl:"app/components/ptc/ptc-unidad/modal-edita-ptc.html",windowClass:"animated fadeIn",controller:"ModalNuevoPTCController as vm"});modalInstance.result.then(function(){vm.tablaListaPTCs.paginaActual=1,vm.tablaListaPTCs.inicio=0,vm.tablaListaPTCs.fin=1,vm.tablaListaPTCs.fila_seleccionada=0,inicia()},function(){})}function eliminaPTC(RegistroSeleccionado){var trimestres=["PRIMERO","SEGUNDO","TERCERO","CUARTO"];swal({title:"Confirmar",html:"Se eliminar&aacute; el PTC del Trimestre <strong>"+trimestres[RegistroSeleccionado.trimestre-1]+"</strong> del a&ntilde;o <strong>"+RegistroSeleccionado.anio+"</strong>, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){function borra_instructores_cursos(registrosCursosPTCs){var deferred=$q.defer(),total_cursos=registrosCursosPTCs.length,indice=0;return 0==total_cursos&&deferred.resolve(),angular.forEach(registrosCursosPTCs,function(curso){CursosPtc.instructores_propuestos.destroyAll({id:curso.idCursoPTC}).$promise.then(function(){indice++,indice==total_cursos&&deferred.resolve()})}),deferred.promise}swal.disableButtons();var promise=borra_instructores_cursos(vm.registrosCursosPTCs);promise.then(function(){ProgTrimCursos.cursos_programados.destroyAll({id:RegistroSeleccionado.idPtc}).$promise.then(function(){ProgTrimCursos.deleteById({id:RegistroSeleccionado.idPtc}).$promise.then(function(){vm.tablaListaPTCs.paginaActual=1,vm.tablaListaPTCs.inicio=0,vm.tablaListaPTCs.fin=1,vm.tablaListaPTCs.fila_seleccionada=0,inicia(),swal("PTC eliminado","","success")})})})})}function enviaRevisionPTC(RegistroSeleccionado){var trimestres=["PRIMERO","SEGUNDO","TERCERO","CUARTO"];swal({title:"Confirmar",html:"El PTC del Trimestre <strong>"+trimestres[RegistroSeleccionado.trimestre-1]+"</strong> del a&ntilde;o <strong>"+RegistroSeleccionado.anio+"</strong> ser&aacute; enviado a su revisi&oacute;n, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),ProgTrimCursos.prototype$updateAttributes({id:RegistroSeleccionado.idPtc},{estatus:1,fechaEnvioRevision:Date()}).$promise.then(function(respuesta){vm.RegistroPTCSeleccionado.estatus=respuesta.estatus,vm.RegistroPTCSeleccionado.fechaEnvioRevision=respuesta.fechaEnvioRevision,ControlProcesos.create({proceso:"PTC",accion:"ENVIO REVISION",idDocumento:RegistroSeleccionado.idPtc,idUsuario:$scope.currentUser.id_usuario,idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}).$promise.then(function(resp){ControlProcesos.findById({id:resp.id,filter:{fields:["identificador"]}}).$promise.then(function(resp_control){swal({title:"PTC enviado",html:'se env&iacute;o el PTC a revisi&oacute;n y se gener&oacute; el identificador del proceso <br><strong style="font-size: 13px;">'+resp_control.identificador+"</strong>",type:"success",showCancelButton:!1,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar"})})})})})}function editaCursoPTC(seleccion){var modalInstance=$modal.open({templateUrl:"app/components/ptc/ptc-unidad/modal-edita-curso-ptc.html",windowClass:"animated fadeIn",controller:"ModalEditaCursoPTCController as vm",windowClass:"app-modal-window",resolve:{registroEditar:function(){return{horas_disponibles:vm.horas_disponibles,horas_usadas:vm.RegistroPTCSeleccionado.horasSeparadas,recordPTC:seleccion}}}});modalInstance.result.then(function(respuesta){seleccion.idCatalogoCurso=respuesta.idCatalogoCurso,seleccion.detalle_curso.nombreCurso=respuesta.nombreCurso,seleccion.detalle_curso.modalidad=respuesta.modalidad,seleccion.horario=respuesta.horario,seleccion.aulaAsignada=respuesta.aulaAsignada,seleccion.capacitandos=respuesta.capacitandos,seleccion.semanas=respuesta.semanas,seleccion.total=respuesta.total,seleccion.fechaInicio=respuesta.fechaInicio,seleccion.fechaFin=respuesta.fechaFin,seleccion.observaciones=respuesta.observaciones,vm.RegistroPTCSeleccionado.estatus=respuesta.estatusPTC,vm.RegistroPTCSeleccionado.horasSeparadas=respuesta.horasSeparadas,vm.RegistroPTCSeleccionado.fechaModificacion=respuesta.fechaModificacionPTC,calcula_horas_disponibles(),seleccion.instructores_propuestos=[],angular.forEach(respuesta.instructores_propuestos,function(record){seleccion.instructores_propuestos.push({idInstructor:record.idInstructor,apellidoPaterno:record.apellidoPaterno,apellidoMaterno:record.apellidoMaterno,nombre:record.nombre})})},function(){})}function nuevoCursoPTC(){var modalInstance=$modal.open({templateUrl:"app/components/ptc/ptc-unidad/modal-edita-curso-ptc.html",windowClass:"animated fadeIn",controller:"ModalNuevoCursoPTCController as vm",windowClass:"app-modal-window",resolve:{registroEditar:function(){return{horas_disponibles:vm.horas_disponibles,horas_usadas:vm.RegistroPTCSeleccionado.horasSeparadas,recordPTC:vm.RegistroPTCSeleccionado}}}});modalInstance.result.then(function(respuesta1){vm.RegistroPTCSeleccionado.estatus=respuesta1.estatusPTC,vm.RegistroPTCSeleccionado.horasSeparadas=respuesta1.horasSeparadas,vm.RegistroPTCSeleccionado.fechaModificacion=respuesta1.fechaModificacionPTC,vm.RegistroPTCSeleccionado.cursos_programados.push({idCursoPTC:respuesta1.idCursoPTC,idPtc:vm.RegistroPTCSeleccionado.idPtc}),calcula_horas_disponibles(),muestraCursosPTCActual(vm.RegistroPTCSeleccionado)},function(){})}function eliminaCursoPTC(seleccion){swal({title:"Confirmar",html:"Se eliminar&aacute; el curso <strong>"+seleccion.detalle_curso.nombreCurso+"</strong> de la lista de cursos del PTC seleccionado, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),CursosPtc.instructores_propuestos.destroyAll({id:seleccion.idCursoPTC}).$promise.then(function(){CursosPtc.deleteById({id:seleccion.idCursoPTC}).$promise.then(function(){var index=vm.RegistroPTCSeleccionado.cursos_programados.map(function(curso){return curso.idCursoPTC}).indexOf(seleccion.idCursoPTC);index>=0&&vm.RegistroPTCSeleccionado.cursos_programados.splice(index,1),CursosPtc.find({filter:{where:{idPtc:vm.RegistroPTCSeleccionado.idPtc},fields:["total"]}}).$promise.then(function(resp){var total_horas_separadas=0;angular.forEach(resp,function(record){total_horas_separadas+=record.total}),ProgTrimCursos.prototype$updateAttributes({id:vm.RegistroPTCSeleccionado.idPtc},{estatus:0,horasSeparadas:total_horas_separadas,fechaModificacion:Date()}).$promise.then(function(respuesta){vm.RegistroPTCSeleccionado.estatusPTC=respuesta.estatus,vm.RegistroPTCSeleccionado.horasSeparadas=respuesta.horasSeparadas,vm.RegistroPTCSeleccionado.fechaModificacionPTC=respuesta.fechaModificacion,calcula_horas_disponibles()})}),muestraCursosPTCActual(vm.RegistroPTCSeleccionado),swal("Curso eliminado","","success")})})})}function calcula_horas_disponibles(){ProgTrimCursos.find({filter:{where:{and:[{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},{anio:vm.anioSeleccionado.anio},{or:[{estatus:2},{estatus:4}]}]},fields:["idPtc","horasSeparadas","estatus"]}}).$promise.then(function(resp){var num_horas_separadas=0;angular.forEach(resp,function(registro){num_horas_separadas+=registro.horasSeparadas}),vm.horas_disponibles=vm.anioSeleccionado.horasAsignadas-num_horas_separadas})}var vm=this;vm.muestra_ptc_anio=muestra_ptc_anio,vm.muestraCursosPTCActual=muestraCursosPTCActual,vm.cambiarPaginaDetalle=cambiarPaginaDetalle,vm.abreDocPTC=abreDocPTC,vm.editaPTC=editaPTC,vm.nuevoPTC=nuevoPTC,vm.eliminaPTC=eliminaPTC,vm.enviaRevisionPTC=enviaRevisionPTC,vm.editaCursoPTC=editaCursoPTC,vm.nuevoCursoPTC=nuevoCursoPTC,vm.eliminaCursoPTC=eliminaCursoPTC,vm.listaAniosDisp=[],vm.anioSeleccionado={},vm.horas_disponibles=0,vm.tablaListaPTCs={totalElementos:0,paginaActual:1,registrosPorPagina:5,inicio:0,fin:1,condicion:{},filtro_datos:{},fila_seleccionada:0},vm.tablaListaPTCs.fila_seleccionada=void 0,vm.registrosPTCs={},vm.RegistroPTCSeleccionado={},vm.tablaListaCursos={totalElementos:0,paginaActual:1,registrosPorPagina:5,inicio:0,fin:1,condicion:{},filtro_datos:{},fila_seleccionada:0},vm.registrosCursosPTCs=[],inicia()}angular.module("icat_control_escolar").controller("PrincipalPTCUnidadController",PrincipalPTCUnidadController),PrincipalPTCUnidadController.$inject=["$scope","$http","$modal","$q","tablaDatosService","HorasAsignadasUnidad","ProgTrimCursos","CursosPtc","ControlProcesos"]}(),function(){"use strict";function ModalEditaPTCController($scope,$modalInstance,registroEditar,HorasAsignadasUnidad,ProgTrimCursos){function inicia(){new Date;HorasAsignadasUnidad.find({filter:{where:{and:[{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},{anio:{gte:vm.registroEdicion.anio}}]},fields:["anio"],order:"anio ASC"}}).$promise.then(function(resp){vm.listaAniosDisp=resp,ProgTrimCursos.find({filter:{where:{and:[{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},{anio:vm.registroEdicion.anio},{trimestre:{neq:vm.registroEdicion.trimestre}}]},fields:["trimestre"],order:["trimestre ASC"]}}).$promise.then(function(respuesta){vm.listaTrimestres=[{trimestre:1,alias:"PRIMERO"},{trimestre:2,alias:"SEGUNDO"},{trimestre:3,alias:"TERCERO"},{trimestre:4,alias:"CUARTO"}],angular.forEach(respuesta,function(record){var index=vm.listaTrimestres.map(function(registro){return registro.trimestre}).indexOf(record.trimestre);index>=0&&vm.listaTrimestres.splice(index,1)})})})}function muestraTrimestres(){ProgTrimCursos.find({filter:{where:{and:[{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},{anio:vm.registroEdicion.anio}]},fields:["trimestre"],order:["trimestre ASC"]}}).$promise.then(function(respuesta){vm.listaTrimestres=[{trimestre:1,alias:"PRIMERO"},{trimestre:2,alias:"SEGUNDO"},{trimestre:3,alias:"TERCERO"},{trimestre:4,alias:"CUARTO"}],angular.forEach(respuesta,function(record){var index=vm.listaTrimestres.map(function(registro){return registro.trimestre}).indexOf(record.trimestre);index>=0&&vm.listaTrimestres.splice(index,1)})})}function guardar(){var datos={anio:vm.registroEdicion.anio,trimestre:parseInt(vm.registroEdicion.trimestre),estatus:0,fechaModificacion:Date()};ProgTrimCursos.prototype$updateAttributes({id:registroEditar.idPtc},datos).$promise.then(function(respuesta){vm.registroEdicion.fechaModificacion=respuesta.fechaModificacion,vm.registroEdicion.estatus=respuesta.estatus,$modalInstance.close(vm.registroEdicion)})}var vm=this;vm.muestraTrimestres=muestraTrimestres,vm.guardar=guardar,vm.registroEdicion={anio:registroEditar.anio,trimestre:registroEditar.trimestre,fechaModificacion:""},inicia()}angular.module("icat_control_escolar").controller("ModalEditaPTCController",ModalEditaPTCController),ModalEditaPTCController.$inject=["$scope","$modalInstance","registroEditar","HorasAsignadasUnidad","ProgTrimCursos"]}(),function(){"use strict";function ModalNuevoPTCController($scope,$modalInstance,HorasAsignadasUnidad,ProgTrimCursos){function inicia(){var fechaHoy=new Date;HorasAsignadasUnidad.find({filter:{where:{and:[{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},{anio:{gte:fechaHoy.getFullYear()}}]},fields:["anio"],order:"anio ASC"}}).$promise.then(function(resp){vm.listaAniosDisp=resp})}function muestraTrimestres(){ProgTrimCursos.find({filter:{where:{and:[{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},{anio:vm.registroEdicion.anio}]},fields:["trimestre"],order:["trimestre ASC"]}}).$promise.then(function(respuesta){vm.listaTrimestres=[{trimestre:1,alias:"PRIMERO (ENERO - MARZO)"},{trimestre:2,alias:"SEGUNDO (ABRIL - JUNIO)"},{trimestre:3,alias:"TERCERO (JULIO - SEPTIEMBRE)"},{trimestre:4,alias:"CUARTO (OCTUBRE - DICIEMBRE)"}],angular.forEach(respuesta,function(record){var index=vm.listaTrimestres.map(function(registro){return registro.trimestre}).indexOf(record.trimestre);index>=0&&vm.listaTrimestres.splice(index,1)})})}function guardar(){ProgTrimCursos.create({idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id,anio:vm.registroEdicion.anio,trimestre:parseInt(vm.registroEdicion.trimestre),fechaElaboracion:Date()}).$promise.then(function(respuesta){$modalInstance.close()}).catch(function(error){})}var vm=this;vm.muestraTrimestres=muestraTrimestres,vm.guardar=guardar,vm.listaTrimestres=[],vm.registroEdicion={anio:0,trimestre:""},inicia()}angular.module("icat_control_escolar").controller("ModalNuevoPTCController",ModalNuevoPTCController),ModalNuevoPTCController.$inject=["$scope","$modalInstance","HorasAsignadasUnidad","ProgTrimCursos"]}(),function(){"use strict";function ModalEditaCursoPTCController($scope,$timeout,$modalInstance,registroEditar,ProgTrimCursos,CursosPtc,CatalogoCursos,CatalogoInstructores){function inicia(){CatalogoCursos.find({filter:{fields:["idCatalogoCurso","nombreCurso","modalidad","claveCurso","numeroHoras"],order:"nombreCurso ASC"}}).$promise.then(function(resp){vm.listaCursos=resp;var index=vm.listaCursos.map(function(curso){return curso.idCatalogoCurso}).indexOf(vm.registroEdicion.idCatalogoCurso);vm.cursoSeleccionado=vm.listaCursos[index],vm.registroEdicion.claveCurso=vm.cursoSeleccionado.claveCurso,vm.registroEdicion.modalidad=vm.cursoSeleccionado.modalidad}),CatalogoCursos.instructores_habilitados({id:vm.registroEdicion.idCatalogoCurso,filter:{where:{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},fields:["idInstructor","apellidoPaterno","apellidoMaterno","nombre","efTerminal"],include:[{relation:"evaluacion_curso",scope:{where:{idCatalogoCurso:vm.registroEdicion.idCatalogoCurso},fields:["calificacion"]}}]}}).$promise.then(function(resp){angular.forEach(resp,function(record){vm.listaInstructores.push({idInstructor:record.idInstructor,apellidoPaterno:record.apellidoPaterno,apellidoMaterno:record.apellidoMaterno,nombre:record.nombre,nombre_completo:record.apellidoPaterno+" "+record.apellidoMaterno+" "+record.nombre,calificacion:record.evaluacion_curso[0].calificacion,efTerminal:record.efTerminal})});var index;angular.forEach(registroEditar.recordPTC.instructores_propuestos,function(record){index=vm.listaInstructores.map(function(instructor){return instructor.idInstructor}).indexOf(record.idInstructor),vm.registroEdicion.instructores_propuestos.push({idInstructor:vm.listaInstructores[index].idInstructor,apellidoPaterno:vm.listaInstructores[index].apellidoPaterno,apellidoMaterno:vm.listaInstructores[index].apellidoMaterno,nombre:vm.listaInstructores[index].nombre,nombre_completo:vm.listaInstructores[index].apellidoPaterno+" "+vm.listaInstructores[index].apellidoMaterno+" "+vm.listaInstructores[index].nombre,calificacion:vm.listaInstructores[index].calificacion,efTerminal:vm.listaInstructores[index].efTerminal}),index>=0&&vm.listaInstructores.splice(index,1)}),vm.listaInstructores.sort(sort_by("nombre_completo",!1,function(a){return a.toUpperCase()}))})}function sort_by(field,reverse,primer){var key=primer?function(x){return primer(x[field])}:function(x){return x[field]};return reverse=reverse?-1:1,function(a,b){return a=key(a),b=key(b),reverse*((a>b)-(b>a))}}function openCalendar1($event){$event.preventDefault(),$event.stopPropagation(),vm.opened1=!0}function openCalendar2($event){$event.preventDefault(),$event.stopPropagation(),vm.opened2=!0}function agregaInstructor(){if(vm.listaInstructores.length>0){vm.registroEdicion.instructores_propuestos.push({idInstructor:vm.instructorSeleccionado.idInstructor,apellidoPaterno:vm.instructorSeleccionado.apellidoPaterno,apellidoMaterno:vm.instructorSeleccionado.apellidoMaterno,nombre:vm.instructorSeleccionado.nombre,nombre_completo:vm.instructorSeleccionado.apellidoPaterno+" "+vm.instructorSeleccionado.apellidoMaterno+" "+vm.instructorSeleccionado.nombre,calificacion:vm.instructorSeleccionado.calificacion,efTerminal:vm.instructorSeleccionado.efTerminal});var index;angular.forEach(vm.registroEdicion.instructores_propuestos,function(record){index=vm.listaInstructores.map(function(instructor){return instructor.idInstructor}).indexOf(record.idInstructor),index>=0&&vm.listaInstructores.splice(index,1)}),vm.instructorSeleccionado={}}}function eliminaInstructor(indice){vm.listaInstructores.push({idInstructor:vm.registroEdicion.instructores_propuestos[indice].idInstructor,apellidoPaterno:vm.registroEdicion.instructores_propuestos[indice].apellidoPaterno,apellidoMaterno:vm.registroEdicion.instructores_propuestos[indice].apellidoMaterno,nombre:vm.registroEdicion.instructores_propuestos[indice].nombre,nombre_completo:vm.registroEdicion.instructores_propuestos[indice].apellidoPaterno+" "+vm.registroEdicion.instructores_propuestos[indice].apellidoMaterno+" "+vm.registroEdicion.instructores_propuestos[indice].nombre,calificacion:vm.registroEdicion.instructores_propuestos[indice].calificacion,efTerminal:vm.registroEdicion.instructores_propuestos[indice].efTerminal}),vm.registroEdicion.instructores_propuestos.splice(indice,1),vm.instructorSeleccionado={}}function guardar(){vm.mostrarSpiner=!0;var diferencia=vm.registroEdicion.total-vm.horas_curso_temp;if(diferencia>vm.horas_disponibles)return vm.mostrarSpiner=!1,vm.mensaje="El número de horas de este curso incrementa las horas total del PTC ("+(registroEditar.horas_usadas+diferencia)+" horas) siendo mayor a las horas disponibles para la unidad ("+registroEditar.horas_disponibles+" horas)",vm.mostrar_msg_error=!0,void $timeout(function(){vm.mensaje="",vm.mostrar_msg_error=!1},6e3);var datos={idCatalogoCurso:vm.cursoSeleccionado.idCatalogoCurso,horario:vm.registroEdicion.horario,aulaAsignada:vm.registroEdicion.aulaAsignada,capacitandos:vm.registroEdicion.capacitandos,semanas:vm.registroEdicion.semanas,total:vm.registroEdicion.total,fechaInicio:vm.registroEdicion.fechaInicio,fechaFin:vm.registroEdicion.fechaFin,observaciones:vm.registroEdicion.observaciones};vm.registroEdicion.nombreCurso=vm.cursoSeleccionado.nombreCurso,vm.registroEdicion.claveCurso=vm.cursoSeleccionado.claveCurso,vm.registroEdicion.modalidad=vm.cursoSeleccionado.modalidad,CursosPtc.prototype$updateAttributes({id:vm.registroEdicion.idCursoPTC},datos).$promise.then(function(respuesta){CursosPtc.instructores_propuestos.destroyAll({id:vm.registroEdicion.idCursoPTC}).$promise.then(function(){vm.registroEdicion.instructores_propuestos.length>0&&angular.forEach(vm.registroEdicion.instructores_propuestos,function(record){CursosPtc.instructores_propuestos.link({id:vm.registroEdicion.idCursoPTC,fk:record.idInstructor},{}).$promise.then(function(){})}),CursosPtc.find({filter:{where:{idPtc:vm.registroEdicion.idPtc},fields:["total"]}}).$promise.then(function(resp){var total_horas_separadas=0;angular.forEach(resp,function(record){total_horas_separadas+=record.total}),ProgTrimCursos.prototype$updateAttributes({id:vm.registroEdicion.idPtc},{estatus:0,horasSeparadas:total_horas_separadas,fechaModificacion:Date()}).$promise.then(function(respuesta){vm.registroEdicion.estatusPTC=0,vm.registroEdicion.horasSeparadas=respuesta.horasSeparadas,vm.registroEdicion.fechaModificacionPTC=respuesta.fechaModificacion,$modalInstance.close(vm.registroEdicion)})})})}).catch(function(error){})}var vm=this;vm.sort_by=sort_by,vm.openCalendar1=openCalendar1,vm.openCalendar2=openCalendar2,vm.guardar=guardar,vm.agregaInstructor=agregaInstructor,vm.eliminaInstructor=eliminaInstructor,vm.opened1=!1,vm.opened2=!1,vm.mostrarSpiner=!1,vm.mostrar_msg_error=!1,vm.mensaje="",vm.EdicionCurso=!0,vm.cursoSeleccionado=0,vm.listaCursos={},vm.instructorSeleccionado={},vm.listaInstructores=[],vm.horas_disponibles=registroEditar.horas_disponibles-registroEditar.horas_usadas,vm.horas_curso_temp=registroEditar.recordPTC.total,vm.registroEdicion={idPtc:registroEditar.recordPTC.idPtc,idCursoPTC:registroEditar.recordPTC.idCursoPTC,idCatalogoCurso:registroEditar.recordPTC.idCatalogoCurso,claveCurso:"",nombreCurso:"",modalidad:"",horario:registroEditar.recordPTC.horario,aulaAsignada:registroEditar.recordPTC.aulaAsignada,capacitandos:registroEditar.recordPTC.capacitandos,semanas:registroEditar.recordPTC.semanas,total:registroEditar.recordPTC.total,fechaInicio:registroEditar.recordPTC.fechaInicio,fechaFin:registroEditar.recordPTC.fechaFin,observaciones:registroEditar.recordPTC.observaciones,estatusPTC:0,fechaModificacionPTC:"",instructores_propuestos:[]},inicia()}angular.module("icat_control_escolar").controller("ModalEditaCursoPTCController",ModalEditaCursoPTCController),ModalEditaCursoPTCController.$inject=["$scope","$timeout","$modalInstance","registroEditar","ProgTrimCursos","CursosPtc","CatalogoCursos","CatalogoInstructores"]}(),function(){"use strict";function ModalNuevoCursoPTCController($scope,$timeout,$modalInstance,registroEditar,ProgTrimCursos,CursosPtc,CatalogoCursos,CatalogoInstructores){function inicia(){CatalogoCursos.find({filter:{fields:["idCatalogoCurso","nombreCurso","modalidad","claveCurso","numeroHoras"],order:"nombreCurso ASC"}}).$promise.then(function(resp){vm.listaCursos=resp})}function openCalendar1($event){$event.preventDefault(),$event.stopPropagation(),vm.opened1=!0}function openCalendar2($event){$event.preventDefault(),$event.stopPropagation(),vm.opened2=!0}function muestraInstructoresCurso(){vm.registroEdicion.claveCurso=vm.cursoSeleccionado.claveCurso,vm.registroEdicion.modalidad=vm.cursoSeleccionado.modalidad,vm.listaInstructores=[],CatalogoCursos.instructores_habilitados({id:vm.cursoSeleccionado.idCatalogoCurso,filter:{where:{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},fields:["idInstructor","apellidoPaterno","apellidoMaterno","nombre","efTerminal"],include:[{relation:"evaluacion_curso",scope:{where:{idCatalogoCurso:vm.cursoSeleccionado.idCatalogoCurso},fields:["calificacion"]}}]}}).$promise.then(function(resp){angular.forEach(resp,function(record){vm.listaInstructores.push({idInstructor:record.idInstructor,apellidoPaterno:record.apellidoPaterno,apellidoMaterno:record.apellidoMaterno,nombre:record.nombre,nombre_completo:record.apellidoPaterno+" "+record.apellidoMaterno+" "+record.nombre,calificacion:record.evaluacion_curso[0].calificacion,efTerminal:record.efTerminal})}),vm.listaInstructores.sort(sort_by("nombre_completo",!1,function(a){return a.toUpperCase()}))})}function sort_by(field,reverse,primer){var key=primer?function(x){return primer(x[field])}:function(x){return x[field]};return reverse=reverse?-1:1,function(a,b){return a=key(a),b=key(b),reverse*((a>b)-(b>a))}}function agregaInstructor(){if(vm.listaInstructores.length>0){vm.registroEdicion.instructores_propuestos.push({idInstructor:vm.instructorSeleccionado.idInstructor,apellidoPaterno:vm.instructorSeleccionado.apellidoPaterno,apellidoMaterno:vm.instructorSeleccionado.apellidoMaterno,nombre:vm.instructorSeleccionado.nombre,nombre_completo:vm.instructorSeleccionado.apellidoPaterno+" "+vm.instructorSeleccionado.apellidoMaterno+" "+vm.instructorSeleccionado.nombre,calificacion:vm.instructorSeleccionado.calificacion,efTerminal:vm.instructorSeleccionado.efTerminal});var index;angular.forEach(vm.registroEdicion.instructores_propuestos,function(record){index=vm.listaInstructores.map(function(instructor){return instructor.idInstructor}).indexOf(record.idInstructor),index>=0&&vm.listaInstructores.splice(index,1)}),vm.instructorSeleccionado={}}}function eliminaInstructor(indice){vm.listaInstructores.push({idInstructor:vm.registroEdicion.instructores_propuestos[indice].idInstructor,apellidoPaterno:vm.registroEdicion.instructores_propuestos[indice].apellidoPaterno,apellidoMaterno:vm.registroEdicion.instructores_propuestos[indice].apellidoMaterno,nombre:vm.registroEdicion.instructores_propuestos[indice].nombre,nombre_completo:vm.registroEdicion.instructores_propuestos[indice].apellidoPaterno+" "+vm.registroEdicion.instructores_propuestos[indice].apellidoMaterno+" "+vm.registroEdicion.instructores_propuestos[indice].nombre,calificacion:vm.registroEdicion.instructores_propuestos[indice].calificacion,efTerminal:vm.registroEdicion.instructores_propuestos[indice].efTerminal}),vm.registroEdicion.instructores_propuestos.splice(indice,1),vm.instructorSeleccionado={}}function guardar(){return vm.mostrarSpiner=!0,registroEditar.horas_usadas+vm.registroEdicion.total>registroEditar.horas_disponibles?(vm.mostrarSpiner=!1,vm.mensaje="El número de horas de este curso incrementa las horas total del PTC ("+(registroEditar.horas_usadas+vm.registroEdicion.total)+" horas) siendo mayor a las horas disponibles para la unidad ("+registroEditar.horas_disponibles+" horas)",vm.mostrar_msg_error=!0,void $timeout(function(){vm.mensaje="",vm.mostrar_msg_error=!1},6e3)):void CursosPtc.create({idPtc:vm.registroEdicion.idPtc,idCatalogoCurso:vm.cursoSeleccionado.idCatalogoCurso,horario:vm.registroEdicion.horario,aulaAsignada:vm.registroEdicion.aulaAsignada,capacitandos:vm.registroEdicion.capacitandos,semanas:vm.registroEdicion.semanas,total:vm.registroEdicion.total,fechaInicio:vm.registroEdicion.fechaInicio,fechaFin:vm.registroEdicion.fechaFin,observaciones:vm.registroEdicion.observaciones}).$promise.then(function(respuesta){vm.registroEdicion.idCursoPTC=respuesta.idCursoPTC,vm.registroEdicion.instructores_propuestos.length>0&&angular.forEach(vm.registroEdicion.instructores_propuestos,function(record){CursosPtc.instructores_propuestos.link({id:respuesta.idCursoPTC,fk:record.idInstructor},{}).$promise.then(function(){})}),CursosPtc.find({filter:{where:{idPtc:vm.registroEdicion.idPtc},fields:["total"]}}).$promise.then(function(resp){var total_horas_separadas=0;angular.forEach(resp,function(record){total_horas_separadas+=record.total}),ProgTrimCursos.prototype$updateAttributes({id:vm.registroEdicion.idPtc},{estatus:0,horasSeparadas:total_horas_separadas,fechaModificacion:Date()}).$promise.then(function(respuesta){vm.registroEdicion.estatusPTC=0,vm.registroEdicion.horasSeparadas=respuesta.horasSeparadas,vm.registroEdicion.fechaModificacionPTC=respuesta.fechaModificacion,$modalInstance.close(vm.registroEdicion)})})}).catch(function(error){})}var vm=this;vm.sort_by=sort_by,vm.openCalendar1=openCalendar1,vm.openCalendar2=openCalendar2,vm.muestraInstructoresCurso=muestraInstructoresCurso,vm.agregaInstructor=agregaInstructor,vm.eliminaInstructor=eliminaInstructor,vm.guardar=guardar,vm.opened1=!1,vm.opened2=!1,vm.mostrarSpiner=!1,vm.mostrar_msg_error=!1,vm.mensaje="",vm.EdicionCurso=!1,vm.cursoSeleccionado=0,vm.listaCursos={},vm.instructorSeleccionado={},vm.listaInstructores=[],vm.horas_disponibles=registroEditar.horas_disponibles-registroEditar.horas_usadas,vm.registroEdicion={idPtc:registroEditar.recordPTC.idPtc,idCursoPTC:0,idCatalogoCurso:0,nombreCurso:"",modalidad:"",horario:"",aulaAsignada:"",capacitandos:0,semanas:0,total:0,fechaInicio:"",fechaFin:"",observaciones:"",estatusPTC:0,fechaModificacionPTC:"",instructores_propuestos:[]},inicia()}angular.module("icat_control_escolar").controller("ModalNuevoCursoPTCController",ModalNuevoCursoPTCController),ModalNuevoCursoPTCController.$inject=["$scope","$timeout","$modalInstance","registroEditar","ProgTrimCursos","CursosPtc","CatalogoCursos","CatalogoInstructores"]}(),function(){"use strict";function PrincipalRevisionPTCController($scope,$modal,$q,tablaDatosService,ProgTrimCursos,HorasAsignadasUnidad,CursosPtc,CatalogoUnidadesAdmtvas,ControlProcesos){function inicia(){vm.listaEstatus=[{valor:-1,texto:"Todos"},{valor:1,texto:"En proceso de revisión"},{valor:3,texto:"Rechazado"}],vm.tablaListaPTCs.condicion={or:[{estatus:1},{estatus:3}]},CatalogoUnidadesAdmtvas.find({filter:{where:{idUnidadAdmtva:{gt:1}},order:"nombre ASC"}}).$promise.then(function(resp){vm.listaUnidades=resp}),vm.estatusSeleccionado=vm.listaEstatus[0],vm.tablaListaPTCs.filtro_datos={filter:{where:vm.tablaListaPTCs.condicion,order:["idUnidadAdmtva ASC","anio DESC","trimestre DESC"],limit:vm.tablaListaPTCs.registrosPorPagina,skip:vm.tablaListaPTCs.paginaActual-1,include:["unidad_pertenece",{relation:"cursos_programados",scope:{fields:["idCursoPTC"]}}]}},vm.tablaListaCursos.filtro_datos={filter:{where:vm.tablaListaCursos.condicion,order:["fechaInicio ASC"],limit:vm.tablaListaCursos.registrosPorPagina,skip:vm.tablaListaCursos.paginaActual-1,include:[{relation:"detalle_curso",scope:{fields:["nombreCurso","modalidad"]}},{relation:"instructores_propuestos",scope:{fields:["apellidoPaterno","apellidoMaterno","nombre"],order:["apellidoPaterno ASC","apellidoMaterno ASC","nombre ASC"]}}]}}}function muestra_ptc_unidad(){vm.registrosPTCs={},vm.RegistroPTCSeleccionado={},vm.tablaListaPTCs.fila_seleccionada=void 0,vm.client=1,vm.tablaListaPTCs.paginaActual=1,vm.tablaListaPTCs.inicio=0,vm.tablaListaPTCs.fin=1,vm.registrosCursosPTCs={},vm.tablaListaCursos.totalElementos=0,vm.tablaListaCursos.paginaActual=1,vm.tablaListaCursos.inicio=-1,vm.tablaListaCursos.fin=0,vm.anioSeleccionado=[],vm.listaAniosDisp=[];var fechaHoy=new Date;HorasAsignadasUnidad.find({filter:{where:{and:[{idUnidadAdmtva:vm.unidadSeleccionada.idUnidadAdmtva},{anio:{gte:fechaHoy.getFullYear()}}]},fields:["id","anio","horasAsignadas"],order:"anio DESC"}}).$promise.then(function(resp){vm.listaAniosDisp=resp,vm.listaAniosDisp.length>0?(vm.anioSeleccionado=vm.listaAniosDisp[0],vm.tablaListaPTCs.condicion={and:[{anio:vm.anioSeleccionado.anio},{idUnidadAdmtva:vm.unidadSeleccionada.idUnidadAdmtva},{or:[{estatus:1},{estatus:3}]}]},tablaDatosService.obtiene_datos_tabla(ProgTrimCursos,vm.tablaListaPTCs).then(function(respuesta){vm.tablaListaPTCs.totalElementos=respuesta.total_registros,vm.tablaListaPTCs.inicio=respuesta.inicio,vm.tablaListaPTCs.fin=respuesta.fin,vm.tablaListaPTCs.totalElementos>0&&(vm.registrosPTCs=respuesta.datos,vm.RegistroPTCSeleccionado=vm.registrosPTCs[0],vm.client=2,vm.tablaListaPTCs.fila_seleccionada=0,muestraCursosPTCActual(vm.RegistroPTCSeleccionado)),calcula_horas_disponibles()})):(vm.tablaListaPTCs.totalElementos=0,vm.tablaListaPTCs.inicio=-1,vm.tablaListaPTCs.fin=0)})}function muestra_ptc_unidad_anio(){
vm.registrosPTCs={},vm.RegistroPTCSeleccionado={},vm.tablaListaPTCs.fila_seleccionada=void 0,vm.client=1,vm.tablaListaPTCs.paginaActual=1,vm.tablaListaPTCs.inicio=0,vm.tablaListaPTCs.fin=1,vm.registrosCursosPTCs={},vm.tablaListaCursos.totalElementos=0,vm.tablaListaCursos.paginaActual=1,vm.tablaListaCursos.inicio=-1,vm.tablaListaCursos.fin=0,vm.tablaListaPTCs.condicion={and:[{anio:vm.anioSeleccionado.anio},{idUnidadAdmtva:vm.unidadSeleccionada.idUnidadAdmtva},{or:[{estatus:1},{estatus:3}]}]},tablaDatosService.obtiene_datos_tabla(ProgTrimCursos,vm.tablaListaPTCs).then(function(respuesta){vm.tablaListaPTCs.totalElementos=respuesta.total_registros,vm.tablaListaPTCs.inicio=respuesta.inicio,vm.tablaListaPTCs.fin=respuesta.fin,vm.tablaListaPTCs.totalElementos>0&&(vm.registrosPTCs=respuesta.datos,vm.RegistroPTCSeleccionado=vm.registrosPTCs[0],vm.client=2,vm.tablaListaPTCs.fila_seleccionada=0,muestraCursosPTCActual(vm.RegistroPTCSeleccionado)),calcula_horas_disponibles()})}function cambiarPaginaPrincipal(){vm.tablaListaPTCs.totalElementos>0&&tablaDatosService.cambia_pagina(ProgTrimCursos,vm.tablaListaPTCs).then(function(respuesta){vm.tablaListaPTCs.inicio=respuesta.inicio,vm.tablaListaPTCs.fin=respuesta.fin,vm.registrosPTCs=respuesta.datos,vm.RegistroPTCSeleccionado=vm.registrosPTCs[0],vm.client=2,vm.tablaListaPTCs.fila_seleccionada=0,muestraCursosPTCActual(vm.RegistroPTCSeleccionado),calcula_horas_disponibles()})}function cambiarPaginaDetalle(){vm.tablaListaCursos.totalElementos>0&&tablaDatosService.cambia_pagina(CursosPtc,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.registrosCursosPTCs=respuesta.datos})}function muestraCursosPTCActual(seleccion){var index=vm.registrosPTCs.indexOf(seleccion);vm.RegistroPTCSeleccionado=seleccion,vm.tablaListaPTCs.fila_seleccionada=index,vm.client=1,vm.tablaListaCursos.paginaActual=1,vm.tablaListaCursos.inicio=0,vm.tablaListaCursos.fin=1,vm.tablaListaCursos.condicion={idPtc:seleccion.idPtc},vm.registrosCursosPTCs={},tablaDatosService.obtiene_datos_tabla(CursosPtc,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.totalElementos=respuesta.total_registros,vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.tablaListaCursos.totalElementos>0&&(vm.client=2,vm.registrosCursosPTCs=respuesta.datos)})}function aceptaPTC(RegistroSeleccionado){var datos,trimestres=["PRIMER","SEGUNDO","TERCER","CUARTO"],mensaje_confirmacion="",mensaje_accion="";"academica"==$scope.currentUser.perfil?(datos={aprobadoAcademica:!0},mensaje_confirmacion="El PTC del <strong>"+trimestres[RegistroSeleccionado.trimestre-1]+"</strong> trimestre, del a&ntilde;o <strong>"+RegistroSeleccionado.anio+"</strong> ser&aacute; marcado como <strong>APROBADO</strong> por el &aacute;rea acad&eacute;mica, ¿Continuar?",mensaje_accion="PTC APROBADO ACADEMICA"):"planeacion"==$scope.currentUser.perfil?(datos={aprobadoPlaneacion:!0},mensaje_confirmacion="El PTC del <strong>"+trimestres[RegistroSeleccionado.trimestre-1]+"</strong> trimestre, del a&ntilde;o <strong>"+RegistroSeleccionado.anio+"</strong> ser&aacute; marcado como <strong>APROBADO</strong> por el &aacute;rea de planeaci&oacute;n, ¿Continuar?",mensaje_accion="PTC APROBADO PLANEACION"):"direccion"==$scope.currentUser.perfil&&(datos={aprobadoDireccionGral:!0,estatus:2,fechaAceptacion:Date()},mensaje_confirmacion="El PTC del <strong>"+trimestres[RegistroSeleccionado.trimestre-1]+"</strong> trimestre, del a&ntilde;o <strong>"+RegistroSeleccionado.anio+"</strong> ser&aacute; marcado como <strong>APROBADO Y ACEPTADO</strong>, ¿Continuar?",mensaje_accion="PTC APROBADO - ACEPTADO DIR GRAL"),swal({title:"Confirmar",html:mensaje_confirmacion,type:"warning",showCancelButton:!0,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),ProgTrimCursos.prototype$updateAttributes({id:RegistroSeleccionado.idPtc},datos).$promise.then(function(respuesta){"direccion"==$scope.currentUser.perfil&&ProgTrimCursos.find({filter:{where:{and:[{idUnidadAdmtva:vm.unidadSeleccionada.idUnidadAdmtva},{anio:vm.anioSeleccionado.anio},{or:[{estatus:2},{estatus:4}]}]},fields:["idPtc","horasSeparadas"]}}).$promise.then(function(resp){var num_horas_separadas=0;angular.forEach(resp,function(registro){num_horas_separadas+=registro.horasSeparadas}),vm.horas_disponibles=vm.anioSeleccionado.horasAsignadas-num_horas_separadas,HorasAsignadasUnidad.prototype$updateAttributes({id:vm.anioSeleccionado.id},{horasSeparadas:num_horas_separadas}).$promise.then(function(respuesta){}).catch(function(error){})}),ControlProcesos.create({proceso:"PTC",accion:mensaje_accion,idDocumento:RegistroSeleccionado.idPtc,idUsuario:$scope.currentUser.id_usuario,idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}).$promise.then(function(resp){ControlProcesos.findById({id:resp.id,filter:{fields:["identificador"]}}).$promise.then(function(resp_control){vm.muestra_ptc_unidad_anio();var titulo_ventana_aviso="PTC aprobado";if("academica"==$scope.currentUser.perfil)var mensaje_ventana_aviso='se marc&oacute; el PTC como aprobado por el &aacute;rea acad&eacute;mica y se gener&oacute; el identificador del proceso <br><strong style="font-size: 13px;">'+resp_control.identificador+"</strong>";else if("planeacion"==$scope.currentUser.perfil)var mensaje_ventana_aviso='se marc&oacute; el PTC como aprobado por el &aacute;rea de planeaci&oacute;n y se gener&oacute; el identificador del proceso <br><strong style="font-size: 13px;">'+resp_control.identificador+"</strong>";else if("direccion"==$scope.currentUser.perfil){titulo_ventana_aviso="PTC Aceptado";var mensaje_ventana_aviso='se marc&oacute; el PTC como aprobado y aceptado y se gener&oacute; el identificador del proceso <br><strong style="font-size: 13px;">'+resp_control.identificador+"</strong>"}swal({title:titulo_ventana_aviso,html:mensaje_ventana_aviso,type:"success",showCancelButton:!1,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar"})})})})})}function rechazaPTC(RegistroSeleccionado){var trimestres=["PRIMERO","SEGUNDO","TERCERO","CUARTO"];swal({title:"Confirmar",html:"Se confirma que el PTC del <strong>"+trimestres[RegistroSeleccionado.trimestre-1]+"</strong> trimestre, del a&ntilde;o <strong>"+RegistroSeleccionado.anio+"</strong> ser&aacute; marcado como <strong>RECHAZADO</strong>, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),ProgTrimCursos.prototype$updateAttributes({id:RegistroSeleccionado.idPtc},{estatus:3,fechaRechazo:Date()}).$promise.then(function(respuesta){vm.RegistroPTCSeleccionado.estatus=respuesta.estatus,vm.RegistroPTCSeleccionado.fechaRechazo=respuesta.fechaRechazo,ControlProcesos.create({proceso:"PTC",accion:"PTC RECHAZADO",idDocumento:RegistroSeleccionado.idPtc,idUsuario:$scope.currentUser.id_usuario,idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}).$promise.then(function(resp){ControlProcesos.findById({id:resp.id,filter:{fields:["identificador"]}}).$promise.then(function(resp_control){swal({title:"PTC enviado",html:'se marc&oacute; el PTC como rechazado y se gener&oacute; el identificador del proceso <br><strong style="font-size: 13px;">'+resp_control.identificador+"</strong>",type:"success",showCancelButton:!1,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar"})})})})})}function agregaObserRevision(seleccion){var modalInstance=$modal.open({templateUrl:"app/components/ptc/revision-ptc/modal-edita-observaciones-curso.html",windowClass:"animated fadeIn",controller:"ModalEditaObserCursoController as vm",resolve:{registroEditar:function(){return seleccion}}});modalInstance.result.then(function(respuesta){seleccion.observacionesRevision=respuesta.observacionesRevision},function(){})}function calcula_horas_disponibles(){ProgTrimCursos.find({filter:{where:{and:[{idUnidadAdmtva:vm.unidadSeleccionada.idUnidadAdmtva},{anio:vm.anioSeleccionado.anio},{or:[{estatus:2},{estatus:4}]}]},fields:["idPtc","horasSeparadas","estatus"]}}).$promise.then(function(resp){var num_horas_separadas=0;angular.forEach(resp,function(registro){num_horas_separadas+=registro.horasSeparadas}),vm.horas_disponibles=vm.anioSeleccionado.horasAsignadas-num_horas_separadas})}var vm=this;vm.muestra_ptc_unidad=muestra_ptc_unidad,vm.muestra_ptc_unidad_anio=muestra_ptc_unidad_anio,vm.muestraCursosPTCActual=muestraCursosPTCActual,vm.cambiarPaginaPrincipal=cambiarPaginaPrincipal,vm.cambiarPaginaDetalle=cambiarPaginaDetalle,vm.aceptaPTC=aceptaPTC,vm.rechazaPTC=rechazaPTC,vm.agregaObserRevision=agregaObserRevision,vm.tablaListaPTCs={totalElementos:0,paginaActual:1,registrosPorPagina:5,inicio:0,fin:1,condicion:{estatus:{lt:4}},filtro_datos:{},fila_seleccionada:0},vm.listaAniosDisp=[],vm.anioSeleccionado=[],vm.horas_disponibles=0,vm.tablaListaPTCs.fila_seleccionada=void 0,vm.registrosPTCs=[],vm.RegistroPTCSeleccionado=[],vm.listaEstatus=[],vm.estatusSeleccionado=void 0,vm.listaUnidades=[],vm.unidadSeleccionada=void 0,vm.tablaListaCursos={totalElementos:0,paginaActual:1,registrosPorPagina:10,inicio:0,fin:1,condicion:{},filtro_datos:{},fila_seleccionada:0},vm.registrosCursosPTCs={},inicia()}angular.module("icat_control_escolar").controller("PrincipalRevisionPTCController",PrincipalRevisionPTCController),PrincipalRevisionPTCController.$inject=["$scope","$modal","$q","tablaDatosService","ProgTrimCursos","HorasAsignadasUnidad","CursosPtc","CatalogoUnidadesAdmtvas","ControlProcesos"]}(),function(){"use strict";function ModalEditaObserCursoController($scope,$modalInstance,registroEditar,CursosPtc){function inicia(){}function guardar(){CursosPtc.prototype$updateAttributes({id:vm.registroEdicion.idCursoPTC},{observacionesRevision:vm.registroEdicion.observacionesRevision}).$promise.then(function(respuesta){$modalInstance.close(vm.registroEdicion)}).catch(function(error){})}var vm=this;vm.registroEdicion={idCursoPTC:registroEditar.idCursoPTC,observacionesRevision:registroEditar.observacionesRevision},vm.guardar=guardar,inicia()}angular.module("icat_control_escolar").controller("ModalEditaObserCursoController",ModalEditaObserCursoController),ModalEditaObserCursoController.$inject=["$scope","$modalInstance","registroEditar","CursosPtc"]}(),function(){"use strict";function AdminInstructoresController($scope,$modal,tablaDatosService,CatalogoInstructores,CatalogoUnidadesAdmtvas){function inicia(){$scope.currentUser.unidad_pertenece_id>1?vm.tablaListaRegistros.condicion={idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}:(vm.tablaListaRegistros.condicion={},CatalogoUnidadesAdmtvas.find({filter:{where:{idUnidadAdmtva:{gt:1}},order:"nombre ASC"}}).$promise.then(function(resp){vm.listaUnidades.push({idUnidadAdmtva:-1,nombre:"Todas"}),angular.forEach(resp,function(unidad){vm.listaUnidades.push({idUnidadAdmtva:unidad.idUnidadAdmtva,nombre:unidad.nombre})}),vm.unidadSeleccionada=vm.listaUnidades[0]})),vm.tablaListaRegistros.filtro_datos={filter:{where:vm.tablaListaRegistros.condicion,order:["apellidoPaterno ASC","apellidoMaterno ASC","nombre ASC"],limit:vm.tablaListaRegistros.registrosPorPagina,skip:vm.tablaListaRegistros.paginaActual-1,include:["unidad_pertenece","localidad_pertenece",{relation:"evaluacion_curso",scope:{fields:["id","idInstructor","idCatalogoCurso","calificacion"],include:{relation:"CatalogoCursos",scope:{fields:["idCatalogoCurso","nombreCurso","modalidad"],order:["nombreCurso ASC"]}}}}]}},vm.registros={},vm.RegistroSeleccionado={},vm.tablaListaRegistros.fila_seleccionada=void 0,vm.client=1,tablaDatosService.obtiene_datos_tabla(CatalogoInstructores,vm.tablaListaRegistros).then(function(respuesta){vm.tablaListaRegistros.totalElementos=respuesta.total_registros,vm.tablaListaRegistros.inicio=respuesta.inicio,vm.tablaListaRegistros.fin=respuesta.fin,vm.tablaListaRegistros.totalElementos>0&&(vm.registros=respuesta.datos,vm.RegistroSeleccionado=vm.registros[0],vm.client=2,vm.tablaListaRegistros.fila_seleccionada=0,muestraDatosRegistroActual(vm.RegistroSeleccionado))})}function muestra_ptc_unidad(){vm.registros={},vm.RegistroSeleccionado={},vm.tablaListaRegistros.fila_seleccionada=void 0,vm.tablaListaRegistros.paginaActual=1,vm.tablaListaRegistros.inicio=0,vm.tablaListaRegistros.fin=1,vm.client=1,vm.mostrarbtnLimpiar=!1,vm.cadena_buscar="",vm.unidadSeleccionada.idUnidadAdmtva==-1?vm.tablaListaRegistros.condicion={}:vm.tablaListaRegistros.condicion={idUnidadAdmtva:vm.unidadSeleccionada.idUnidadAdmtva},tablaDatosService.obtiene_datos_tabla(CatalogoInstructores,vm.tablaListaRegistros).then(function(respuesta){vm.tablaListaRegistros.totalElementos=respuesta.total_registros,vm.tablaListaRegistros.inicio=respuesta.inicio,vm.tablaListaRegistros.fin=respuesta.fin,vm.tablaListaRegistros.totalElementos>0&&(vm.registros=respuesta.datos,vm.RegistroSeleccionado=vm.registros[0],vm.client=2,vm.tablaListaRegistros.fila_seleccionada=0,muestraDatosRegistroActual(vm.RegistroSeleccionado))})}function muestraResultadosBusqueda(){vm.registros={},vm.RegistroSeleccionado={},vm.tablaListaRegistros.fila_seleccionada=void 0,vm.client=1,vm.tablaListaRegistros.paginaActual=1,vm.tablaListaRegistros.inicio=0,vm.tablaListaRegistros.fin=1,$scope.currentUser.unidad_pertenece_id>1?vm.tablaListaRegistros.condicion={and:[{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},{or:[{apellidoPaterno:{regexp:"/.*"+vm.cadena_buscar+".*/i"}},{apellidoMaterno:{regexp:"/.*"+vm.cadena_buscar+".*/i"}},{nombre:{regexp:"/.*"+vm.cadena_buscar+".*/i"}}]}]}:vm.unidadSeleccionada.idUnidadAdmtva==-1?vm.tablaListaRegistros.condicion={or:[{apellidoPaterno:{regexp:"/.*"+vm.cadena_buscar+".*/i"}},{apellidoMaterno:{regexp:"/.*"+vm.cadena_buscar+".*/i"}},{nombre:{regexp:"/.*"+vm.cadena_buscar+".*/i"}}]}:vm.tablaListaRegistros.condicion={and:[{idUnidadAdmtva:vm.unidadSeleccionada.idUnidadAdmtva},{or:[{apellidoPaterno:{regexp:"/.*"+vm.cadena_buscar+".*/i"}},{apellidoMaterno:{regexp:"/.*"+vm.cadena_buscar+".*/i"}},{nombre:{regexp:"/.*"+vm.cadena_buscar+".*/i"}}]}]},tablaDatosService.obtiene_datos_tabla(CatalogoInstructores,vm.tablaListaRegistros).then(function(respuesta){vm.tablaListaRegistros.totalElementos=respuesta.total_registros,vm.tablaListaRegistros.inicio=respuesta.inicio,vm.tablaListaRegistros.fin=respuesta.fin,vm.tablaListaRegistros.totalElementos>0&&(vm.registros=respuesta.datos,vm.RegistroSeleccionado=vm.registros[0],vm.client=2,vm.tablaListaRegistros.fila_seleccionada=0,muestraDatosRegistroActual(vm.RegistroSeleccionado)),vm.mostrarbtnLimpiar=!0})}function limpiaBusqueda(){vm.registros={},vm.RegistroSeleccionado={},vm.tablaListaRegistros.fila_seleccionada=void 0,vm.client=1,vm.tablaListaRegistros.paginaActual=1,vm.tablaListaRegistros.inicio=0,vm.tablaListaRegistros.fin=1,$scope.currentUser.unidad_pertenece_id>1?vm.tablaListaRegistros.condicion={idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}:vm.unidadSeleccionada.idUnidadAdmtva==-1?vm.tablaListaRegistros.condicion={}:vm.tablaListaRegistros.condicion={idUnidadAdmtva:vm.unidadSeleccionada.idUnidadAdmtva},tablaDatosService.obtiene_datos_tabla(CatalogoInstructores,vm.tablaListaRegistros).then(function(respuesta){vm.tablaListaRegistros.totalElementos=respuesta.total_registros,vm.tablaListaRegistros.inicio=respuesta.inicio,vm.tablaListaRegistros.fin=respuesta.fin,vm.tablaListaRegistros.totalElementos>0&&(vm.registros=respuesta.datos,vm.RegistroSeleccionado=vm.registros[0],vm.client=2,vm.tablaListaRegistros.fila_seleccionada=0,muestraDatosRegistroActual(vm.RegistroSeleccionado)),vm.mostrarbtnLimpiar=!1,vm.cadena_buscar=""})}function cambiarPagina(){vm.tablaListaRegistros.totalElementos>0&&tablaDatosService.cambia_pagina(CatalogoInstructores,vm.tablaListaRegistros).then(function(respuesta){vm.tablaListaRegistros.inicio=respuesta.inicio,vm.tablaListaRegistros.fin=respuesta.fin,vm.registros=respuesta.datos,vm.RegistroSeleccionado=vm.registros[0],vm.client=2,vm.tablaListaRegistros.fila_seleccionada=0,muestraDatosRegistroActual(vm.RegistroSeleccionado)})}function muestraDatosRegistroActual(seleccion){var index=vm.registros.indexOf(seleccion);vm.RegistroSeleccionado=seleccion,vm.client=2,vm.tablaListaRegistros.fila_seleccionada=index}function edita_datos_registro(seleccion){var modalInstance=$modal.open({templateUrl:"app/components/instructores/modal-edita-instructor.html",windowClass:"animated fadeIn",controller:"ModalEditaInstructorController as vm",windowClass:"app-modal-window",resolve:{registroEditar:function(){return seleccion}}});modalInstance.result.then(function(respuesta){vm.RegistroSeleccionado.idUnidadAdmtva=respuesta.idUnidadAdmtva,vm.RegistroSeleccionado.curp=respuesta.curp,vm.RegistroSeleccionado.apellidoPaterno=respuesta.apellidoPaterno,vm.RegistroSeleccionado.apellidoMaterno=respuesta.apellidoMaterno,vm.RegistroSeleccionado.nombre=respuesta.nombre,vm.RegistroSeleccionado.rfc=respuesta.rfc,vm.RegistroSeleccionado.gradoAcademico=respuesta.gradoAcademico,vm.RegistroSeleccionado.telefono=respuesta.telefono,vm.RegistroSeleccionado.email=respuesta.email,vm.RegistroSeleccionado.escolaridad=respuesta.escolaridad,vm.RegistroSeleccionado.idLocalidad=respuesta.idLocalidad,vm.RegistroSeleccionado.activo=respuesta.activo,vm.RegistroSeleccionado.UnidadAdmtva=respuesta.UnidadAdmtva,vm.RegistroSeleccionado.localidad=respuesta.localidad,vm.RegistroSeleccionado.unidad_pertenece.UnidadAdmtva=respuesta.idUnidadAdmtva,vm.RegistroSeleccionado.unidad_pertenece.nombre=respuesta.UnidadAdmtva,vm.RegistroSeleccionado.localidad_pertenece.idLocalidad=respuesta.idLocalidad,vm.RegistroSeleccionado.localidad_pertenece.nombre=respuesta.localidad,respuesta.evaluacion_curso.length>0&&(vm.RegistroSeleccionado.evaluacion_curso=[],angular.forEach(respuesta.evaluacion_curso,function(record){vm.RegistroSeleccionado.evaluacion_curso.push({id:record.id,idInstructor:record.idInstructor,idCatalogoCurso:record.idCatalogoCurso,calificacion:record.calificacion,CatalogoCursos:{idCatalogoCurso:record.CatalogoCursos.idCatalogoCurso,nombreCurso:record.CatalogoCursos.nombreCurso,modalidad:record.CatalogoCursos.modalidad}})}))},function(){})}function nuevo_registro(){var modalInstance=$modal.open({templateUrl:"app/components/instructores/modal-edita-instructor.html",windowClass:"animated fadeIn",controller:"ModalNUevoInstructorController as vm",windowClass:"app-modal-window"});modalInstance.result.then(function(){vm.limpiaBusqueda()},function(){})}function elimina_registro(RegistroSeleccionado){CatalogoInstructores.cursos_propuestos.count({id:RegistroSeleccionado.idInstructor}).$promise.then(function(resultado){resultado.count>0?swal({title:"Error",html:"No se puede eliminar el instructor seleccionado porque tiene cursos asignados",type:"error",showCancelButton:!1,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar"}):swal({title:"Confirmar",html:"Se eliminar&aacute; al instructor <strong>"+RegistroSeleccionado.apellidoPaterno+" "+RegistroSeleccionado.apellidoMaterno+" "+RegistroSeleccionado.nombre+"</strong>, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),CatalogoInstructores.cursos_habilitados.destroyAll({id:RegistroSeleccionado.idInstructor}).$promise.then(function(){CatalogoInstructores.deleteById({id:RegistroSeleccionado.idInstructor}).$promise.then(function(){vm.limpiaBusqueda(),swal("Instructor eliminado","","success")})})})})}var vm=this;vm.listaUnidades=[],vm.unidadSeleccionada=void 0,vm.tablaListaRegistros={totalElementos:0,paginaActual:1,registrosPorPagina:5,inicio:0,fin:1,condicion:{},filtro_datos:{},fila_seleccionada:0},vm.muestra_ptc_unidad=muestra_ptc_unidad,vm.muestraDatosRegistroActual=muestraDatosRegistroActual,vm.muestraResultadosBusqueda=muestraResultadosBusqueda,vm.limpiaBusqueda=limpiaBusqueda,vm.cambiarPagina=cambiarPagina,vm.edita_datos_registro=edita_datos_registro,vm.nuevo_registro=nuevo_registro,vm.elimina_registro=elimina_registro,inicia()}angular.module("icat_control_escolar").controller("AdminInstructoresController",AdminInstructoresController),AdminInstructoresController.$inject=["$scope","$modal","tablaDatosService","CatalogoInstructores","CatalogoUnidadesAdmtvas"]}(),function(){"use strict";function ModalEditaInstructorController($scope,$modalInstance,registroEditar,CatalogoInstructores,CatalogoUnidadesAdmtvas,CatalogoLocalidades,CatalogoEspecialidades,CatalogoCursos){function inicia(){CatalogoUnidadesAdmtvas.find({filter:{fields:["idUnidadAdmtva","nombre"],order:"nombre ASC"}}).$promise.then(function(resp){vm.listaUnidades=resp;var index=vm.listaUnidades.map(function(record){return record.idUnidadAdmtva}).indexOf(vm.registroEdicion.idUnidadAdmtva);vm.unidadSeleccionada=vm.listaUnidades[index]}),CatalogoLocalidades.find({filter:{fields:["idLocalidad","nombre"],order:"nombre ASC"}}).$promise.then(function(resp){vm.listaLocalidades=resp;var index=vm.listaLocalidades.map(function(record){return record.idLocalidad}).indexOf(vm.registroEdicion.idLocalidad);vm.localidadSeleccionada=vm.listaLocalidades[index]}),CatalogoEspecialidades.find({filter:{fields:["idEspecialidad","nombre"],order:"nombre ASC"}}).$promise.then(function(resp){vm.listaEspecialidades=resp})}function muestraCursosEspecialidad(){vm.listaCursosInhabilit=!0,vm.cursoSeleccionado={},vm.listaCursos=[],CatalogoCursos.find({filter:{where:{idEspecialidad:vm.especialidadSeleccionada.idEspecialidad},fields:["idCatalogoCurso","nombreCurso","modalidad"],order:"nombreCurso ASC"}}).$promise.then(function(resp){vm.listaCursos=resp,vm.listaCursosInhabilit=!1,angular.forEach(vm.registroEdicion.cursos_habilitados,function(record){var index=vm.listaCursos.map(function(registro){return registro.idCatalogoCurso}).indexOf(record.idCatalogoCurso);index>=0&&vm.listaCursos.splice(index,1)})})}function agregaCurso(){vm.cursos_habilitados.push({idCatalogoCurso:vm.cursoSeleccionado.idCatalogoCurso,nombreCurso:vm.cursoSeleccionado.nombreCurso,modalidad:vm.cursoSeleccionado.modalidad,calificacion:0}),vm.cursoSeleccionado={},angular.forEach(vm.cursos_habilitados,function(record){var index=vm.listaCursos.map(function(registro){return registro.idCatalogoCurso}).indexOf(record.idCatalogoCurso);index>=0&&vm.listaCursos.splice(index,1)})}function eliminaRegistro(seleccion){var indice=vm.cursos_habilitados.indexOf(seleccion);vm.cursos_habilitados.splice(indice,1),vm.muestraCursosEspecialidad()}function guardar(){vm.mostrarSpiner=!0;var datos={idUnidadAdmtva:vm.unidadSeleccionada.idUnidadAdmtva,curp:vm.registroEdicion.curp,apellidoPaterno:vm.registroEdicion.apellidoPaterno,apellidoMaterno:vm.registroEdicion.apellidoMaterno,nombre:vm.registroEdicion.nombre,rfc:vm.registroEdicion.rfc,gradoAcademico:vm.registroEdicion.gradoAcademico,telefono:vm.registroEdicion.telefono,email:vm.registroEdicion.email,escolaridad:vm.registroEdicion.escolaridad,idLocalidad:vm.localidadSeleccionada.idLocalidad,activo:vm.registroEdicion.activo};vm.registroEdicion.UnidadAdmtva=vm.unidadSeleccionada.nombre,vm.registroEdicion.localidad=vm.localidadSeleccionada.nombre,CatalogoInstructores.prototype$updateAttributes({id:vm.registroEdicion.idInstructor},datos).$promise.then(function(respuesta){CatalogoInstructores.cursos_habilitados.destroyAll({id:vm.registroEdicion.idInstructor}).$promise.then(function(){if(vm.cursos_habilitados.length>0){var totalregistros=0;angular.forEach(vm.cursos_habilitados,function(record){CatalogoInstructores.cursos_habilitados.link({id:vm.registroEdicion.idInstructor,fk:record.idCatalogoCurso},{calificacion:record.calificacion}).$promise.then(function(resp){var index=vm.cursos_habilitados.map(function(registro){return registro.idCatalogoCurso}).indexOf(resp.idCatalogoCurso);vm.registroEdicion.evaluacion_curso.push({id:resp.id,idInstructor:resp.idInstructor,idCatalogoCurso:resp.idCatalogoCurso,calificacion:resp.calificacion,CatalogoCursos:{idCatalogoCurso:resp.idCatalogoCurso,nombreCurso:vm.cursos_habilitados[index].nombreCurso,modalidad:vm.cursos_habilitados[index].modalidad}}),totalregistros++,totalregistros==vm.cursos_habilitados.length&&$modalInstance.close(vm.registroEdicion)})})}else $modalInstance.close(vm.registroEdicion)})}).catch(function(error){})}var vm=this;vm.guardar=guardar,vm.muestraCursosEspecialidad=muestraCursosEspecialidad,vm.agregaCurso=agregaCurso,vm.eliminaRegistro=eliminaRegistro,vm.mostrarSpiner=!1,vm.listaUnidades={},vm.unidadSeleccionada={},vm.listaLocalidades={},vm.localidadSeleccionada={},vm.listaEspecialidades={},vm.especialidadSeleccionada={},vm.listaCursosInhabilit=!0,vm.cursoSeleccionado={},vm.listaCursos=[],vm.registroEdicion={idInstructor:registroEditar.idInstructor,idUnidadAdmtva:registroEditar.idUnidadAdmtva,UnidadAdmtva:"",curp:registroEditar.curp,apellidoPaterno:registroEditar.apellidoPaterno,apellidoMaterno:registroEditar.apellidoMaterno,nombre:registroEditar.nombre,rfc:registroEditar.rfc,gradoAcademico:registroEditar.gradoAcademico,telefono:registroEditar.telefono,email:registroEditar.email,escolaridad:registroEditar.escolaridad,idLocalidad:registroEditar.idLocalidad,localidad:"",activo:registroEditar.activo,evaluacion_curso:[]},vm.cursos_habilitados=[],angular.forEach(registroEditar.evaluacion_curso,function(record){vm.cursos_habilitados.push({idCatalogoCurso:record.CatalogoCursos.idCatalogoCurso,nombreCurso:record.CatalogoCursos.nombreCurso,modalidad:record.CatalogoCursos.modalidad,calificacion:record.calificacion})}),inicia()}angular.module("icat_control_escolar").controller("ModalEditaInstructorController",ModalEditaInstructorController),ModalEditaInstructorController.$inject=["$scope","$modalInstance","registroEditar","CatalogoInstructores","CatalogoUnidadesAdmtvas","CatalogoLocalidades","CatalogoEspecialidades","CatalogoCursos"]}(),function(){"use strict";function ModalNUevoInstructorController($scope,$modalInstance,CatalogoInstructores,CatalogoUnidadesAdmtvas,CatalogoLocalidades,CatalogoEspecialidades,CatalogoCursos){function inicia(){CatalogoUnidadesAdmtvas.find({filter:{fields:["idUnidadAdmtva","nombre"],order:"nombre ASC"}}).$promise.then(function(resp){if(vm.listaUnidades=resp,$scope.currentUser.unidad_pertenece_id>1){var index=vm.listaUnidades.map(function(record){return record.idUnidadAdmtva}).indexOf($scope.currentUser.unidad_pertenece_id);vm.unidadSeleccionada=vm.listaUnidades[index]}}),CatalogoLocalidades.find({filter:{fields:["idLocalidad","nombre"],order:"nombre ASC"}}).$promise.then(function(resp){vm.listaLocalidades=resp}),CatalogoEspecialidades.find({filter:{fields:["idEspecialidad","nombre"],order:"nombre ASC"}}).$promise.then(function(resp){vm.listaEspecialidades=resp})}function muestraCursosEspecialidad(){vm.listaCursosInhabilit=!0,vm.cursoSeleccionado={},vm.listaCursos=[],CatalogoCursos.find({filter:{where:{idEspecialidad:vm.especialidadSeleccionada.idEspecialidad},fields:["idCatalogoCurso","nombreCurso","modalidad"],order:"nombreCurso ASC"}}).$promise.then(function(resp){vm.listaCursos=resp,vm.listaCursosInhabilit=!1,angular.forEach(vm.registroEdicion.cursos_habilitados,function(record){var index=vm.listaCursos.map(function(registro){return registro.idCatalogoCurso}).indexOf(record.idCatalogoCurso);index>=0&&vm.listaCursos.splice(index,1)})})}function agregaCurso(){vm.cursos_habilitados.push({idCatalogoCurso:vm.cursoSeleccionado.idCatalogoCurso,nombreCurso:vm.cursoSeleccionado.nombreCurso,modalidad:vm.cursoSeleccionado.modalidad,calificacion:0}),vm.cursoSeleccionado={},angular.forEach(vm.cursos_habilitados,function(record){var index=vm.listaCursos.map(function(registro){return registro.idCatalogoCurso}).indexOf(record.idCatalogoCurso);index>=0&&vm.listaCursos.splice(index,1)})}function eliminaRegistro(seleccion){var indice=vm.cursos_habilitados.indexOf(seleccion);vm.cursos_habilitados.splice(indice,1),vm.muestraCursosEspecialidad()}function guardar(){vm.mostrarSpiner=!0,vm.registroEdicion.UnidadAdmtva=vm.unidadSeleccionada.nombre,vm.registroEdicion.localidad=vm.localidadSeleccionada.nombre,CatalogoInstructores.create({idUnidadAdmtva:vm.unidadSeleccionada.idUnidadAdmtva,curp:vm.registroEdicion.curp,apellidoPaterno:vm.registroEdicion.apellidoPaterno,apellidoMaterno:vm.registroEdicion.apellidoMaterno,nombre:vm.registroEdicion.nombre,rfc:vm.registroEdicion.rfc,gradoAcademico:vm.registroEdicion.gradoAcademico,telefono:vm.registroEdicion.telefono,email:vm.registroEdicion.email,escolaridad:vm.registroEdicion.escolaridad,idLocalidad:vm.localidadSeleccionada.idLocalidad,activo:vm.registroEdicion.activo}).$promise.then(function(respuesta){if(vm.cursos_habilitados.length>0){var totalregistros=0;angular.forEach(vm.cursos_habilitados,function(record){CatalogoInstructores.cursos_habilitados.link({id:respuesta.idInstructor,fk:record.idCatalogoCurso},{calificacion:record.calificacion}).$promise.then(function(){totalregistros++,totalregistros==vm.cursos_habilitados.length&&$modalInstance.close()})})}else $modalInstance.close()}).catch(function(error){})}var vm=this;vm.guardar=guardar,vm.muestraCursosEspecialidad=muestraCursosEspecialidad,vm.agregaCurso=agregaCurso,vm.eliminaRegistro=eliminaRegistro,vm.mostrarSpiner=!1,vm.listaUnidades={},vm.unidadSeleccionada={},vm.listaLocalidades={},vm.localidadSeleccionada={},vm.listaEspecialidades={},vm.especialidadSeleccionada={},vm.listaCursosInhabilit=!0,vm.cursoSeleccionado={},vm.listaCursos=[],vm.registroEdicion={idInstructor:"",idUnidadAdmtva:0,curp:"",apellidoPaterno:"",apellidoMaterno:"",nombre:"",rfc:"",gradoAcademico:"",telefono:"",email:"",escolaridad:"",idLocalidad:0,activo:!0,evaluacion_curso:[]},vm.cursos_habilitados=[],inicia()}angular.module("icat_control_escolar").controller("ModalNUevoInstructorController",ModalNUevoInstructorController),ModalNUevoInstructorController.$inject=["$scope","$modalInstance","CatalogoInstructores","CatalogoUnidadesAdmtvas","CatalogoLocalidades","CatalogoEspecialidades","CatalogoCursos"]}(),function(){"use strict";function PTCAutorizadosController($scope,$modal,$q,tablaDatosService,HorasAsignadasUnidad,ProgTrimCursos,CursosPtc,CursosOficiales,CatalogoUnidadesAdmtvas,ControlProcesos){function inicia(){vm.tablaListaPTCs.filtro_datos={filter:{where:vm.tablaListaPTCs.condicion,order:["idUnidadAdmtva ASC","anio DESC","trimestre DESC"],limit:vm.tablaListaPTCs.registrosPorPagina,skip:vm.tablaListaPTCs.paginaActual-1,include:["unidad_pertenece",{relation:"cursos_programados",scope:{fields:["idCursoPTC"]}},{relation:"cursos_no_programados",scope:{where:{programadoPTC:!1},fields:["idCurso"]}}]}},vm.tablaListaCursos.filtro_datos={filter:{where:vm.tablaListaCursos.condicion,order:["fechaInicio ASC"],limit:vm.tablaListaCursos.registrosPorPagina,skip:vm.tablaListaCursos.paginaActual-1,include:[{relation:"detalle_curso",scope:{fields:["nombreCurso","modalidad"]}},{relation:"instructores_propuestos",scope:{fields:["apellidoPaterno","apellidoMaterno","nombre"],order:["apellidoPaterno ASC","apellidoMaterno ASC","nombre ASC"]}},{relation:"curso_oficial_registrado",scope:{where:{estatus:{gt:0}},fields:["idCurso","idLocalidad","nombreCurso","claveCurso","modalidad","horario","aulaAsignada","numeroHoras","costo","cupoMaximo","minRequeridoInscritos","minRequeridoPago","fechaInicio","fechaFin","nombreInstructor","observaciones","estatus","publico"]}}]}},vm.tablaListaCursosExtra.filtro_datos={filter:{where:vm.tablaListaCursosExtra.condicion,order:["nombreCurso ASC"],limit:vm.tablaListaCursosExtra.registrosPorPagina,skip:vm.tablaListaCursosExtra.paginaActual-1,fields:["idCurso","idLocalidad","nombreCurso","claveCurso","modalidad","horario","aulaAsignada","numeroHoras","costo","cupoMaximo","minRequeridoInscritos","minRequeridoPago","fechaInicio","fechaFin","nombreInstructor","observaciones","estatus","publico"]}},$scope.currentUser.unidad_pertenece_id>1?(vm.unidadSeleccionada={idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id,nombre:$scope.currentUser.nombre_unidad
},vm.tablaListaPTCs.condicion={and:[{or:[{estatus:2},{estatus:4}]},{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}]},vm.muestra_ptc_unidad()):(vm.tablaListaPTCs.condicion={or:[{estatus:2},{estatus:4}]},CatalogoUnidadesAdmtvas.find({filter:{where:{idUnidadAdmtva:{gt:1}},order:"nombre ASC"}}).$promise.then(function(resp){vm.listaUnidades=resp}))}function muestra_ptc_unidad(){vm.registrosPTCs={},vm.RegistroPTCSeleccionado={},vm.tablaListaPTCs.fila_seleccionada=void 0,vm.client=1,vm.tablaListaPTCs.paginaActual=1,vm.tablaListaPTCs.inicio=0,vm.tablaListaPTCs.fin=1,vm.registrosCursosPTCs={},vm.tablaListaCursos.totalElementos=0,vm.tablaListaCursos.paginaActual=1,vm.tablaListaCursos.inicio=-1,vm.tablaListaCursos.fin=0,vm.anioSeleccionado=[],vm.listaAniosDisp=[];var fechaHoy=new Date;HorasAsignadasUnidad.find({filter:{where:{and:[{idUnidadAdmtva:vm.unidadSeleccionada.idUnidadAdmtva},{anio:{gte:fechaHoy.getFullYear()}}]},fields:["id","anio","horasAsignadas"],order:"anio DESC"}}).$promise.then(function(resp){vm.listaAniosDisp=resp,vm.listaAniosDisp.length>0?(vm.anioSeleccionado=vm.listaAniosDisp[0],vm.tablaListaPTCs.condicion={and:[{anio:vm.anioSeleccionado.anio},{idUnidadAdmtva:vm.unidadSeleccionada.idUnidadAdmtva},{or:[{estatus:2},{estatus:4}]}]},tablaDatosService.obtiene_datos_tabla(ProgTrimCursos,vm.tablaListaPTCs).then(function(respuesta){vm.tablaListaPTCs.totalElementos=respuesta.total_registros,vm.tablaListaPTCs.inicio=respuesta.inicio,vm.tablaListaPTCs.fin=respuesta.fin,vm.tablaListaPTCs.totalElementos>0&&(vm.registrosPTCs=respuesta.datos,vm.RegistroPTCSeleccionado=vm.registrosPTCs[0],vm.client=2,vm.tablaListaPTCs.fila_seleccionada=0,muestraCursosPTCActual(vm.RegistroPTCSeleccionado))})):(vm.tablaListaPTCs.totalElementos=0,vm.tablaListaPTCs.inicio=-1,vm.tablaListaPTCs.fin=0)})}function muestra_ptc_unidad_anio(){vm.registrosPTCs={},vm.RegistroPTCSeleccionado={},vm.tablaListaPTCs.fila_seleccionada=void 0,vm.client=1,vm.tablaListaPTCs.paginaActual=1,vm.tablaListaPTCs.inicio=0,vm.tablaListaPTCs.fin=1,vm.registrosCursosPTCs={},vm.tablaListaCursos.totalElementos=0,vm.tablaListaCursos.paginaActual=1,vm.tablaListaCursos.inicio=-1,vm.tablaListaCursos.fin=0,vm.tablaListaPTCs.condicion={and:[{anio:vm.anioSeleccionado.anio},{idUnidadAdmtva:vm.unidadSeleccionada.idUnidadAdmtva},{or:[{estatus:2},{estatus:4}]}]},tablaDatosService.obtiene_datos_tabla(ProgTrimCursos,vm.tablaListaPTCs).then(function(respuesta){vm.tablaListaPTCs.totalElementos=respuesta.total_registros,vm.tablaListaPTCs.inicio=respuesta.inicio,vm.tablaListaPTCs.fin=respuesta.fin,vm.tablaListaPTCs.totalElementos>0&&(vm.registrosPTCs=respuesta.datos,vm.RegistroPTCSeleccionado=vm.registrosPTCs[0],vm.client=2,vm.tablaListaPTCs.fila_seleccionada=0,muestraCursosPTCActual(vm.RegistroPTCSeleccionado))})}function cambiarPaginaPrincipal(){vm.tablaListaPTCs.totalElementos>0&&tablaDatosService.cambia_pagina(ProgTrimCursos,vm.tablaListaPTCs).then(function(respuesta){vm.tablaListaPTCs.inicio=respuesta.inicio,vm.tablaListaPTCs.fin=respuesta.fin,vm.registrosPTCs=respuesta.datos,vm.RegistroPTCSeleccionado=vm.registrosPTCs[0],vm.client=2,vm.tablaListaPTCs.fila_seleccionada=0,muestraCursosPTCActual(vm.RegistroPTCSeleccionado)})}function cambiarPaginaDetalle(){vm.tablaListaCursos.totalElementos>0&&tablaDatosService.cambia_pagina(CursosPtc,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.registrosCursosPTCs=respuesta.datos})}function muestraCursosPTCActual(seleccion){var index=vm.registrosPTCs.indexOf(seleccion);vm.RegistroPTCSeleccionado=seleccion,vm.tablaListaPTCs.fila_seleccionada=index,vm.client=1,vm.tablaListaCursos.paginaActual=1,vm.tablaListaCursos.inicio=0,vm.tablaListaCursos.fin=1,vm.tablaListaCursos.condicion={idPtc:seleccion.idPtc},vm.registrosCursosPTCs=[],tablaDatosService.obtiene_datos_tabla(CursosPtc,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.totalElementos=respuesta.total_registros,vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.tablaListaCursos.totalElementos>0&&(vm.client=2,vm.icono="",angular.forEach(respuesta.datos,function(registro){vm.registrosCursosPTCs.push({idCursoPTC:registro.idCursoPTC,nombreCurso:registro.detalle_curso.nombreCurso,modalidad:registro.detalle_curso.modalidad,horario:registro.horario,aulaAsignada:registro.aulaAsignada,capacitandos:registro.capacitandos,semanas:registro.semanas,total:registro.total,fechaInicio:registro.fechaInicio,fechaFin:registro.fechaFin,instructores_propuestos:registro.instructores_propuestos,observaciones:registro.observaciones,showChild:!1,curso_oficial_registrado:registro.curso_oficial_registrado})}))}),vm.tablaListaCursosExtra.condicion={and:[{idPtc:seleccion.idPtc},{programadoPTC:!1},{estatus:{gt:0}}]},vm.registrosCursosExtras=[],tablaDatosService.obtiene_datos_tabla(CursosOficiales,vm.tablaListaCursosExtra).then(function(respuesta){vm.tablaListaCursosExtra.totalElementos=respuesta.total_registros,vm.tablaListaCursosExtra.inicio=respuesta.inicio,vm.tablaListaCursosExtra.fin=respuesta.fin,vm.tablaListaCursosExtra.totalElementos>0&&(vm.registrosCursosExtras=respuesta.datos)})}function abreDocPTC(seleccion){var link=angular.element('<a href="api/ProgTrimCursos/exporta_doc_ptc/'+seleccion.idPtc+'" target="_blank"></a>');angular.element(document.body).append(link),link[0].click(),link.remove()}function muestraCursoPreapertura(registro){registro.showChild=!registro.showChild,1==registro.showChild?vm.icono="-slash":vm.icono=""}var vm=this;vm.muestra_ptc_unidad=muestra_ptc_unidad,vm.muestra_ptc_unidad_anio=muestra_ptc_unidad_anio,vm.muestraCursosPTCActual=muestraCursosPTCActual,vm.cambiarPaginaPrincipal=cambiarPaginaPrincipal,vm.cambiarPaginaDetalle=cambiarPaginaDetalle,vm.muestraCursoPreapertura=muestraCursoPreapertura,vm.abreDocPTC=abreDocPTC,vm.tablaListaPTCs={totalElementos:0,paginaActual:1,registrosPorPagina:5,inicio:0,fin:1,condicion:{or:[{estatus:2},{estatus:4}]},filtro_datos:{},fila_seleccionada:0},vm.tablaListaPTCs.fila_seleccionada=void 0,vm.registrosPTCs={},vm.RegistroPTCSeleccionado={},vm.listaAniosDisp=[],vm.anioSeleccionado=[],vm.listaUnidades=[],vm.unidadSeleccionada=void 0,vm.tablaListaCursos={totalElementos:0,paginaActual:1,registrosPorPagina:5,inicio:0,fin:1,condicion:{},filtro_datos:{},fila_seleccionada:0},vm.registrosCursosPTCs={},vm.icono="",vm.tablaListaCursosExtra={totalElementos:0,paginaActual:1,registrosPorPagina:5,inicio:0,fin:1,condicion:{},filtro_datos:{},fila_seleccionada:0},vm.registrosCursosExtras={},inicia()}angular.module("icat_control_escolar").controller("PTCAutorizadosController",PTCAutorizadosController),PTCAutorizadosController.$inject=["$scope","$modal","$q","tablaDatosService","HorasAsignadasUnidad","ProgTrimCursos","CursosPtc","CursosOficiales","CatalogoUnidadesAdmtvas","ControlProcesos"]}(),function(){"use strict";function PreAperturaCursoPTCController($scope,$modal,tablaDatosService,ProgTrimCursos,CursosPtc,CursosOficiales,ControlProcesos){function inicia(){ProgTrimCursos.find({filter:{where:{and:[{and:[{estatus:2}]},{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}]},fields:["idPtc","anio","trimestre"],order:["anio DESC","trimestre DESC"]}}).$promise.then(function(resp){angular.forEach(resp,function(registro){var trimestres=["PRIMER TRIMESTRE","SEGUNDO TRIMESTRE","TERCER TRIMESTRE","CUARTO TRIMESTRE"];vm.listaPTCautorizados.push({idPtc:registro.idPtc,anio:registro.anio,trimestretxt:trimestres[registro.trimestre-1]})})}),vm.tablaListaCursos.filtro_datos={filter:{where:vm.tablaListaCursos.condicion,order:["fechaInicio ASC"],limit:vm.tablaListaCursos.registrosPorPagina,skip:vm.tablaListaCursos.paginaActual-1,include:[{relation:"detalle_curso",scope:{fields:["nombreCurso","modalidad","claveCurso","descripcion"]}},{relation:"instructores_propuestos",scope:{fields:["apellidoPaterno","apellidoMaterno","nombre","curp"],order:["apellidoPaterno ASC","apellidoMaterno ASC","nombre ASC"]}},{relation:"curso_oficial_registrado",scope:{fields:["idCurso","idLocalidad","nombreCurso","claveCurso","modalidad","horario","aulaAsignada","horasSemana","numeroHoras","costo","cupoMaximo","minRequeridoInscritos","minRequeridoPago","fechaInicio","fechaFin","idInstructor","nombreInstructor","observaciones","estatus","publico"],include:{relation:"localidad_pertenece",scope:{fields:["nombre"]}}}}]}}}function muestraCursosPTCseleccionado(){vm.client=1,vm.tablaListaCursos.paginaActual=1,vm.tablaListaCursos.inicio=0,vm.tablaListaCursos.fin=1,vm.tablaListaCursos.condicion={idPtc:vm.PTCSeleccionado.idPtc},vm.registrosCursosPTCs={},tablaDatosService.obtiene_datos_tabla(CursosPtc,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.totalElementos=respuesta.total_registros,vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.tablaListaCursos.totalElementos>0&&(vm.registrosCursosPTCs=respuesta.datos,vm.CursoPTCSeleccionado=vm.registrosCursosPTCs[0],vm.client=2,vm.tablaListaCursos.fila_seleccionada=0,muestraDatosRegistroActual(vm.CursoPTCSeleccionado))})}function muestraDatosRegistroActual(seleccion){var index=vm.registrosCursosPTCs.indexOf(seleccion);vm.CursoPTCSeleccionado=seleccion,vm.client=2,vm.tablaListaCursos.fila_seleccionada=index,vm.CursoPTCSeleccionado.curso_oficial_registrado.length>0?vm.tabs=[{active:!0},{active:!1}]:vm.tabs=[{active:!1},{active:!0}]}function cambiarPagina(){vm.tablaListaCursos.totalElementos>0&&tablaDatosService.cambia_pagina(CursosPtc,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.registrosCursosPTCs=respuesta.datos,vm.CursoPTCSeleccionado=vm.registrosCursosPTCs[0],vm.client=2,vm.tablaListaCursos.fila_seleccionada=0,muestraDatosRegistroActual(vm.CursoPTCSeleccionado)})}function abreCurso(seleccion){var modalInstance=$modal.open({templateUrl:"app/components/preapertura-cursos/cursos-ptc/modal-apertura-curso.html",windowClass:"animated fadeIn",controller:"ModalAperturaCursoController as vm",windowClass:"app-modal-window",resolve:{registroEditar:function(){return seleccion}}});modalInstance.result.then(function(respuesta){swal({title:"Curso creado",html:"EL curso <strong>"+respuesta.nombreCurso+"</strong> se registr&oacute; como un curso pendiente de validaci&oacute;n de apertura",type:"success",showCancelButton:!1,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar"}),vm.CursoPTCSeleccionado.estatus=respuesta.estatusCursoPTC,vm.CursoPTCSeleccionado.curso_oficial_registrado=[{idCurso:respuesta.idCurso,nombreCurso:respuesta.nombreCurso,modalidad:respuesta.modalidad,horario:respuesta.horario,aulaAsignada:respuesta.aulaAsignada,cupoMaximo:respuesta.capacitandos,minRequeridoInscritos:respuesta.min_requerido_inscritos,minRequeridoPago:respuesta.min_requerido_pago,fechaInicio:respuesta.fechaInicio,fechaFin:respuesta.fechaFin,idInstructor:respuesta.idInstructor,nombreInstructor:respuesta.nombreInstructor,observaciones:respuesta.observaciones,idLocalidad:respuesta.idLocalidad,horasSemana:respuesta.semanas,numeroHoras:respuesta.total,costo:respuesta.costo,publico:respuesta.publico,localidad_pertenece:{idLocalidad:respuesta.idLocalidad,nombre:respuesta.nombreLocalidad}}],vm.tabs=[{active:!0},{active:!1}]},function(){})}function editaCurso(seleccion){var modalInstance=$modal.open({templateUrl:"app/components/preapertura-cursos/cursos-ptc/modal-apertura-curso.html",windowClass:"animated fadeIn",controller:"ModalEditaAperturaCursoController as vm",windowClass:"app-modal-window",resolve:{registroEditar:function(){return seleccion}}});modalInstance.result.then(function(respuesta){vm.CursoPTCSeleccionado.curso_oficial_registrado[0].horario=respuesta.horario,vm.CursoPTCSeleccionado.curso_oficial_registrado[0].aulaAsignada=respuesta.aulaAsignada,vm.CursoPTCSeleccionado.curso_oficial_registrado[0].cupoMaximo=respuesta.capacitandos,vm.CursoPTCSeleccionado.curso_oficial_registrado[0].minRequeridoInscritos=respuesta.min_requerido_inscritos,vm.CursoPTCSeleccionado.curso_oficial_registrado[0].minRequeridoPago=respuesta.min_requerido_pago,vm.CursoPTCSeleccionado.curso_oficial_registrado[0].fechaInicio=respuesta.fechaInicio,vm.CursoPTCSeleccionado.curso_oficial_registrado[0].fechaFin=respuesta.fechaFin,vm.CursoPTCSeleccionado.curso_oficial_registrado[0].idInstructor=respuesta.idInstructor,vm.CursoPTCSeleccionado.curso_oficial_registrado[0].nombreInstructor=respuesta.nombreInstructor,vm.CursoPTCSeleccionado.curso_oficial_registrado[0].observaciones=respuesta.observaciones,vm.CursoPTCSeleccionado.curso_oficial_registrado[0].idLocalidad=respuesta.idLocalidad,vm.CursoPTCSeleccionado.curso_oficial_registrado[0].horasSemana=respuesta.semanas,vm.CursoPTCSeleccionado.curso_oficial_registrado[0].numeroHoras=respuesta.total,vm.CursoPTCSeleccionado.curso_oficial_registrado[0].costo=respuesta.costo,vm.CursoPTCSeleccionado.curso_oficial_registrado[0].publico=respuesta.publico,vm.CursoPTCSeleccionado.curso_oficial_registrado[0].localidad_pertenece.idLocalidad=respuesta.idLocalidad,vm.CursoPTCSeleccionado.curso_oficial_registrado[0].localidad_pertenece.nombre=respuesta.nombreLocalidad},function(){})}function enviaCursoRevision(seleccion){swal({title:"Confirmar",html:"La propuesta del curso <strong>"+seleccion.curso_oficial_registrado[0].nombreCurso+"</strong> ser&aacute; enviada a validaci&oacute;n, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),CursosPtc.prototype$updateAttributes({id:seleccion.idCursoPTC},{estatus:3}).$promise.then(function(respuesta){vm.CursoPTCSeleccionado.estatus=respuesta.estatus,CursosOficiales.prototype$updateAttributes({id:seleccion.curso_oficial_registrado[0].idCurso},{estatus:1}).$promise.then(function(resp){ControlProcesos.create({proceso:"Pre-Apertura Curso PTC",accion:"ENVIO VALIDACION",idDocumento:seleccion.curso_oficial_registrado[0].idCurso,idUsuario:$scope.currentUser.id_usuario,idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}).$promise.then(function(resp){ControlProcesos.findById({id:resp.id,filter:{fields:["identificador"]}}).$promise.then(function(resp_control){swal({title:"PTC enviado",html:'se env&iacute;o el curso a validaci&oacute;n y se gener&oacute; el identificador de proceso <br><strong style="font-size: 13px;">'+resp_control.identificador+"</strong>",type:"success",showCancelButton:!1,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar"})})})})})})}function eliminaCurso(seleccion){swal({title:"Confirmar",html:"Se eliminar&aacute; la propuesta de pre-apertura del curso <strong>"+seleccion.curso_oficial_registrado[0].nombreCurso+"</strong>, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),CursosPtc.prototype$updateAttributes({id:seleccion.idCursoPTC},{estatus:0}).$promise.then(function(respuesta){vm.CursoPTCSeleccionado.estatus=respuesta.estatus,CursosOficiales.deleteById({id:seleccion.curso_oficial_registrado[0].idCurso}).$promise.then(function(){vm.muestraCursosPTCseleccionado(),swal("Curso de pre-apertura eliminado","","success")})})})}var vm=this;vm.muestraCursosPTCseleccionado=muestraCursosPTCseleccionado,vm.muestraDatosRegistroActual=muestraDatosRegistroActual,vm.cambiarPagina=cambiarPagina,vm.editaCurso=editaCurso,vm.abreCurso=abreCurso,vm.enviaCursoRevision=enviaCursoRevision,vm.eliminaCurso=eliminaCurso,vm.listaPTCautorizados=[],vm.PTCSeleccionado={},vm.tabs=[{active:!0},{active:!1}],vm.tablaListaCursos={totalElementos:0,paginaActual:1,registrosPorPagina:5,inicio:0,fin:1,condicion:{},filtro_datos:{},fila_seleccionada:0},vm.registrosCursosPTCs={},vm.CursoPTCSeleccionado={},inicia()}angular.module("icat_control_escolar").controller("PreAperturaCursoPTCController",PreAperturaCursoPTCController),PreAperturaCursoPTCController.$inject=["$scope","$modal","tablaDatosService","ProgTrimCursos","CursosPtc","CursosOficiales","ControlProcesos"]}(),function(){"use strict";function ModalAperturaCursoController($scope,$timeout,$modalInstance,registroEditar,CursosPtc,CatalogoCursos,CatalogoInstructores,CatalogoLocalidades,CursosOficiales){function inicia(){CatalogoCursos.instructores_habilitados({id:registroEditar.idCatalogoCurso,filter:{where:{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},fields:["idInstructor","apellidoPaterno","apellidoMaterno","nombre"]}}).$promise.then(function(resp){angular.forEach(resp,function(record){vm.listaInstructores.push({idInstructor:record.idInstructor,apellidoPaterno:record.apellidoPaterno,apellidoMaterno:record.apellidoMaterno,nombre:record.nombre,nombre_completo:record.apellidoPaterno+" "+record.apellidoMaterno+" "+record.nombre})}),vm.listaInstructores.sort(sort_by("nombre_completo",!1,function(a){return a.toUpperCase()}));var index;angular.forEach(vm.registroEdicion.instructores_propuestos,function(record){index=vm.listaInstructores.map(function(instructor){return instructor.idInstructor}).indexOf(record.idInstructor),index>=0&&vm.listaInstructores.splice(index,1)})}),CatalogoLocalidades.find({filter:{fields:["idLocalidad","nombre"],order:"nombre ASC"}}).$promise.then(function(resp){vm.listaLocalidades=resp})}function sort_by(field,reverse,primer){var key=primer?function(x){return primer(x[field])}:function(x){return x[field]};return reverse=reverse?-1:1,function(a,b){return a=key(a),b=key(b),reverse*((a>b)-(b>a))}}function openCalendar1($event){$event.preventDefault(),$event.stopPropagation(),vm.opened1=!0}function openCalendar2($event){$event.preventDefault(),$event.stopPropagation(),vm.opened2=!0}function agregaInstructor(){if(vm.listaInstructores.length>0){vm.registroEdicion.instructores_propuestos.push({idInstructor:vm.instructorSeleccionado.idInstructor,apellidoPaterno:vm.instructorSeleccionado.apellidoPaterno,apellidoMaterno:vm.instructorSeleccionado.apellidoMaterno,nombre:vm.instructorSeleccionado.nombre,nombre_completo:vm.instructorSeleccionado.apellidoPaterno+" "+vm.instructorSeleccionado.apellidoMaterno+" "+vm.instructorSeleccionado.nombre});var index;angular.forEach(vm.registroEdicion.instructores_propuestos,function(record){index=vm.listaInstructores.map(function(instructor){return instructor.idInstructor}).indexOf(record.idInstructor),index>=0&&vm.listaInstructores.splice(index,1)}),vm.instructorSeleccionado={}}}function eliminaInstructor(indice){vm.listaInstructores.push({idInstructor:vm.registroEdicion.instructores_propuestos[indice].idInstructor,apellidoPaterno:vm.registroEdicion.instructores_propuestos[indice].apellidoPaterno,apellidoMaterno:vm.registroEdicion.instructores_propuestos[indice].apellidoMaterno,nombre:vm.registroEdicion.instructores_propuestos[indice].nombre,nombre_completo:vm.registroEdicion.instructores_propuestos[indice].apellidoPaterno+" "+vm.registroEdicion.instructores_propuestos[indice].apellidoMaterno+" "+vm.registroEdicion.instructores_propuestos[indice].nombre}),vm.registroEdicion.instructores_propuestos.splice(indice,1),vm.instructorSeleccionado={}}function guardar(){return 0==vm.radioidInstructorSeleccionado?(vm.mostrar_msg_error=!0,void $timeout(function(){vm.mostrar_msg_error=!1},3e3)):(vm.mostrarSpiner=!0,void CursosPtc.prototype$updateAttributes({id:vm.registroEdicion.idCursoPTC},{estatus:2}).$promise.then(function(respuesta){var index;index=vm.registroEdicion.instructores_propuestos.map(function(instructor){return instructor.idInstructor}).indexOf(parseInt(vm.radioidInstructorSeleccionado)),CursosOficiales.create({idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id,idCursoPTC:vm.registroEdicion.idCursoPTC,idPtc:vm.registroEdicion.idPtc,idLocalidad:vm.localidadSeleccionada.idLocalidad,idCatalogoCurso:vm.registroEdicion.idCatalogoCurso,nombreCurso:vm.registroEdicion.nombreCurso,claveCurso:vm.registroEdicion.claveCurso,descripcionCurso:vm.registroEdicion.descripcion,modalidad:vm.registroEdicion.modalidad,horario:vm.registroEdicion.horario,aulaAsignada:vm.registroEdicion.aulaAsignada,horasSemana:vm.registroEdicion.semanas,numeroHoras:vm.registroEdicion.total,costo:vm.registroEdicion.costo,cupoMaximo:vm.registroEdicion.capacitandos,minRequeridoInscritos:vm.registroEdicion.min_requerido_inscritos,minRequeridoPago:vm.registroEdicion.min_requerido_pago,fechaInicio:vm.registroEdicion.fechaInicio,fechaFin:vm.registroEdicion.fechaFin,idInstructor:vm.registroEdicion.instructores_propuestos[index].idInstructor,curpInstructor:vm.registroEdicion.instructores_propuestos[index].curp,nombreInstructor:vm.registroEdicion.instructores_propuestos[index].nombre_completo,observaciones:vm.registroEdicion.observaciones,estatus:0,publico:vm.registroEdicion.publico,programadoPTC:!0}).$promise.then(function(respuesta){vm.registroEdicion.idCurso=respuesta.idCurso,vm.registroEdicion.estatusCursoPTC=2,vm.registroEdicion.idInstructor=vm.registroEdicion.instructores_propuestos[index].idInstructor,vm.registroEdicion.nombreInstructor=vm.registroEdicion.instructores_propuestos[index].nombre_completo,vm.registroEdicion.observaciones=vm.registroEdicion.observaciones,vm.registroEdicion.idLocalidad=vm.localidadSeleccionada.idLocalidad,vm.registroEdicion.nombreLocalidad=vm.localidadSeleccionada.nombre,vm.registroEdicion.nombreCurso=vm.registroEdicion.nombreCurso,vm.registroEdicion.modalidad=vm.registroEdicion.modalidad,$modalInstance.close(vm.registroEdicion)}).catch(function(error){})}).catch(function(error){}))}var vm=this;vm.mostrarSpiner=!1,vm.mostrar_msg_error=!1,vm.listaLocalidades={},vm.localidadSeleccionada={},vm.instructorSeleccionado={},vm.radioidInstructorSeleccionado=0,vm.listaInstructores=[],vm.registroEdicion={idCurso:0,idCursoPTC:registroEditar.idCursoPTC,idPtc:registroEditar.idPtc,idCatalogoCurso:registroEditar.idCatalogoCurso,nombreCurso:registroEditar.detalle_curso.nombreCurso,modalidad:registroEditar.detalle_curso.modalidad,claveCurso:registroEditar.detalle_curso.claveCurso,descripcion:registroEditar.detalle_curso.descripcion,horario:registroEditar.horario,aulaAsignada:registroEditar.aulaAsignada,semanas:registroEditar.semanas,total:registroEditar.total,costo:0,capacitandos:registroEditar.capacitandos,min_requerido_inscritos:0,min_requerido_pago:0,fechaInicio:registroEditar.fechaInicio,fechaFin:registroEditar.fechaFin,idLocalidad:"",nombreLocalidad:"",idInstructor:"",nombreInstructor:"",publico:"",observaciones:"",estatusCursoPTC:registroEditar.estatus,instructores_propuestos:[]},angular.forEach(registroEditar.instructores_propuestos,function(record){vm.registroEdicion.instructores_propuestos.push({idInstructor:record.idInstructor,apellidoPaterno:record.apellidoPaterno,apellidoMaterno:record.apellidoMaterno,nombre:record.nombre,curp:record.curp,nombre_completo:record.apellidoPaterno+" "+record.apellidoMaterno+" "+record.nombre})}),vm.sort_by=sort_by,vm.openCalendar1=openCalendar1,vm.openCalendar2=openCalendar2,vm.agregaInstructor=agregaInstructor,vm.eliminaInstructor=eliminaInstructor,vm.guardar=guardar,inicia()}angular.module("icat_control_escolar").controller("ModalAperturaCursoController",ModalAperturaCursoController),ModalAperturaCursoController.$inject=["$scope","$timeout","$modalInstance","registroEditar","CursosPtc","CatalogoCursos","CatalogoInstructores","CatalogoLocalidades","CursosOficiales"]}(),function(){"use strict";function ModalEditaAperturaCursoController($scope,$timeout,$modalInstance,registroEditar,CursosPtc,CatalogoCursos,CatalogoInstructores,CatalogoLocalidades,CursosOficiales){function inicia(){CatalogoCursos.instructores_habilitados({id:registroEditar.idCatalogoCurso,filter:{where:{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},fields:["idInstructor","apellidoPaterno","apellidoMaterno","nombre"]}}).$promise.then(function(resp){angular.forEach(resp,function(record){vm.listaInstructores.push({idInstructor:record.idInstructor,apellidoPaterno:record.apellidoPaterno,apellidoMaterno:record.apellidoMaterno,nombre:record.nombre,nombre_completo:record.apellidoPaterno+" "+record.apellidoMaterno+" "+record.nombre})}),vm.listaInstructores.sort(sort_by("nombre_completo",!1,function(a){return a.toUpperCase()}));var index;angular.forEach(vm.registroEdicion.instructores_propuestos,function(record){index=vm.listaInstructores.map(function(instructor){return instructor.idInstructor}).indexOf(record.idInstructor),index>=0&&vm.listaInstructores.splice(index,1)})}),CatalogoLocalidades.find({filter:{fields:["idLocalidad","nombre"],order:"nombre ASC"}}).$promise.then(function(resp){vm.listaLocalidades=resp;var index=vm.listaLocalidades.map(function(record){return record.idLocalidad}).indexOf(vm.registroEdicion.idLocalidad);vm.localidadSeleccionada=vm.listaLocalidades[index]})}function sort_by(field,reverse,primer){var key=primer?function(x){return primer(x[field])}:function(x){return x[field]};return reverse=reverse?-1:1,function(a,b){return a=key(a),b=key(b),reverse*((a>b)-(b>a))}}function openCalendar1($event){$event.preventDefault(),$event.stopPropagation(),vm.opened1=!0}function openCalendar2($event){$event.preventDefault(),$event.stopPropagation(),vm.opened2=!0}function agregaInstructor(){if(vm.listaInstructores.length>0){vm.registroEdicion.instructores_propuestos.push({idInstructor:vm.instructorSeleccionado.idInstructor,apellidoPaterno:vm.instructorSeleccionado.apellidoPaterno,apellidoMaterno:vm.instructorSeleccionado.apellidoMaterno,nombre:vm.instructorSeleccionado.nombre,nombre_completo:vm.instructorSeleccionado.apellidoPaterno+" "+vm.instructorSeleccionado.apellidoMaterno+" "+vm.instructorSeleccionado.nombre});var index;angular.forEach(vm.registroEdicion.instructores_propuestos,function(record){index=vm.listaInstructores.map(function(instructor){return instructor.idInstructor}).indexOf(record.idInstructor),index>=0&&vm.listaInstructores.splice(index,1)}),vm.instructorSeleccionado={}}}function eliminaInstructor(indice){vm.listaInstructores.push({idInstructor:vm.registroEdicion.instructores_propuestos[indice].idInstructor,apellidoPaterno:vm.registroEdicion.instructores_propuestos[indice].apellidoPaterno,apellidoMaterno:vm.registroEdicion.instructores_propuestos[indice].apellidoMaterno,nombre:vm.registroEdicion.instructores_propuestos[indice].nombre,nombre_completo:vm.registroEdicion.instructores_propuestos[indice].apellidoPaterno+" "+vm.registroEdicion.instructores_propuestos[indice].apellidoMaterno+" "+vm.registroEdicion.instructores_propuestos[indice].nombre}),vm.registroEdicion.instructores_propuestos.splice(indice,1),vm.instructorSeleccionado={}}function guardar(){return 0==vm.radioidInstructorSeleccionado?(vm.mostrar_msg_error=!0,void $timeout(function(){vm.mostrar_msg_error=!1},3e3)):(vm.mostrarSpiner=!0,void CursosPtc.prototype$updateAttributes({id:vm.registroEdicion.idCursoPTC},{estatus:2}).$promise.then(function(respuesta){var index;index=vm.registroEdicion.instructores_propuestos.map(function(instructor){return instructor.idInstructor}).indexOf(parseInt(vm.radioidInstructorSeleccionado)),vm.registroEdicion.idInstructor=vm.registroEdicion.instructores_propuestos[index].idInstructor,vm.registroEdicion.nombreInstructor=vm.registroEdicion.instructores_propuestos[index].nombre_completo,vm.registroEdicion.nombreLocalidad=vm.localidadSeleccionada.nombre,CursosOficiales.prototype$updateAttributes({id:vm.registroEdicion.idCurso},{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id,idCursoPTC:vm.registroEdicion.idCursoPTC,idPtc:vm.registroEdicion.idPtc,idLocalidad:vm.localidadSeleccionada.idLocalidad,nombreCurso:vm.registroEdicion.nombreCurso,claveCurso:vm.registroEdicion.claveCurso,descripcionCurso:vm.registroEdicion.descripcion,modalidad:vm.registroEdicion.modalidad,horario:vm.registroEdicion.horario,aulaAsignada:vm.registroEdicion.aulaAsignada,horasSemana:vm.registroEdicion.semanas,numeroHoras:vm.registroEdicion.total,costo:vm.registroEdicion.costo,cupoMaximo:vm.registroEdicion.capacitandos,minRequeridoInscritos:vm.registroEdicion.min_requerido_inscritos,minRequeridoPago:vm.registroEdicion.min_requerido_pago,fechaInicio:vm.registroEdicion.fechaInicio,fechaFin:vm.registroEdicion.fechaFin,idInstructor:vm.registroEdicion.instructores_propuestos[index].idInstructor,curpInstructor:vm.registroEdicion.instructores_propuestos[index].curp,nombreInstructor:vm.registroEdicion.instructores_propuestos[index].nombre_completo,observaciones:vm.registroEdicion.observaciones,estatus:0,publico:vm.registroEdicion.publico,programadoPTC:!0}).$promise.then(function(respuesta){$modalInstance.close(vm.registroEdicion)}).catch(function(error){})}).catch(function(error){}))}var vm=this;vm.mostrarSpiner=!1,vm.mostrar_msg_error=!1,vm.listaLocalidades={},vm.localidadSeleccionada={},vm.instructorSeleccionado={},vm.radioidInstructorSeleccionado=0,vm.listaInstructores=[],vm.registroEdicion={idCurso:registroEditar.curso_oficial_registrado[0].idCurso,idCursoPTC:registroEditar.idCursoPTC,idPtc:registroEditar.idPtc,idCatalogoCurso:registroEditar.idCatalogoCurso,nombreCurso:registroEditar.detalle_curso.nombreCurso,modalidad:registroEditar.detalle_curso.modalidad,claveCurso:registroEditar.detalle_curso.claveCurso,descripcion:registroEditar.detalle_curso.descripcion,horario:registroEditar.curso_oficial_registrado[0].horario,aulaAsignada:registroEditar.curso_oficial_registrado[0].aulaAsignada,semanas:registroEditar.curso_oficial_registrado[0].horasSemana,total:registroEditar.curso_oficial_registrado[0].numeroHoras,costo:registroEditar.curso_oficial_registrado[0].costo,capacitandos:registroEditar.curso_oficial_registrado[0].cupoMaximo,min_requerido_inscritos:registroEditar.curso_oficial_registrado[0].minRequeridoInscritos,min_requerido_pago:registroEditar.curso_oficial_registrado[0].minRequeridoPago,fechaInicio:registroEditar.curso_oficial_registrado[0].fechaInicio,fechaFin:registroEditar.curso_oficial_registrado[0].fechaFin,idLocalidad:registroEditar.curso_oficial_registrado[0].idLocalidad,nombreLocalidad:"",idInstructor:registroEditar.curso_oficial_registrado[0].idInstructor,nombreInstructor:"",publico:registroEditar.curso_oficial_registrado[0].publico,observaciones:registroEditar.curso_oficial_registrado[0].observaciones,instructores_propuestos:[]},vm.radioidInstructorSeleccionado=vm.registroEdicion.idInstructor,angular.forEach(registroEditar.instructores_propuestos,function(record){vm.registroEdicion.instructores_propuestos.push({idInstructor:record.idInstructor,apellidoPaterno:record.apellidoPaterno,apellidoMaterno:record.apellidoMaterno,nombre:record.nombre,curp:record.curp,nombre_completo:record.apellidoPaterno+" "+record.apellidoMaterno+" "+record.nombre})}),vm.sort_by=sort_by,vm.openCalendar1=openCalendar1,vm.openCalendar2=openCalendar2,vm.agregaInstructor=agregaInstructor,vm.eliminaInstructor=eliminaInstructor,vm.guardar=guardar,inicia()}angular.module("icat_control_escolar").controller("ModalEditaAperturaCursoController",ModalEditaAperturaCursoController),ModalEditaAperturaCursoController.$inject=["$scope","$timeout","$modalInstance","registroEditar","CursosPtc","CatalogoCursos","CatalogoInstructores","CatalogoLocalidades","CursosOficiales"]}(),function(){"use strict";function PreAperturaCursoExtraController($scope,$modal,tablaDatosService,HorasAsignadasUnidad,ProgTrimCursos,CursosOficiales,ControlProcesos){function inicia(){ProgTrimCursos.find({filter:{where:{and:[{estatus:2},{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}]},fields:["idPtc","anio","trimestre"],order:["anio DESC","trimestre DESC"]}}).$promise.then(function(resp){angular.forEach(resp,function(registro){var trimestres=["PRIMER TRIMESTRE","SEGUNDO TRIMESTRE","TERCER TRIMESTRE","CUARTO TRIMESTRE"];vm.listaPTCautorizados.push({idPtc:registro.idPtc,anio:registro.anio,trimestretxt:trimestres[registro.trimestre-1]})})}),vm.tablaListaCursos.filtro_datos={filter:{where:vm.tablaListaCursos.condicion,order:["nombreCurso ASC"],limit:vm.tablaListaCursos.registrosPorPagina,
skip:vm.tablaListaCursos.paginaActual-1,include:[{relation:"localidad_pertenece",scope:{fields:["nombre"]}}]}}}function muestraCursosExtrasPTCseleccionado(){HorasAsignadasUnidad.find({filter:{where:{and:[{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},{anio:vm.PTCSeleccionado.anio}]},fields:["id","anio","horasAsignadas"],order:"anio DESC"}}).$promise.then(function(resp){vm.anioSeleccionado=resp[0]}),vm.client=1,vm.tablaListaCursos.paginaActual=1,vm.tablaListaCursos.inicio=0,vm.tablaListaCursos.fin=1,vm.tablaListaCursos.condicion={and:[{idPtc:vm.PTCSeleccionado.idPtc},{programadoPTC:!1}]},vm.registrosCursosExtras={},tablaDatosService.obtiene_datos_tabla(CursosOficiales,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.totalElementos=respuesta.total_registros,vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.tablaListaCursos.totalElementos>0&&(vm.registrosCursosExtras=respuesta.datos,vm.CursoExtraSeleccionado=vm.registrosCursosExtras[0],vm.client=2,vm.tablaListaCursos.fila_seleccionada=0,muestraDatosRegistroActual(vm.CursoExtraSeleccionado)),calcula_horas_disponibles()})}function muestraDatosRegistroActual(seleccion){var index=vm.registrosCursosExtras.indexOf(seleccion);vm.CursoExtraSeleccionado=seleccion,vm.client=2,vm.tablaListaCursos.fila_seleccionada=index}function cambiarPagina(){vm.tablaListaCursos.totalElementos>0&&tablaDatosService.cambia_pagina(CursosOficiales,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.registrosCursosExtras=respuesta.datos,vm.CursoExtraSeleccionado=vm.registrosCursosExtras[0],vm.client=2,vm.tablaListaCursos.fila_seleccionada=0,muestraDatosRegistroActual(vm.CursoExtraSeleccionado)})}function abreExtraCurso(PTCSeleccionado){var modalInstance=$modal.open({templateUrl:"app/components/preapertura-cursos/cursos-fuera-ptc/modal-apertura-curso-extra.html",windowClass:"animated fadeIn",controller:"ModalAperturaCursoExtraController as vm",windowClass:"app-modal-window",resolve:{registroEditar:function(){return{horas_disponibles:vm.horas_disponibles,record:PTCSeleccionado}}}});modalInstance.result.then(function(respuesta){swal({title:"Curso creado",html:"EL curso <strong>"+respuesta.nombreCurso+"</strong> se registr&oacute; como un curso pendiente de enviar a validaci&oacute;n de apertura",type:"success",showCancelButton:!1,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar"}),vm.muestraCursosExtrasPTCseleccionado()},function(){})}function editaCurso(seleccion){var temp_horas_disponibles=vm.horas_disponibles+seleccion.numeroHoras,modalInstance=$modal.open({templateUrl:"app/components/preapertura-cursos/cursos-fuera-ptc/modal-apertura-curso-extra.html",windowClass:"animated fadeIn",controller:"ModalEditaaCursoExtraController as vm",windowClass:"app-modal-window",resolve:{registroEditar:function(){return{horas_disponibles:temp_horas_disponibles,record:seleccion}}}});modalInstance.result.then(function(respuesta){vm.CursoExtraSeleccionado.horario=respuesta.horario,vm.CursoExtraSeleccionado.aulaAsignada=respuesta.aulaAsignada,vm.CursoExtraSeleccionado.cupoMaximo=respuesta.capacitandos,vm.CursoExtraSeleccionado.minRequeridoInscritos=respuesta.min_requerido_inscritos,vm.CursoExtraSeleccionado.minRequeridoPago=respuesta.min_requerido_pago,vm.CursoExtraSeleccionado.fechaInicio=respuesta.fechaInicio,vm.CursoExtraSeleccionado.fechaFin=respuesta.fechaFin,vm.CursoExtraSeleccionado.idInstructor=respuesta.idInstructor,vm.CursoExtraSeleccionado.nombreInstructor=respuesta.nombreInstructor,vm.CursoExtraSeleccionado.observaciones=respuesta.observaciones,vm.CursoExtraSeleccionado.idLocalidad=respuesta.idLocalidad,vm.CursoExtraSeleccionado.horasSemana=respuesta.semanas,vm.CursoExtraSeleccionado.numeroHoras=respuesta.total,vm.CursoExtraSeleccionado.costo=respuesta.costo,vm.CursoExtraSeleccionado.estatus=respuesta.estatus,vm.CursoExtraSeleccionado.publico=respuesta.publico,vm.CursoExtraSeleccionado.localidad_pertenece.idLocalidad=respuesta.idLocalidad,vm.CursoExtraSeleccionado.localidad_pertenece.nombre=respuesta.nombreLocalidad,calcula_horas_disponibles()},function(){})}function enviaCursoRevision(seleccion){swal({title:"Confirmar",html:"La propuesta del curso <strong>"+seleccion.nombreCurso+"</strong> ser&aacute; enviada a validaci&oacute;n, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),CursosOficiales.prototype$updateAttributes({id:seleccion.idCurso},{estatus:1}).$promise.then(function(respuesta){vm.CursoExtraSeleccionado.estatus=respuesta.estatus,ControlProcesos.create({proceso:"Pre-Apertura Curso Extra",accion:"ENVIO VALIDACION",idDocumento:seleccion.idCurso,idUsuario:$scope.currentUser.id_usuario,idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}).$promise.then(function(resp){ControlProcesos.findById({id:resp.id,filter:{fields:["identificador"]}}).$promise.then(function(resp_control){swal({title:"Validación enviada",html:'se env&iacute;o el curso a validaci&oacute;n y se gener&oacute; el identificador de proceso <br><strong style="font-size: 13px;">'+resp_control.identificador+"</strong>",type:"success",showCancelButton:!1,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar"})})})})})}function eliminaCurso(seleccion){swal({title:"Confirmar",html:"Se eliminar&aacute; el curso <strong>"+seleccion.nombreCurso+"</strong>, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),CursosOficiales.deleteById({id:seleccion.idCurso}).$promise.then(function(){vm.muestraCursosExtrasPTCseleccionado(),swal("Curso eliminado","","success")})})}function calcula_horas_disponibles(){ProgTrimCursos.find({filter:{where:{and:[{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},{anio:vm.anioSeleccionado.anio},{or:[{estatus:2},{estatus:4}]}]},fields:["idPtc","horasSeparadas","estatus"]}}).$promise.then(function(resp){var num_horas_separadas=0;angular.forEach(resp,function(registro){num_horas_separadas+=registro.horasSeparadas}),angular.forEach(vm.registrosCursosExtras,function(registro){num_horas_separadas+=registro.numeroHoras}),vm.horas_disponibles=vm.anioSeleccionado.horasAsignadas-num_horas_separadas})}var vm=this;vm.muestraCursosExtrasPTCseleccionado=muestraCursosExtrasPTCseleccionado,vm.muestraDatosRegistroActual=muestraDatosRegistroActual,vm.cambiarPagina=cambiarPagina,vm.abreExtraCurso=abreExtraCurso,vm.editaCurso=editaCurso,vm.enviaCursoRevision=enviaCursoRevision,vm.eliminaCurso=eliminaCurso,vm.anioSeleccionado=[],vm.horas_disponibles=0,vm.listaPTCautorizados=[],vm.PTCSeleccionado={},vm.tablaListaCursos={totalElementos:0,paginaActual:1,registrosPorPagina:5,inicio:0,fin:1,condicion:{},filtro_datos:{},fila_seleccionada:0},vm.registrosCursosExtras={},vm.CursoExtraSeleccionado={},inicia()}angular.module("icat_control_escolar").controller("PreAperturaCursoExtraController",PreAperturaCursoExtraController),PreAperturaCursoExtraController.$inject=["$scope","$modal","tablaDatosService","HorasAsignadasUnidad","ProgTrimCursos","CursosOficiales","ControlProcesos"]}(),function(){"use strict";function ModalAperturaCursoExtraController($scope,$timeout,$modalInstance,registroEditar,CatalogoCursos,CatalogoInstructores,CatalogoLocalidades,CursosOficiales){function inicia(){CatalogoCursos.find({filter:{fields:["idCatalogoCurso","nombreCurso","modalidad","claveCurso","descripcion","numeroHoras"],order:"nombreCurso ASC"}}).$promise.then(function(resp){vm.listaCursos=resp}),CatalogoLocalidades.find({filter:{fields:["idLocalidad","nombre"],order:"nombre ASC"}}).$promise.then(function(resp){vm.listaLocalidades=resp})}function muestraInstructoresCurso(){vm.registroEdicion.idCatalogoCurso=vm.cursoSeleccionado.idCatalogoCurso,vm.registroEdicion.nombreCurso=vm.cursoSeleccionado.nombreCurso,vm.registroEdicion.claveCurso=vm.cursoSeleccionado.claveCurso,vm.registroEdicion.modalidad=vm.cursoSeleccionado.modalidad,vm.registroEdicion.descripcion=vm.cursoSeleccionado.descripcion,vm.listaInstructores=[],vm.instructorSeleccionado="",CatalogoCursos.instructores_habilitados({id:vm.cursoSeleccionado.idCatalogoCurso,filter:{where:{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},fields:["idInstructor","apellidoPaterno","apellidoMaterno","nombre","curp"]}}).$promise.then(function(resp){angular.forEach(resp,function(record){vm.listaInstructores.push({idInstructor:record.idInstructor,apellidoPaterno:record.apellidoPaterno,apellidoMaterno:record.apellidoMaterno,nombre:record.nombre,curp:record.curp,nombre_completo:record.apellidoPaterno+" "+record.apellidoMaterno+" "+record.nombre})}),vm.listaInstructores.sort(sort_by("nombre_completo",!1,function(a){return a.toUpperCase()}))})}function sort_by(field,reverse,primer){var key=primer?function(x){return primer(x[field])}:function(x){return x[field]};return reverse=reverse?-1:1,function(a,b){return a=key(a),b=key(b),reverse*((a>b)-(b>a))}}function openCalendar1($event){$event.preventDefault(),$event.stopPropagation(),vm.opened1=!0}function openCalendar2($event){$event.preventDefault(),$event.stopPropagation(),vm.opened2=!0}function guardar(){return vm.mostrarSpiner=!0,vm.registroEdicion.total>vm.horas_disponibles?(vm.mostrarSpiner=!1,vm.mensaje="El número de horas de este curso ("+vm.registroEdicion.total+" horas) sobrepasa las horas disponibles para la unidad ("+registroEditar.horas_disponibles+" horas)",vm.mostrar_msg_error=!0,void $timeout(function(){vm.mensaje="",vm.mostrar_msg_error=!1},6e3)):void CursosOficiales.create({idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id,idCursoPTC:0,idPtc:vm.registroEdicion.idPtc,idLocalidad:vm.localidadSeleccionada.idLocalidad,idCatalogoCurso:vm.registroEdicion.idCatalogoCurso,nombreCurso:vm.registroEdicion.nombreCurso,claveCurso:vm.registroEdicion.claveCurso,descripcionCurso:vm.registroEdicion.descripcion,modalidad:vm.registroEdicion.modalidad,horario:vm.registroEdicion.horario,aulaAsignada:vm.registroEdicion.aulaAsignada,horasSemana:vm.registroEdicion.semanas,numeroHoras:vm.registroEdicion.total,costo:vm.registroEdicion.costo,cupoMaximo:vm.registroEdicion.capacitandos,minRequeridoInscritos:vm.registroEdicion.min_requerido_inscritos,minRequeridoPago:vm.registroEdicion.min_requerido_pago,fechaInicio:vm.registroEdicion.fechaInicio,fechaFin:vm.registroEdicion.fechaFin,publico:vm.registroEdicion.publico,idInstructor:vm.instructorSeleccionado.idInstructor,curpInstructor:vm.instructorSeleccionado.curp,nombreInstructor:vm.instructorSeleccionado.nombre_completo,observaciones:vm.registroEdicion.observaciones,estatus:0,programadoPTC:!1}).$promise.then(function(respuesta){$modalInstance.close(vm.registroEdicion)}).catch(function(error){})}var vm=this;vm.sort_by=sort_by,vm.openCalendar1=openCalendar1,vm.openCalendar2=openCalendar2,vm.muestraInstructoresCurso=muestraInstructoresCurso,vm.guardar=guardar,vm.mostrarSpiner=!1,vm.EdicionCurso=!1,vm.mostrar_msg_error=!1,vm.mensaje="",vm.listaCursos={},vm.cursoSeleccionado={},vm.listaLocalidades={},vm.localidadSeleccionada="",vm.instructorSeleccionado="",vm.listaInstructores=[],vm.horas_disponibles=registroEditar.horas_disponibles,vm.registroEdicion={idCurso:0,idPtc:registroEditar.record.idPtc,idCatalogoCurso:0,nombreCurso:"",modalidad:"",claveCurso:"",descripcion:"",horario:"",aulaAsignada:"",semanas:"",total:"",costo:0,capacitandos:0,min_requerido_inscritos:0,min_requerido_pago:0,fechaInicio:"",fechaFin:"",idLocalidad:"",nombreLocalidad:"",idInstructor:"",nombreInstructor:"",publico:!1,observaciones:"",instructores_propuestos:[]},inicia()}angular.module("icat_control_escolar").controller("ModalAperturaCursoExtraController",ModalAperturaCursoExtraController),ModalAperturaCursoExtraController.$inject=["$scope","$timeout","$modalInstance","registroEditar","CatalogoCursos","CatalogoInstructores","CatalogoLocalidades","CursosOficiales"]}(),function(){"use strict";function ModalEditaaCursoExtraController($scope,$timeout,$modalInstance,registroEditar,CatalogoCursos,CatalogoInstructores,CatalogoLocalidades,CursosOficiales){function inicia(){CatalogoCursos.find({filter:{fields:["idCatalogoCurso","nombreCurso","modalidad","claveCurso","descripcion","numeroHoras"],order:"nombreCurso ASC"}}).$promise.then(function(resp){vm.listaCursos=resp;var index=vm.listaCursos.map(function(record){return record.idCatalogoCurso}).indexOf(vm.registroEdicion.idCatalogoCurso);vm.cursoSeleccionado=vm.listaCursos[index]}),CatalogoCursos.instructores_habilitados({id:vm.registroEdicion.idCatalogoCurso,filter:{where:{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},fields:["idInstructor","apellidoPaterno","apellidoMaterno","nombre","curp"]}}).$promise.then(function(resp){angular.forEach(resp,function(record){vm.listaInstructores.push({idInstructor:record.idInstructor,apellidoPaterno:record.apellidoPaterno,apellidoMaterno:record.apellidoMaterno,nombre:record.nombre,curp:record.curp,nombre_completo:record.apellidoPaterno+" "+record.apellidoMaterno+" "+record.nombre})}),vm.listaInstructores.sort(sort_by("nombre_completo",!1,function(a){return a.toUpperCase()}));var index=vm.listaInstructores.map(function(record){return record.idInstructor}).indexOf(vm.registroEdicion.idInstructor);vm.instructorSeleccionado=vm.listaInstructores[index]}),CatalogoLocalidades.find({filter:{fields:["idLocalidad","nombre"],order:"nombre ASC"}}).$promise.then(function(resp){vm.listaLocalidades=resp;var index=vm.listaLocalidades.map(function(record){return record.idLocalidad}).indexOf(vm.registroEdicion.idLocalidad);vm.localidadSeleccionada=vm.listaLocalidades[index]})}function muestraInstructoresCurso(){vm.registroEdicion.idCatalogoCurso=vm.cursoSeleccionado.idCatalogoCurso,vm.registroEdicion.nombreCurso=vm.cursoSeleccionado.nombreCurso,vm.registroEdicion.claveCurso=vm.cursoSeleccionado.claveCurso,vm.registroEdicion.modalidad=vm.cursoSeleccionado.modalidad,vm.registroEdicion.descripcion=vm.cursoSeleccionado.descripcion,vm.listaInstructores=[],vm.instructorSeleccionado="",CatalogoCursos.instructores_habilitados({id:vm.cursoSeleccionado.idCatalogoCurso,filter:{where:{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},fields:["idInstructor","apellidoPaterno","apellidoMaterno","nombre","curp"]}}).$promise.then(function(resp){angular.forEach(resp,function(record){vm.listaInstructores.push({idInstructor:record.idInstructor,apellidoPaterno:record.apellidoPaterno,apellidoMaterno:record.apellidoMaterno,nombre:record.nombre,curp:record.curp,nombre_completo:record.apellidoPaterno+" "+record.apellidoMaterno+" "+record.nombre})}),vm.listaInstructores.sort(sort_by("nombre_completo",!1,function(a){return a.toUpperCase()}))})}function sort_by(field,reverse,primer){var key=primer?function(x){return primer(x[field])}:function(x){return x[field]};return reverse=reverse?-1:1,function(a,b){return a=key(a),b=key(b),reverse*((a>b)-(b>a))}}function openCalendar1($event){$event.preventDefault(),$event.stopPropagation(),vm.opened1=!0}function openCalendar2($event){$event.preventDefault(),$event.stopPropagation(),vm.opened2=!0}function guardar(){return vm.mostrarSpiner=!0,vm.registroEdicion.total>vm.horas_disponibles?(vm.mostrarSpiner=!1,vm.mensaje="El número de horas de este curso ("+vm.registroEdicion.total+" horas) sobrepasa las horas disponibles para la unidad ("+registroEditar.horas_disponibles+" horas)",vm.mostrar_msg_error=!0,void $timeout(function(){vm.mensaje="",vm.mostrar_msg_error=!1},6e3)):void CursosOficiales.prototype$updateAttributes({id:vm.registroEdicion.idCurso},{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id,idCursoPTC:0,idPtc:vm.registroEdicion.idPtc,idLocalidad:vm.localidadSeleccionada.idLocalidad,nombreCurso:vm.registroEdicion.nombreCurso,claveCurso:vm.registroEdicion.claveCurso,descripcionCurso:vm.registroEdicion.descripcion,modalidad:vm.registroEdicion.modalidad,horario:vm.registroEdicion.horario,aulaAsignada:vm.registroEdicion.aulaAsignada,horasSemana:vm.registroEdicion.semanas,numeroHoras:vm.registroEdicion.total,costo:vm.registroEdicion.costo,cupoMaximo:vm.registroEdicion.capacitandos,minRequeridoInscritos:vm.registroEdicion.min_requerido_inscritos,minRequeridoPago:vm.registroEdicion.min_requerido_pago,fechaInicio:vm.registroEdicion.fechaInicio,fechaFin:vm.registroEdicion.fechaFin,publico:vm.registroEdicion.publico,idInstructor:vm.instructorSeleccionado.idInstructor,curpInstructor:vm.instructorSeleccionado.curp,nombreInstructor:vm.instructorSeleccionado.nombre_completo,observaciones:vm.registroEdicion.observaciones,estatus:0,programadoPTC:!1}).$promise.then(function(respuesta){vm.registroEdicion.idInstructor=vm.instructorSeleccionado.idInstructor,vm.registroEdicion.nombreInstructor=vm.instructorSeleccionado.nombre_completo,vm.registroEdicion.idLocalidad=vm.localidadSeleccionada.idLocalidad,vm.registroEdicion.nombreLocalidad=vm.localidadSeleccionada.nombre,vm.registroEdicion.estatus=0,$modalInstance.close(vm.registroEdicion)}).catch(function(error){})}var vm=this;vm.sort_by=sort_by,vm.openCalendar1=openCalendar1,vm.openCalendar2=openCalendar2,vm.muestraInstructoresCurso=muestraInstructoresCurso,vm.guardar=guardar,vm.mostrarSpiner=!1,vm.EdicionCurso=!0,vm.mostrar_msg_error=!1,vm.mensaje="",vm.listaCursos={},vm.cursoSeleccionado={},vm.listaLocalidades={},vm.localidadSeleccionada="",vm.instructorSeleccionado="",vm.listaInstructores=[],vm.horas_disponibles=registroEditar.horas_disponibles,vm.registroEdicion={idCurso:registroEditar.record.idCurso,idPtc:registroEditar.record.idPtc,idCatalogoCurso:registroEditar.record.idCatalogoCurso,nombreCurso:registroEditar.record.nombreCurso,modalidad:registroEditar.record.modalidad,claveCurso:registroEditar.record.claveCurso,descripcion:registroEditar.record.descripcionCurso,horario:registroEditar.record.horario,aulaAsignada:registroEditar.record.aulaAsignada,semanas:registroEditar.record.horasSemana,total:registroEditar.record.numeroHoras,costo:registroEditar.record.costo,capacitandos:registroEditar.record.cupoMaximo,min_requerido_inscritos:registroEditar.record.minRequeridoInscritos,min_requerido_pago:registroEditar.record.minRequeridoPago,fechaInicio:registroEditar.record.fechaInicio,fechaFin:registroEditar.record.fechaFin,idLocalidad:registroEditar.record.idLocalidad,nombreLocalidad:"",idInstructor:registroEditar.record.idInstructor,nombreInstructor:registroEditar.record.nombreInstructor,publico:registroEditar.record.publico,estatus:registroEditar.record.estatus,observaciones:registroEditar.record.observaciones},inicia()}angular.module("icat_control_escolar").controller("ModalEditaaCursoExtraController",ModalEditaaCursoExtraController),ModalEditaaCursoExtraController.$inject=["$scope","$timeout","$modalInstance","registroEditar","CatalogoCursos","CatalogoInstructores","CatalogoLocalidades","CursosOficiales"]}(),function(){"use strict";function ValidaAperturaCursosController($scope,$modal,tablaDatosService,HorasAsignadasUnidad,ProgTrimCursos,CursosPtc,CatalogoUnidadesAdmtvas,CursosOficiales,ControlProcesos){function inicia(){vm.listaUnidades=[],vm.unidadSeleccionada=void 0,CatalogoUnidadesAdmtvas.find({filter:{where:{idUnidadAdmtva:{gt:1}},order:"nombre ASC"}}).$promise.then(function(resp){vm.listaUnidades.push({idUnidadAdmtva:-1,nombre:"Todas"}),angular.forEach(resp,function(unidad){vm.listaUnidades.push({idUnidadAdmtva:unidad.idUnidadAdmtva,nombre:unidad.nombre})}),vm.unidadSeleccionada=vm.listaUnidades[0]}),vm.tablaListaCursos.condicion={or:[{estatus:1},{estatus:3}]},vm.tablaListaCursos.filtro_datos={filter:{where:vm.tablaListaCursos.condicion,order:["nombreCurso ASC"],limit:vm.tablaListaCursos.registrosPorPagina,skip:vm.tablaListaCursos.paginaActual-1,include:[{relation:"localidad_pertenece",scope:{fields:["nombre"]}},{relation:"unidad_pertenece",scope:{fields:["nombre"]}},{relation:"ptc_pertenece",scope:{fields:["anio","trimestre","horasSeparadas"]}},{relation:"curso_ptc_pertenece",scope:{include:[{relation:"detalle_curso",scope:{fields:["nombreCurso","modalidad","claveCurso","descripcion"]}},{relation:"instructores_propuestos",scope:{fields:["apellidoPaterno","apellidoMaterno","nombre","curp"],order:["apellidoPaterno ASC","apellidoMaterno ASC","nombre ASC"]}}]}}]}},vm.client=1,vm.tablaListaCursos.paginaActual=1,vm.tablaListaCursos.inicio=0,vm.tablaListaCursos.fin=1,vm.listaCursosValidar={},tablaDatosService.obtiene_datos_tabla(CursosOficiales,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.totalElementos=respuesta.total_registros,vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.tablaListaCursos.totalElementos>0&&(vm.listaCursosValidar=respuesta.datos,vm.cursoSeleccionado=vm.listaCursosValidar[0],vm.client=2,vm.tablaListaCursos.fila_seleccionada=0,muestraDatosRegistroActual(vm.cursoSeleccionado))})}function muestra_cursos_unidad(){vm.client=1,vm.listaCursosValidar={},vm.cursoSeleccionado={},vm.tablaListaCursos.fila_seleccionada=void 0,vm.tablaListaCursos.paginaActual=1,vm.tablaListaCursos.inicio=0,vm.tablaListaCursos.fin=1,vm.unidadSeleccionada.idUnidadAdmtva==-1?vm.tablaListaCursos.condicion={or:[{estatus:1},{estatus:3}]}:vm.tablaListaCursos.condicion={and:[{idUnidadAdmtva:vm.unidadSeleccionada.idUnidadAdmtva},{or:[{estatus:1},{estatus:3}]}]},tablaDatosService.obtiene_datos_tabla(CursosOficiales,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.totalElementos=respuesta.total_registros,vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.tablaListaCursos.totalElementos>0&&(vm.listaCursosValidar=respuesta.datos,vm.cursoSeleccionado=vm.listaCursosValidar[0],vm.client=2,vm.tablaListaCursos.fila_seleccionada=0,muestraDatosRegistroActual(vm.cursoSeleccionado))})}function muestraDatosRegistroActual(seleccion){var index=vm.listaCursosValidar.indexOf(seleccion);vm.cursoSeleccionado=seleccion,vm.client=2,vm.tablaListaCursos.fila_seleccionada=index,vm.tabs=[{active:!0},{active:!1}]}function cambiarPagina(){vm.tablaListaCursos.totalElementos>0&&tablaDatosService.cambia_pagina(CursosOficiales,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.listaCursosValidar=respuesta.datos,vm.cursoSeleccionado=vm.listaCursosValidar[0],vm.client=2,vm.tablaListaCursos.fila_seleccionada=0,muestraDatosRegistroActual(vm.cursoSeleccionado)})}function apruebaCurso(seleccion){var datos,mensaje_confirmacion="",mensaje_accion="";"academica"==$scope.currentUser.perfil?(datos={aprobadoAcademica:!0},mensaje_confirmacion="La propuesta del curso <strong>"+seleccion.nombreCurso+"</strong> ser&aacute; marcada como <strong>APROBADA</strong> por el &aacute;rea acad&eacute;mica, ¿Continuar?",mensaje_accion="CURSO APROBADO ACADEMICA"):"planeacion"==$scope.currentUser.perfil?(datos={aprobadoPlaneacion:!0},mensaje_confirmacion="La propuesta del curso <strong>"+seleccion.nombreCurso+"</strong> ser&aacute; marcada como <strong>APROBADA</strong> por el &aacute;rea de planeaci&oacute;n, ¿Continuar?",mensaje_accion="CURSO APROBADO PLANEACION"):"direccion"==$scope.currentUser.perfil&&(datos={aprobadoDireccionGral:!0,estatus:2},mensaje_confirmacion="La propuesta del curso <strong>"+seleccion.nombreCurso+"</strong> ser&aacute; registrada como<strong>APROBADA Y ACEPTADA</strong> para su pre-apertura y promoci&oacute;n, ¿Continuar?",mensaje_accion="CURSO APROBADO - ACEPTADO DIR GRAL"),swal({title:"Confirmar",html:mensaje_confirmacion,type:"warning",showCancelButton:!0,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),CursosOficiales.prototype$updateAttributes({id:seleccion.idCurso},datos).$promise.then(function(respuesta){if("direccion"==$scope.currentUser.perfil&&(vm.cursoSeleccionado.estatus=respuesta.estatus,0==seleccion.programadoPTC?ProgTrimCursos.find({filter:{where:{and:[{idUnidadAdmtva:vm.cursoSeleccionado.idUnidadAdmtva},{anio:vm.cursoSeleccionado.ptc_pertenece.anio},{or:[{estatus:2},{estatus:4}]}]},fields:["idPtc","horasSeparadas"]}}).$promise.then(function(resp){var num_horas_separadas=0;angular.forEach(resp,function(registro){num_horas_separadas+=registro.horasSeparadas}),num_horas_separadas+=vm.cursoSeleccionado.numeroHoras;var num_horas_separdas_ptc=vm.cursoSeleccionado.ptc_pertenece.horasSeparadas+vm.cursoSeleccionado.numeroHoras;ProgTrimCursos.prototype$updateAttributes({id:vm.cursoSeleccionado.idPtc},{horasSeparadas:num_horas_separdas_ptc}).$promise.then(function(respuesta){}).catch(function(error){}),HorasAsignadasUnidad.find({filter:{where:{and:[{idUnidadAdmtva:vm.cursoSeleccionado.idUnidadAdmtva},{anio:vm.cursoSeleccionado.ptc_pertenece.anio}]},fields:["id"]}}).$promise.then(function(respuesta){HorasAsignadasUnidad.prototype$updateAttributes({id:respuesta[0].id},{horasSeparadas:num_horas_separadas}).$promise.then(function(respuesta){}).catch(function(error){})})}):CursosPtc.prototype$updateAttributes({id:vm.cursoSeleccionado.idCursoPTC},{estatus:1}).$promise.then(function(respuesta){}).catch(function(error){})),1==seleccion.programadoPTC)var txt="Pre-Apertura Curso PTC";else var txt="Pre-Apertura Curso Extra";ControlProcesos.create({proceso:txt,accion:mensaje_accion,idDocumento:seleccion.idCurso,idUsuario:$scope.currentUser.id_usuario,idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}).$promise.then(function(resp){ControlProcesos.findById({id:resp.id,filter:{fields:["identificador"]}}).$promise.then(function(resp_control){var titulo_ventana_aviso="Curso Revisado";if("academica"==$scope.currentUser.perfil)var mensaje_ventana_aviso='se marc&oacute; el curso como aprobado por el &aacute;rea acad&eacute;mica; se gener&oacute; el identificador del proceso <br><strong style="font-size: 13px;">'+resp_control.identificador+"</strong>";else if("planeacion"==$scope.currentUser.perfil)var mensaje_ventana_aviso='se marc&oacute; el curso como aprobado por el &aacute;rea de planeaci&oacute;n; se gener&oacute; el identificador del proceso <br><strong style="font-size: 13px;">'+resp_control.identificador+"</strong>";else if("direccion"==$scope.currentUser.perfil){titulo_ventana_aviso="Curso Aceptado";var mensaje_ventana_aviso='se marc&oacute; el curso como aprobado y aceptado para su pre-apertura y promoci&oacute;n; se gener&oacute; el identificador del proceso <br><strong style="font-size: 13px;">'+resp_control.identificador+"</strong>"}swal({title:titulo_ventana_aviso,html:mensaje_ventana_aviso,type:"success",showCancelButton:!1,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar"}),inicia()})})})})}function rechazaCurso(seleccion){swal({title:"Confirmar",html:"La propuesta del curso <strong>"+seleccion.nombreCurso+"</strong> ser&aacute; registrada como rechazada, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),CursosOficiales.prototype$updateAttributes({id:seleccion.idCurso},{estatus:3}).$promise.then(function(respuesta){if(vm.cursoSeleccionado.estatus=respuesta.estatus,1==seleccion.programadoPTC)var txt="Pre-Apertura Curso PTC";else var txt="Pre-Apertura Curso Extra";ControlProcesos.create({proceso:txt,accion:"RECHAZO PRE-APERTURA",idDocumento:seleccion.idCurso,idUsuario:$scope.currentUser.id_usuario,idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}).$promise.then(function(resp){ControlProcesos.findById({id:resp.id,filter:{fields:["identificador"]}}).$promise.then(function(resp_control){swal({title:"No autorización de pre-apertura",html:'se registr&oacute; el curso como NO AUTORIZADO para su pre-apertura y promoci&oacute;n y se gener&oacute; el identificador de proceso <br><strong style="font-size: 13px;">'+resp_control.identificador+"</strong>",type:"danger",showCancelButton:!1,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar"})})})})})}var vm=this;vm.muestra_cursos_unidad=muestra_cursos_unidad,vm.muestraDatosRegistroActual=muestraDatosRegistroActual,vm.cambiarPagina=cambiarPagina,vm.apruebaCurso=apruebaCurso,vm.rechazaCurso=rechazaCurso,vm.trimestres=["PRIMER TRIMESTRE","SEGUNDO TRIMESTRE","TERCER TRIMESTRE","CUARTO TRIMESTRE"],vm.tabs=[{active:!0},{active:!1}],vm.listaUnidades=[],vm.unidadSeleccionada=void 0,vm.listaCursosValidar=[],vm.cursoSeleccionado={},vm.tablaListaCursos={totalElementos:0,paginaActual:1,registrosPorPagina:5,inicio:0,fin:1,condicion:{},filtro_datos:{},fila_seleccionada:0},inicia()}angular.module("icat_control_escolar").controller("ValidaAperturaCursosController",ValidaAperturaCursosController),ValidaAperturaCursosController.$inject=["$scope","$modal","tablaDatosService","HorasAsignadasUnidad","ProgTrimCursos","CursosPtc","CatalogoUnidadesAdmtvas","CursosOficiales","ControlProcesos"]}(),function(){"use strict";function ResumenCursosController($scope,$stateParams,$modal,tablaDatosService,CatalogoUnidadesAdmtvas,HorasAsignadasUnidad,ProgTrimCursos,CursosOficiales,InscripcionCurso,CatalogoInstructores,ControlProcesos){function inicia(){vm.tipo_vista=$stateParams.tipo,"historicos"==vm.tipo_vista?(vm.titulo_seccion="Cursos realizados o cancelados",vm.listaEstatus=[{valor:-1,texto:"Todos"},{valor:6,texto:"Cerrado"},{valor:7,texto:"Cancelado"}],vm.condicion_estatus={or:[{estatus:6},{estatus:7}]}):(vm.titulo_seccion="Cursos vigentes",vm.listaEstatus=[{valor:-1,texto:"Todos"},{valor:2,texto:"En espera"},{valor:4,texto:"Activo"},{valor:5,texto:"Concluido"}],vm.condicion_estatus={or:[{estatus:2},{estatus:4},{estatus:5}]}),$scope.currentUser.unidad_pertenece_id>1?(vm.unidadSeleccionada={idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id,nombre:$scope.currentUser.nombre_unidad},vm.tablaListaCursos.condicion={and:[vm.condicion_estatus,{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}]}):(CatalogoUnidadesAdmtvas.find({filter:{where:{idUnidadAdmtva:{gt:1}},order:"nombre ASC"}}).$promise.then(function(resp){vm.listaUnidades.push({idUnidadAdmtva:-1,nombre:"Todas"}),angular.forEach(resp,function(unidad){vm.listaUnidades.push({idUnidadAdmtva:unidad.idUnidadAdmtva,nombre:unidad.nombre})}),vm.unidadSeleccionada=vm.listaUnidades[0]}),vm.tablaListaCursos.condicion=vm.condicion_estatus),vm.estatusSeleccionado=vm.listaEstatus[0],vm.tablaListaCursos.filtro_datos={filter:{where:vm.tablaListaCursos.condicion,order:["fechaInicio DESC","nombreCurso ASC"],limit:vm.tablaListaCursos.registrosPorPagina,skip:vm.tablaListaCursos.paginaActual-1,include:[{relation:"localidad_pertenece",scope:{fields:["nombre"]}},{relation:"unidad_pertenece",scope:{fields:["nombre"]}},{relation:"ptc_pertenece",scope:{fields:["anio","trimestre"]}},{relation:"inscripcionesCursos",scope:{fields:["id","pagado","idAlumno","calificacion","numDocAcreditacion"],include:{relation:"Capacitandos",scope:{fields:["numControl","apellidoPaterno","apellidoMaterno","nombre","curp"],order:["apellidoPaterno ASC","apellidoMaterno ASC","nombre ASC"]}}}}]}},vm.client=1,vm.tablaListaCursos.paginaActual=1,vm.tablaListaCursos.inicio=0,vm.tablaListaCursos.fin=1,vm.listaCursos={},tablaDatosService.obtiene_datos_tabla(CursosOficiales,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.totalElementos=respuesta.total_registros,vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.tablaListaCursos.totalElementos>0&&(vm.listaCursos=respuesta.datos,formateaListado(),vm.cursoSeleccionado=vm.listaCursos[0],vm.client=2,vm.tablaListaCursos.fila_seleccionada=0,muestraDatosRegistroActual(vm.cursoSeleccionado))})}function muestra_cursos_unidad(){vm.client=1,vm.listaCursos={},vm.cursoSeleccionado={},vm.tablaListaCursos.fila_seleccionada=void 0,vm.tablaListaCursos.paginaActual=1,vm.tablaListaCursos.inicio=0,vm.tablaListaCursos.fin=1,vm.estatusSeleccionado=vm.listaEstatus[0],vm.cadena_buscar="",
vm.mostrarbtnLimpiar=!1,vm.unidadSeleccionada.idUnidadAdmtva==-1?vm.tablaListaCursos.condicion=vm.condicion_estatus:vm.tablaListaCursos.condicion={and:[{idUnidadAdmtva:vm.unidadSeleccionada.idUnidadAdmtva},vm.condicion_estatus]},tablaDatosService.obtiene_datos_tabla(CursosOficiales,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.totalElementos=respuesta.total_registros,vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.tablaListaCursos.totalElementos>0&&(vm.listaCursos=respuesta.datos,formateaListado(),vm.cursoSeleccionado=vm.listaCursos[0],vm.client=2,vm.tablaListaCursos.fila_seleccionada=0,muestraDatosRegistroActual(vm.cursoSeleccionado))})}function muestra_estatus_curso(){vm.client=1,vm.listaCursos={},vm.cursoSeleccionado={},vm.tablaListaCursos.fila_seleccionada=void 0,vm.tablaListaCursos.paginaActual=1,vm.tablaListaCursos.inicio=0,vm.tablaListaCursos.fin=1,vm.cadena_buscar="",vm.mostrarbtnLimpiar=!1,vm.estatusSeleccionado.valor==-1?vm.unidadSeleccionada.idUnidadAdmtva==-1?vm.tablaListaCursos.condicion=vm.condicion_estatus:vm.tablaListaCursos.condicion={and:[{idUnidadAdmtva:vm.unidadSeleccionada.idUnidadAdmtva},vm.condicion_estatus]}:vm.unidadSeleccionada.idUnidadAdmtva==-1?vm.tablaListaCursos.condicion={estatus:vm.estatusSeleccionado.valor}:vm.tablaListaCursos.condicion={and:[{estatus:vm.estatusSeleccionado.valor},{idUnidadAdmtva:vm.unidadSeleccionada.idUnidadAdmtva}]},tablaDatosService.obtiene_datos_tabla(CursosOficiales,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.totalElementos=respuesta.total_registros,vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.tablaListaCursos.totalElementos>0&&(vm.listaCursos=respuesta.datos,formateaListado(),vm.cursoSeleccionado=vm.listaCursos[0],vm.client=2,vm.tablaListaCursos.fila_seleccionada=0,muestraDatosRegistroActual(vm.cursoSeleccionado))})}function muestraResultadosBusqueda(){vm.client=1,vm.listaCursos={},vm.cursoSeleccionado={},vm.tablaListaCursos.fila_seleccionada=void 0,vm.tablaListaCursos.paginaActual=1,vm.tablaListaCursos.inicio=0,vm.tablaListaCursos.fin=1,vm.estatusSeleccionado=vm.listaEstatus[0];var condicion_busqueda={nombreCurso:{regexp:"/.*"+vm.cadena_buscar+".*/i"}};vm.unidadSeleccionada.idUnidadAdmtva==-1?vm.tablaListaCursos.condicion={and:[vm.condicion_estatus,condicion_busqueda]}:vm.tablaListaCursos.condicion={and:[{idUnidadAdmtva:vm.unidadSeleccionada.idUnidadAdmtva},vm.condicion_estatus,condicion_busqueda]},tablaDatosService.obtiene_datos_tabla(CursosOficiales,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.totalElementos=respuesta.total_registros,vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.tablaListaCursos.totalElementos>0&&(vm.listaCursos=respuesta.datos,formateaListado(),vm.cursoSeleccionado=vm.listaCursos[0],vm.client=2,vm.tablaListaCursos.fila_seleccionada=0,muestraDatosRegistroActual(vm.cursoSeleccionado)),vm.mostrarbtnLimpiar=!0})}function limpiaBusqueda(){vm.mostrarbtnLimpiar=!1,vm.cadena_buscar="",vm.client=1,vm.listaCursos={},vm.cursoSeleccionado={},vm.tablaListaCursos.fila_seleccionada=void 0,vm.tablaListaCursos.paginaActual=1,vm.tablaListaCursos.inicio=0,vm.tablaListaCursos.fin=1,vm.estatusSeleccionado=vm.listaEstatus[0],vm.unidadSeleccionada.idUnidadAdmtva==-1?vm.tablaListaCursos.condicion=vm.condicion_estatus:vm.tablaListaCursos.condicion={and:[{idUnidadAdmtva:vm.unidadSeleccionada.idUnidadAdmtva},vm.condicion_estatus]},tablaDatosService.obtiene_datos_tabla(CursosOficiales,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.totalElementos=respuesta.total_registros,vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.tablaListaCursos.totalElementos>0&&(vm.listaCursos=respuesta.datos,formateaListado(),vm.cursoSeleccionado=vm.listaCursos[0],vm.client=2,vm.tablaListaCursos.fila_seleccionada=0,muestraDatosRegistroActual(vm.cursoSeleccionado))})}function muestraDatosRegistroActual(seleccion){var index=vm.listaCursos.indexOf(seleccion);vm.cursoSeleccionado=seleccion,vm.client=2,vm.tablaListaCursos.fila_seleccionada=index,vm.total_pagados=0,angular.forEach(vm.cursoSeleccionado.inscripcionesCursos,function(inscripcion){inscripcion.pagado>0&&vm.total_pagados++}),vm.tabs=[{active:!0},{active:!1}]}function cambiarPagina(){vm.tablaListaCursos.totalElementos>0&&tablaDatosService.cambia_pagina(CursosOficiales,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.listaCursos=respuesta.datos,formateaListado(),vm.cursoSeleccionado=vm.listaCursos[0],vm.client=2,vm.tablaListaCursos.fila_seleccionada=0,muestraDatosRegistroActual(vm.cursoSeleccionado)})}function reprogramaCurso(seleccion){var modalInstance=$modal.open({templateUrl:"app/components/cursos_oficiales/resumen-cursos/modal-reprograma-curso.html",windowClass:"animated fadeIn",controller:"ModalReprogramaCursoController as vm",resolve:{registroEditar:function(){return seleccion}}});modalInstance.result.then(function(respuesta){vm.cursoSeleccionado.horario=respuesta.horario,vm.cursoSeleccionado.aulaAsignada=respuesta.aulaAsignada,vm.cursoSeleccionado.fechaInicio=respuesta.fechaInicio,vm.cursoSeleccionado.fechaFin=respuesta.fechaFin,vm.cursoSeleccionado.idInstructor=respuesta.idInstructor,vm.cursoSeleccionado.nombreInstructor=respuesta.nombreInstructor,vm.cursoSeleccionado.observaciones=respuesta.observaciones,formateaListado(),ControlProcesos.create({proceso:"Cursos vigentes",accion:"REPROGRAMACION DE CURSO",idDocumento:seleccion.idCurso,idUsuario:$scope.currentUser.id_usuario,idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}).$promise.then(function(resp){ControlProcesos.findById({id:resp.id,filter:{fields:["identificador"]}}).$promise.then(function(resp_control){swal({title:"Reprogramación de curso",html:'se realiz&oacute; el cambio de fechas del curso seleccionado y se envi&oacute; el aviso de cambio a las personas inscritas. Se gener&oacute; de igual manera el identificador de proceso <br><strong style="font-size: 13px;">'+resp_control.identificador+"</strong>",type:"success",showCancelButton:!1,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar"})})})},function(){})}function cierraCurso(seleccion){swal({title:"Confirmar",html:"El curso <strong>"+seleccion.nombreCurso+"</strong> cambiar&aacute; su estatus a cerrado, una vez realizado esto el curso pasar&aacute; a la secci&oacute;n de hist&oacute;ricos, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),CursosOficiales.prototype$updateAttributes({id:seleccion.idCurso},{estatus:6}).$promise.then(function(respuesta){vm.cursoSeleccionado.estatus=respuesta.estatus,CatalogoInstructores.ef_ter_anio({id_instructor:seleccion.idInstructor}).$promise.then(function(resp){if(0==resp.length)var valor=0;else var valor=resp[0].eficiencia_terminal;CatalogoInstructores.prototype$updateAttributes({id:seleccion.idInstructor},{efTerminal:valor}).$promise.then(function(resp){})}),ControlProcesos.create({proceso:"Cursos vigentes",accion:"CIERRE DE CURSO",idDocumento:seleccion.idCurso,idUsuario:$scope.currentUser.id_usuario,idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}).$promise.then(function(resp){ControlProcesos.findById({id:resp.id,filter:{fields:["identificador"]}}).$promise.then(function(resp_control){swal({title:"Cambio de estatus registrado",html:'se realiz&oacute; el cambio de estatus del curso a cerrado y se gener&oacute; el identificador de proceso <br><strong style="font-size: 13px;">'+resp_control.identificador+"</strong>",type:"success",showCancelButton:!1,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar"}),vm.limpiaBusqueda()})})})})}function asientaCalificaciones(seleccion){var modalInstance=$modal.open({templateUrl:"app/components/cursos_oficiales/resumen-cursos/modal-asienta-calificaciones.html",windowClass:"animated fadeIn",controller:"ModalAsientaCalificacionesController as vm",size:"lg",resolve:{registroEditar:function(){return seleccion}}});modalInstance.result.then(function(respuesta){angular.forEach(respuesta.inscripcionesCursos,function(registro){var index=vm.cursoSeleccionado.inscripcionesCursos.map(function(record){return record.id}).indexOf(registro.id);vm.cursoSeleccionado.inscripcionesCursos[index].calificacion=registro.calificacion.value,vm.cursoSeleccionado.inscripcionesCursos[index].numDocAcreditacion=registro.numDocAcreditacion})},function(){})}function concluyeCurso(seleccion){swal({title:"Confirmar",html:"El curso <strong>"+seleccion.nombreCurso+"</strong> cambiar&aacute; su estatus a concluido, una vez realizado esto se podr&aacute; realizar el registro de calificaciones, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),CursosOficiales.prototype$updateAttributes({id:seleccion.idCurso},{estatus:5}).$promise.then(function(respuesta){vm.cursoSeleccionado.estatus=respuesta.estatus,ProgTrimCursos.findById({id:vm.cursoSeleccionado.idPtc,filter:{fields:["idPtc","horasAplicadas"]}}).$promise.then(function(resp){var horas_aplicadas=resp.horasAplicadas+vm.cursoSeleccionado.numeroHoras;ProgTrimCursos.prototype$updateAttributes({id:vm.cursoSeleccionado.idPtc},{horasAplicadas:horas_aplicadas}).$promise.then(function(respuesta){ProgTrimCursos.find({filter:{where:{and:[{idUnidadAdmtva:vm.cursoSeleccionado.idUnidadAdmtva},{anio:vm.cursoSeleccionado.ptc_pertenece.anio}]},fields:["idPtc","horasAplicadas"]}}).$promise.then(function(resp){var suma=0;angular.forEach(resp,function(resultado){suma+=resultado.horasAplicadas}),HorasAsignadasUnidad.find({filter:{where:{and:[{idUnidadAdmtva:vm.cursoSeleccionado.idUnidadAdmtva},{anio:vm.cursoSeleccionado.ptc_pertenece.anio}]},fields:["id"]}}).$promise.then(function(respuesta){HorasAsignadasUnidad.prototype$updateAttributes({id:respuesta[0].id},{horasAplicadas:suma}).$promise.then(function(respuesta){}).catch(function(error){})})})}).catch(function(error){})}),ControlProcesos.create({proceso:"Cursos vigentes",accion:"CONCLUSION DE CURSO",idDocumento:seleccion.idCurso,idUsuario:$scope.currentUser.id_usuario,idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}).$promise.then(function(resp){ControlProcesos.findById({id:resp.id,filter:{fields:["identificador"]}}).$promise.then(function(resp_control){swal({title:"Cambio de estatus registrado",html:'se realiz&oacute; el cambio de estatus del curso a concluido y se gener&oacute; el identificador de proceso <br><strong style="font-size: 13px;">'+resp_control.identificador+"</strong>",type:"success",showCancelButton:!1,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar"})})})})})}function cancelaCurso(seleccion){swal({title:"Confirmar",html:"El curso <strong>"+seleccion.nombreCurso+"</strong> se marcar&aacute; como cancelado y se les avisar&aacute; a las personas inscritas de la cancelaci&oacute;n, una vez realizado este cambio el curso pasar&aacute; a la secci&oacute;n de hist&oacute;ricos, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),CursosOficiales.prototype$updateAttributes({id:seleccion.idCurso},{estatus:7}).$promise.then(function(respuesta){vm.cursoSeleccionado.estatus=respuesta.estatus,ControlProcesos.create({proceso:"Cursos vigentes",accion:"CANCELACION DE CURSO",idDocumento:seleccion.idCurso,idUsuario:$scope.currentUser.id_usuario,idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}).$promise.then(function(resp){ControlProcesos.findById({id:resp.id,filter:{fields:["identificador"]}}).$promise.then(function(resp_control){swal({title:"Cambio de estatus registrado",html:'se realiz&oacute; el cambio de estatus del curso a cancelado y se gener&oacute; el identificador de proceso <br><strong style="font-size: 13px;">'+resp_control.identificador+"</strong>",type:"success",showCancelButton:!1,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar"}),vm.limpiaBusqueda()})})})})}function generaListados(seleccion){InscripcionCurso.find({filter:{fields:["idAlumno","pagado","fechaInscripcion","fechaPago","numFactura","calificacion","numDocAcreditacion"],where:{idCurso:seleccion.idCurso},include:[{relation:"Capacitandos",scope:{include:[{relation:"localidad_pertenece",scope:{fields:["nombre"]}},{relation:"unidad_pertenece",scope:{fields:["nombre"]}},{relation:"actividades_desempena",scope:{fields:["actividad"]}},{relation:"experiencia_laboral",scope:{fields:["experiencia"]}},{relation:"medio_comunicacion",scope:{fields:["medio"]}},{relation:"motivos_capacitarse",scope:{fields:["motivo"]}},{relation:"nivel_estudios",scope:{fields:["nivelEstudios"]}}]}}]}}).$promise.then(function(listaInscripcion){var fecha_inicio_temp=new Date(seleccion.fechaInicio),fecha_fin_temp=new Date(seleccion.fechaFin),meses=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],contenido='    <table width="100%">        <tbody>            <tr>                <td>Nombre del curso</td>                <td>'+codifica_caracteres_html(seleccion.nombreCurso)+"</td>            </tr>            <tr>                <td>Clave del curso</td>                <td>"+seleccion.claveCurso+"</td>            </tr>            <tr>                <td>Localidad impartici&oacute;n</td>                <td>"+codifica_caracteres_html(seleccion.localidad_pertenece.nombre)+"</td>            </tr>            <tr>                <td>Unidad de capacitaci&oacute;n</td>                <td>"+codifica_caracteres_html(seleccion.unidad_pertenece.nombre)+"</td>            </tr>            <tr>                <td>Fecha de inicio</td>                <td>"+(fecha_inicio_temp.getDate()+" de "+meses[fecha_inicio_temp.getMonth()]+" de "+fecha_inicio_temp.getFullYear())+"</td>            </tr>            <tr>                <td>Fecha fin</td>                <td>"+(fecha_fin_temp.getDate()+" de "+meses[fecha_fin_temp.getMonth()]+" de "+fecha_fin_temp.getFullYear())+"</td>            </tr>            <tr>                <td>Horario</td>                <td>"+seleccion.horario+"</td>            </tr>            <tr>                <td>N&uacute;mero de horas</td>                <td>"+seleccion.numeroHoras+"</td>            </tr>            <tr>                <td>Instructor</td>                <td>"+codifica_caracteres_html(seleccion.nombreInstructor)+"</td>            </tr>            <tr>                <td>Cupo m&aacute;ximo</td>                <td>"+seleccion.cupoMaximo+"</td>            </tr>            <tr>                <td>Inscritos</td>                <td>"+seleccion.inscripcionesCursos.length+'</td>            </tr>        </tbody>    </table><br>    <table width="100%">        <thead>            <tr>                <th>Fecha de inscripci&oacute;n</th>                <th>Estatus pago</th>                <th>Fecha de pago</th>                <th>N&uacute;m. recibo</th>                <th>Calificaci&oacute;n</th>                <th>N&uacute;m. documento acreditaci&oacute;n</th>                <th>N&uacute;m. control</th>                <th>Apellido Paterno</th>                <th>Apellido Materno</th>                <th>Nombre(s)</th>                <th>Sexo</th>                <th>Email</th>                <th>Edad</th>                <th>Tel&eacute;fono</th>                <th>Celular</th>                <th>CURP</th>                <th>Direcci&oacute;n</th>                <th>Colonia</th>                <th>C&oacute;digo postal</th>                <th>Localidad</th>                <th>Estudios</th>                <th>Estado civil</th>                <th>Discapacidad visual</th>                <th>Discapacidad auditiva</th>                <th>Discapacidad lenguaje</th>                <th>Discapacidad motriz</th>                <th>Discapacidad mental</th>                <th>&iquest;Padece alguna enfermedad o alergia?</th>                <th>&iquest;Cual?</th>                <th>Nombre tutor</th>                <th>CURP tutor</th>                <th>Parentesco tutor</th>                <th>Direcci&oacute;n tutor</th>                <th>Tel&eacute;fono tutor</th>                <th>Acta nacimiento</th>                <th>Comprobante de estudios</th>                <th>Identificaci&oacute;n oficial</th>                <th>Constancia CURP</th>                <th>Fotograf&iacute;as</th>                <th>Comprobante migratorio</th>                <th>Comprobante de domicilio</th>                <th>CURP del tutor</th>                <th>Actividad laboral</th>                <th>Experiencia</th>                <th>Empresa trabaja</th>                <th>Empresa puesto</th>                <th>Empresa antiguedad</th>                <th>Empresa direcci&oacute;n</th>                <th>Empresa tel&eacute;fono</th>                <th>Motivos para capacitarse</th>            </tr>        </thead>        <tbody>';angular.forEach(listaInscripcion,function(registro){var fechaInscripcion=new Date(registro.fechaInscripcion),fechaPago=new Date(registro.fechaPago),fechaInscripcionTXT=fechaInscripcion.getDate()+"/"+meses[fechaInscripcion.getMonth()]+"-"+fechaInscripcion.getFullYear(),fechaPagoTXT=fechaPago.getDate()+"/"+meses[fechaPago.getMonth()]+"-"+fechaPago.getFullYear();if(0==registro.pagado)var pagadoTXT="No pagado";else if(1==registro.pagado)var pagadoTXT="Pagado";else if(2==registro.pagado)var pagadoTXT="Exento al 100%";else if(3==registro.pagado)var pagadoTXT="Exento con porcentaje";contenido+="<tr>    <td>"+fechaInscripcionTXT+"</td>    <td>"+pagadoTXT+"</td>    <td>"+fechaPagoTXT+"</td>    <td>"+(void 0==registro.numFactura?"":registro.numFactura)+"</td>    <td>"+registro.calificacion+"</td>    <td>"+registro.numDocAcreditacion+"</td>    <td>"+registro.Capacitandos.numControl+"</td>    <td>"+codifica_caracteres_html(void 0==registro.Capacitandos.apellidoPaterno?"":registro.Capacitandos.apellidoPaterno)+"</td>    <td>"+codifica_caracteres_html(void 0==registro.Capacitandos.apellidoMaterno?"":registro.Capacitandos.apellidoMaterno)+"</td>    <td>"+codifica_caracteres_html(void 0==registro.Capacitandos.nombre?"":registro.Capacitandos.nombre)+"</td>    <td>"+(void 0==registro.Capacitandos.sexo?"":"H"==registro.Capacitandos.sexo?"Hombre":"Mujer")+"</td>    <td>"+registro.Capacitandos.email+"</td>    <td>"+(void 0==registro.Capacitandos.edad?"":registro.Capacitandos.edad)+"</td>    <td>"+(void 0==registro.Capacitandos.telefono?"":registro.Capacitandos.telefono)+"</td>    <td>"+(void 0==registro.Capacitandos.celular?"":registro.Capacitandos.celular)+"</td>    <td>"+(void 0==registro.Capacitandos.curp?"":registro.Capacitandos.curp)+"</td>    <td>"+codifica_caracteres_html(void 0==registro.Capacitandos.domicilio?"":registro.Capacitandos.domicilio)+"</td>    <td>"+codifica_caracteres_html(void 0==registro.Capacitandos.colonia?"":registro.Capacitandos.colonia)+"</td>    <td>"+(void 0==registro.Capacitandos.codigoPostal?"":registro.Capacitandos.codigoPostal)+"</td>    <td>"+codifica_caracteres_html(void 0==registro.Capacitandos.localidad_pertenece?"":registro.Capacitandos.localidad_pertenece.nombre)+"</td>    <td>"+codifica_caracteres_html(void 0==registro.Capacitandos.nivel_estudios?"":registro.Capacitandos.nivel_estudios.nivelEstudios)+"</td>    <td>"+(void 0==registro.Capacitandos.estadoCivil?"":registro.Capacitandos.estadoCivil)+"</td>    <td>"+(void 0==registro.Capacitandos.disVisual?"":1==registro.Capacitandos.disVisual?"S&iacute;":"No")+"</td>    <td>"+(void 0==registro.Capacitandos.disAuditiva?"":1==registro.Capacitandos.disAuditiva?"S&iacute;":"No")+"</td>    <td>"+(void 0==registro.Capacitandos.disLenguaje?"":1==registro.Capacitandos.disLenguaje?"S&iacute;":"No")+"</td>    <td>"+(void 0==registro.Capacitandos.disMotriz?"":1==registro.Capacitandos.disMotriz?"S&iacute;":"No")+"</td>    <td>"+(void 0==registro.Capacitandos.disMental?"":1==registro.Capacitandos.disMental?"S&iacute;":"No")+"</td>    <td>"+(void 0==registro.Capacitandos.enfermedadPadece?"":1==registro.Capacitandos.enfermedadPadece?"S&iacute;":"No")+"</td>    <td>"+codifica_caracteres_html(void 0==registro.Capacitandos.enfermedadCual?"":registro.Capacitandos.enfermedadCual)+"</td>    <td>"+codifica_caracteres_html(void 0==registro.Capacitandos.tutorNombre?"":registro.Capacitandos.tutorNombre)+"</td>    <td>"+(void 0==registro.Capacitandos.tutorCurp?"":registro.Capacitandos.tutorCurp)+"</td>    <td>"+codifica_caracteres_html(void 0==registro.Capacitandos.tutorParentesco?"":registro.Capacitandos.tutorParentesco)+"</td>    <td>"+codifica_caracteres_html(void 0==registro.Capacitandos.tutorDireccion?"":registro.Capacitandos.tutorDireccion)+"</td>    <td>"+(void 0==registro.Capacitandos.tutorTelefono?"":registro.Capacitandos.tutorTelefono)+"</td>    <td>"+(void 0==registro.Capacitandos.docActaNacimiento?"":1==registro.Capacitandos.docActaNacimiento?"S&iacute;":"No")+"</td>    <td>"+(void 0==registro.Capacitandos.docCompEstudios?"":1==registro.Capacitandos.docCompEstudios?"S&iacute;":"No")+"</td>    <td>"+(void 0==registro.Capacitandos.docIdentOficial?"":1==registro.Capacitandos.docIdentOficial?"S&iacute;":"No")+"</td>    <td>"+(void 0==registro.Capacitandos.docConstCurp?"":1==registro.Capacitandos.docConstCurp?"S&iacute;":"No")+"</td>    <td>"+(void 0==registro.Capacitandos.docFotografias?"":1==registro.Capacitandos.docFotografias?"S&iacute;":"No")+"</td>    <td>"+(void 0==registro.Capacitandos.docCompMigratorio?"":1==registro.Capacitandos.docCompMigratorio?"S&iacute;":"No")+"</td>    <td>"+(void 0==registro.Capacitandos.docCompDomicilio?"":1==registro.Capacitandos.docCompDomicilio?"S&iacute;":"No")+"</td>    <td>"+(void 0==registro.Capacitandos.docCurpTutor?"":1==registro.Capacitandos.docCurpTutor?"S&iacute;":"No")+"</td>    <td>"+codifica_caracteres_html(void 0==registro.Capacitandos.actividades_desempena?"":registro.Capacitandos.actividades_desempena.actividad)+"</td>    <td>"+codifica_caracteres_html(void 0==registro.Capacitandos.experiencia_laboral?"":registro.Capacitandos.experiencia_laboral.experiencia)+"</td>    <td>"+codifica_caracteres_html(void 0==registro.Capacitandos.empresaTrabaja?"":registro.Capacitandos.empresaTrabaja)+"</td>    <td>"+codifica_caracteres_html(void 0==registro.Capacitandos.empresaPuesto?"":registro.Capacitandos.empresaPuesto)+"</td>    <td>"+codifica_caracteres_html(void 0==registro.Capacitandos.empresaAntiguedad?"":registro.Capacitandos.empresaAntiguedad)+"</td>    <td>"+codifica_caracteres_html(void 0==registro.Capacitandos.empresaDireccion?"":registro.Capacitandos.empresaDireccion)+"</td>    <td>"+(void 0==registro.Capacitandos.empresaTelefono?"":registro.Capacitandos.empresaTelefono)+"</td>    <td>"+codifica_caracteres_html(void 0==registro.Capacitandos.motivos_capacitarse?"":registro.Capacitandos.motivos_capacitarse.motivo)+"</td> </tr>"}),contenido+="        </tbody>    </table>";var blob=new Blob([contenido],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=ISO-8859-1"});saveAs(blob,"lista_capacitandos_curso_exportado.xls")})}function codifica_caracteres_html(tx){var rp=String(tx);return rp=rp.replace(/á/g,"&aacute;"),rp=rp.replace(/é/g,"&eacute;"),rp=rp.replace(/í/g,"&iacute;"),rp=rp.replace(/ó/g,"&oacute;"),rp=rp.replace(/ú/g,"&uacute;"),rp=rp.replace(/ñ/g,"&ntilde;"),rp=rp.replace(/ü/g,"&uuml;"),rp=rp.replace(/Á/g,"&Aacute;"),rp=rp.replace(/É/g,"&Eacute;"),rp=rp.replace(/Í/g,"&Iacute;"),rp=rp.replace(/Ó/g,"&Oacute;"),rp=rp.replace(/Ú/g,"&Uacute;"),rp=rp.replace(/Ñ/g,"&Ntilde;"),rp=rp.replace(/Ü/g,"&Uuml;")}function formateaListado(){var hoy=new Date;hoy.setHours(0),hoy.setMinutes(0),hoy.setSeconds(0),hoy.setMilliseconds(0);for(var i=0;i<vm.listaCursos.length;i++){var fecha_inicio=new Date(vm.listaCursos[i].fechaInicio);fecha_inicio.setHours(0),fecha_inicio.setMinutes(0),fecha_inicio.setSeconds(0),fecha_inicio.setMilliseconds(0);var dif=fecha_inicio-hoy,num_dias_falta=Math.floor(dif/864e5);vm.listaCursos[i].diasDif=num_dias_falta}}var vm=this;vm.muestra_cursos_unidad=muestra_cursos_unidad,vm.muestra_estatus_curso=muestra_estatus_curso,vm.muestraResultadosBusqueda=muestraResultadosBusqueda,vm.limpiaBusqueda=limpiaBusqueda,vm.muestraDatosRegistroActual=muestraDatosRegistroActual,vm.cambiarPagina=cambiarPagina,vm.reprogramaCurso=reprogramaCurso,vm.cancelaCurso=cancelaCurso,vm.concluyeCurso=concluyeCurso,vm.cierraCurso=cierraCurso,vm.asientaCalificaciones=asientaCalificaciones,vm.generaListados=generaListados,vm.tabs=[{active:!0},{active:!1}],vm.total_pagados=0,vm.mostrarbtnLimpiar=!1,vm.cadena_buscar="",vm.listaUnidades=[],vm.unidadSeleccionada=void 0,vm.listaCursos=[],vm.cursoSeleccionado={},vm.tablaListaCursos={totalElementos:0,paginaActual:1,registrosPorPagina:5,inicio:0,fin:1,condicion:{},filtro_datos:{},fila_seleccionada:0},inicia()}angular.module("icat_control_escolar").controller("ResumenCursosController",ResumenCursosController),ResumenCursosController.$inject=["$scope","$stateParams","$modal","tablaDatosService","CatalogoUnidadesAdmtvas","HorasAsignadasUnidad","ProgTrimCursos","CursosOficiales","InscripcionCurso","CatalogoInstructores","ControlProcesos"]}(),function(){"use strict";function ModalReprogramaCursoController($scope,$timeout,$modalInstance,registroEditar,CatalogoCursos,CursosOficiales){function inicia(){CatalogoCursos.instructores_habilitados({id:vm.registroEdicion.idCatalogoCurso,filter:{where:{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},fields:["idInstructor","apellidoPaterno","apellidoMaterno","nombre","curp"]}}).$promise.then(function(resp){angular.forEach(resp,function(record){vm.listaInstructores.push({idInstructor:record.idInstructor,apellidoPaterno:record.apellidoPaterno,apellidoMaterno:record.apellidoMaterno,nombre:record.nombre,curp:record.curp,nombre_completo:record.apellidoPaterno+" "+record.apellidoMaterno+" "+record.nombre})}),vm.listaInstructores.sort(sort_by("nombre_completo",!1,function(a){return a.toUpperCase()}));var index=vm.listaInstructores.map(function(record){return record.idInstructor}).indexOf(vm.registroEdicion.idInstructor);vm.instructorSeleccionado=vm.listaInstructores[index]})}function sort_by(field,reverse,primer){var key=primer?function(x){return primer(x[field])}:function(x){return x[field]};return reverse=reverse?-1:1,function(a,b){return a=key(a),b=key(b),reverse*((a>b)-(b>a))}}function openCalendar1($event){$event.preventDefault(),$event.stopPropagation(),vm.opened1=!0}function openCalendar2($event){$event.preventDefault(),$event.stopPropagation(),vm.opened2=!0}function guardar(){vm.mostrarSpiner=!0,CursosOficiales.prototype$updateAttributes({id:vm.registroEdicion.idCurso},{horario:vm.registroEdicion.horario,aulaAsignada:vm.registroEdicion.aulaAsignada,fechaInicio:vm.registroEdicion.fechaInicio,fechaFin:vm.registroEdicion.fechaFin,idInstructor:vm.instructorSeleccionado.idInstructor,curpInstructor:vm.instructorSeleccionado.curp,nombreInstructor:vm.instructorSeleccionado.nombre_completo,observaciones:vm.registroEdicion.observaciones}).$promise.then(function(respuesta){vm.registroEdicion.idInstructor=vm.instructorSeleccionado.idInstructor,vm.registroEdicion.nombreInstructor=vm.instructorSeleccionado.nombre_completo,$modalInstance.close(vm.registroEdicion)}).catch(function(error){})}var vm=this;vm.mostrarSpiner=!1,vm.instructorSeleccionado="",vm.listaInstructores=[],vm.registroEdicion={idCurso:registroEditar.idCurso,idCatalogoCurso:registroEditar.idCatalogoCurso,nombreCurso:registroEditar.nombreCurso,horario:registroEditar.horario,aulaAsignada:registroEditar.aulaAsignada,fechaInicio:registroEditar.fechaInicio,fechaFin:registroEditar.fechaFin,idInstructor:registroEditar.idInstructor,nombreInstructor:registroEditar.nombreInstructor,observaciones:registroEditar.observaciones},vm.sort_by=sort_by,vm.openCalendar1=openCalendar1,vm.openCalendar2=openCalendar2,vm.guardar=guardar,inicia()}angular.module("icat_control_escolar").controller("ModalReprogramaCursoController",ModalReprogramaCursoController),ModalReprogramaCursoController.$inject=["$scope","$timeout","$modalInstance","registroEditar","CatalogoCursos","CursosOficiales"]}(),function(){"use strict";function ModalAsientaCalificacionesController($scope,$timeout,$modalInstance,tablaDatosService,registroEditar,CatalogoCursos,InscripcionCurso){function inicia(){vm.tablaListaAlumnos.paginaActual=1,vm.tablaListaAlumnos.inicio=0,vm.tablaListaAlumnos.fin=1,vm.tablaListaAlumnos.totalElementos=vm.registroEdicion.inscripcionesCursos.length;for(var i=0;i<vm.registroEdicion.inscripcionesCursos.length;i++)void 0===vm.registroEdicion.inscripcionesCursos[i].numDocAcreditacion&&(vm.registroEdicion.inscripcionesCursos[i].numDocAcreditacion=""),void 0===vm.registroEdicion.inscripcionesCursos[i].calificacion||""==vm.registroEdicion.inscripcionesCursos[i].calificacion?vm.registroEdicion.inscripcionesCursos[i].calificacion={text:"Seleccione",value:""}:vm.registroEdicion.inscripcionesCursos[i].calificacion={text:vm.registroEdicion.inscripcionesCursos[i].calificacion,value:vm.registroEdicion.inscripcionesCursos[i].calificacion}}function cambiarPagina(value){var inicio=(vm.tablaListaCursos.paginaActual-1)*vm.tablaListaCursos.registrosPorPagina,fin=inicio+vm.tablaListaCursos.registrosPorPagina;fin>vm.tablaListaCursos.totalElementos&&(fin=vm.tablaListaCursos.totalElementos);var index=vm.registroEdicion.inscripcionesCursos.indexOf(value);return vm.tablaListaCursos.inicio<=index&&index<vm.tablaListaCursos.fin}function guardar(){vm.mostrarSpiner=!0,angular.forEach(vm.registroEdicion.inscripcionesCursos,function(registro){""!=registro.calificacion.value&&InscripcionCurso.prototype$updateAttributes({id:registro.id},{calificacion:registro.calificacion.value,numDocAcreditacion:registro.numDocAcreditacion}).$promise.then(function(){})}),$modalInstance.close(vm.registroEdicion)}var vm=this;vm.mostrarSpiner=!1,vm.instructorSeleccionado="",vm.listaInstructores=[],vm.tablaListaAlumnos={totalElementos:0,paginaActual:1,registrosPorPagina:5,inicio:0,fin:1,condicion:{},filtro_datos:{},fila_seleccionada:0},vm.registroEdicion={idCurso:registroEditar.idCurso,nombreCurso:registroEditar.nombreCurso,nombreInstructor:registroEditar.nombreInstructor,inscripcionesCursos:registroEditar.inscripcionesCursos},vm.ddSelectOptions=[{text:"ACREDITADO",value:"ACREDITADO"},{text:"NO ACREDITADO",value:"NO ACREDITADO"},{text:"DESERTOR",value:"DESERTOR"}],vm.cambiarPagina=cambiarPagina,vm.guardar=guardar,inicia()}angular.module("icat_control_escolar").controller("ModalAsientaCalificacionesController",ModalAsientaCalificacionesController),ModalAsientaCalificacionesController.$inject=["$scope","$timeout","$modalInstance","tablaDatosService","registroEditar","CatalogoCursos","InscripcionCurso"]}(),function(){"use strict";function PrincipalCapacitandosController($scope,$stateParams,$modal,tablaDatosService,CatalogoUnidadesAdmtvas,Capacitandos,ControlProcesos){function inicia(){vm.tablalListaCapacitados.filtro_datos={filter:{where:vm.tablalListaCapacitados.condicion,order:["apellidoPaterno ASC","apellidoMaterno ASC","nombre ASC","curp ASC"],limit:vm.tablalListaCapacitados.registrosPorPagina,skip:vm.tablalListaCapacitados.paginaActual-1,include:[{relation:"localidad_pertenece",scope:{fields:["nombre"]}},{relation:"unidad_pertenece",scope:{fields:["nombre"]}},{relation:"inscripcionesCursos",scope:{fields:["id","pagado","idAlumno","idCurso","calificacion","numDocAcreditacion"],include:{relation:"CursosOficiales",scope:{fields:["nombreCurso","fechaInicio","estatus"],order:["fechaInicio ASC"]}}}}]}},vm.client=1,vm.tablalListaCapacitados.paginaActual=1,vm.tablalListaCapacitados.inicio=0,vm.tablalListaCapacitados.fin=1,vm.listaCapacitandos={},
tablaDatosService.obtiene_datos_tabla(Capacitandos,vm.tablalListaCapacitados).then(function(respuesta){vm.tablalListaCapacitados.totalElementos=respuesta.total_registros,vm.tablalListaCapacitados.inicio=respuesta.inicio,vm.tablalListaCapacitados.fin=respuesta.fin,vm.tablalListaCapacitados.totalElementos>0&&(vm.listaCapacitandos=respuesta.datos,vm.personaSeleccionada=vm.listaCapacitandos[0],vm.client=2,vm.tablalListaCapacitados.fila_seleccionada=0,muestraDatosRegistroActual(vm.personaSeleccionada))})}function muestraResultadosBusqueda(){vm.client=1,vm.listaCapacitandos={},vm.personaSeleccionada={},vm.tablalListaCapacitados.fila_seleccionada=void 0,vm.tablalListaCapacitados.paginaActual=1,vm.tablalListaCapacitados.inicio=0,vm.tablalListaCapacitados.fin=1,vm.mostrarbtnLimpiar=!0,vm.tablalListaCapacitados.condicion={or:[{apellidoPaterno:{regexp:"/.*"+vm.cadena_buscar+".*/i"}},{apellidoMaterno:{regexp:"/.*"+vm.cadena_buscar+".*/i"}},{nombre:{regexp:"/.*"+vm.cadena_buscar+".*/i"}}]},tablaDatosService.obtiene_datos_tabla(Capacitandos,vm.tablalListaCapacitados).then(function(respuesta){vm.tablalListaCapacitados.totalElementos=respuesta.total_registros,vm.tablalListaCapacitados.inicio=respuesta.inicio,vm.tablalListaCapacitados.fin=respuesta.fin,vm.tablalListaCapacitados.totalElementos>0&&(vm.listaCapacitandos=respuesta.datos,vm.personaSeleccionada=vm.listaCapacitandos[0],vm.client=2,vm.tablalListaCapacitados.fila_seleccionada=0,muestraDatosRegistroActual(vm.personaSeleccionada))})}function limpiaBusqueda(){vm.mostrarbtnLimpiar=!1,vm.cadena_buscar="",vm.client=1,vm.listaCapacitandos={},vm.personaSeleccionada={},vm.tablalListaCapacitados.fila_seleccionada=void 0,vm.tablalListaCapacitados.paginaActual=1,vm.tablalListaCapacitados.inicio=0,vm.tablalListaCapacitados.fin=1,vm.tablalListaCapacitados.condicion={},tablaDatosService.obtiene_datos_tabla(Capacitandos,vm.tablalListaCapacitados).then(function(respuesta){vm.tablalListaCapacitados.totalElementos=respuesta.total_registros,vm.tablalListaCapacitados.inicio=respuesta.inicio,vm.tablalListaCapacitados.fin=respuesta.fin,vm.tablalListaCapacitados.totalElementos>0&&(vm.listaCapacitandos=respuesta.datos,vm.personaSeleccionada=vm.listaCapacitandos[0],vm.client=2,vm.tablalListaCapacitados.fila_seleccionada=0,muestraDatosRegistroActual(vm.personaSeleccionada))})}function muestraDatosRegistroActual(seleccion){var index=vm.listaCapacitandos.indexOf(seleccion);vm.personaSeleccionada=seleccion,vm.client=2,vm.tablalListaCapacitados.fila_seleccionada=index}function cambiarPagina(){vm.tablalListaCapacitados.totalElementos>0&&tablaDatosService.cambia_pagina(Capacitandos,vm.tablalListaCapacitados).then(function(respuesta){vm.tablalListaCapacitados.inicio=respuesta.inicio,vm.tablalListaCapacitados.fin=respuesta.fin,vm.listaCapacitandos=respuesta.datos,vm.personaSeleccionada=vm.listaCapacitandos[0],vm.client=2,vm.tablalListaCapacitados.fila_seleccionada=0,muestraDatosRegistroActual(vm.personaSeleccionada)})}function editaCapacitando(seleccion){var modalInstance=$modal.open({templateUrl:"app/components/capacitandos/modal-datos-capacitando.html",windowClass:"animated fadeIn",controller:"ModalEditaCapacitandoController as vm",windowClass:"app-modal-window",resolve:{registroEditar:function(){return seleccion}}});modalInstance.result.then(function(respuesta){vm.personaSeleccionada.apellidoPaterno=respuesta.apellidoPaterno,vm.personaSeleccionada.apellidoMaterno=respuesta.apellidoMaterno,vm.personaSeleccionada.nombre=respuesta.nombre,vm.personaSeleccionada.email=respuesta.email,vm.personaSeleccionada.telefono=respuesta.telefono,vm.personaSeleccionada.celular=respuesta.celular,vm.personaSeleccionada.domicilio=respuesta.domicilio,vm.personaSeleccionada.sexo=respuesta.sexo,vm.personaSeleccionada.diaNacimiento=respuesta.diaNacimiento,vm.personaSeleccionada.mesNacimiento=respuesta.mesNacimiento,vm.personaSeleccionada.anioNacimiento=respuesta.anioNacimiento,vm.personaSeleccionada.edad=respuesta.edad,vm.personaSeleccionada.curp=respuesta.curp,vm.personaSeleccionada.colonia=respuesta.colonia,vm.personaSeleccionada.codigoPostal=respuesta.codigoPostal,vm.personaSeleccionada.idLocalidad=respuesta.idLocalidad,vm.personaSeleccionada.idNivelEstudios=respuesta.idNivelEstudios,vm.personaSeleccionada.estadoCivil=respuesta.estadoCivil,vm.personaSeleccionada.foto=respuesta.foto,vm.personaSeleccionada.disVisual=respuesta.disVisual,vm.personaSeleccionada.disAuditiva=respuesta.disAuditiva,vm.personaSeleccionada.disLenguaje=respuesta.disLenguaje,vm.personaSeleccionada.disMotriz=respuesta.disMotriz,vm.personaSeleccionada.disMental=respuesta.disMental,vm.personaSeleccionada.enfermedadPadece=respuesta.enfermedadPadece,vm.personaSeleccionada.enfermedadCual=respuesta.enfermedadCual,vm.personaSeleccionada.tutorNombre=respuesta.tutorNombre,vm.personaSeleccionada.tutorCurp=respuesta.tutorCurp,vm.personaSeleccionada.tutorParentesco=respuesta.tutorParentesco,vm.personaSeleccionada.tutorDireccion=respuesta.tutorDireccion,vm.personaSeleccionada.tutorTelefono=respuesta.tutorTelefono,vm.personaSeleccionada.docActaNacimiento=respuesta.docActaNacimiento,vm.personaSeleccionada.docCompEstudios=respuesta.docCompEstudios,vm.personaSeleccionada.docIdentOficial=respuesta.docIdentOficial,vm.personaSeleccionada.docConstCurp=respuesta.docConstCurp,vm.personaSeleccionada.docFotografias=respuesta.docFotografias,vm.personaSeleccionada.docCompMigratorio=respuesta.docCompMigratorio,vm.personaSeleccionada.docCompDomicilio=respuesta.docCompDomicilio,vm.personaSeleccionada.docCurpTutor=respuesta.docCurpTutor,vm.personaSeleccionada.trabajaActualmente=respuesta.trabajaActualmente,vm.personaSeleccionada.idActividad=respuesta.idActividad,vm.personaSeleccionada.empresaTrabaja=respuesta.empresaTrabaja,vm.personaSeleccionada.empresaPuesto=respuesta.empresaPuesto,vm.personaSeleccionada.empresaAntiguedad=respuesta.empresaAntiguedad,vm.personaSeleccionada.empresaDireccion=respuesta.empresaDireccion,vm.personaSeleccionada.empresaTelefono=respuesta.empresaTelefono,vm.personaSeleccionada.idExperiencia=respuesta.idExperiencia,vm.personaSeleccionada.idMedio=respuesta.idMedio,vm.personaSeleccionada.idMotivo=respuesta.idMotivo,vm.personaSeleccionada.idGrupoPertenece=respuesta.idGrupoPertenece,vm.personaSeleccionada.gpoJefasFamilia=respuesta.gpoJefasFamilia,vm.personaSeleccionada.gpoSitViolencia=respuesta.gpoSitViolencia,vm.personaSeleccionada.gpoAdolCalle=respuesta.gpoAdolCalle,vm.personaSeleccionada.gpoIndigenas=respuesta.gpoIndigenas,vm.personaSeleccionada.gpoAdultoMayor=respuesta.gpoAdultoMayor,vm.personaSeleccionada.gpoLgbttti=respuesta.gpoLgbttti,vm.personaSeleccionada.gpoDentroCereso=respuesta.gpoDentroCereso,vm.personaSeleccionada.gpoCapDiferentes=respuesta.gpoCapDiferentes,vm.personaSeleccionada.gpoMenorReadap=respuesta.gpoMenorReadap,vm.personaSeleccionada.gpoFueraCereso=respuesta.gpoFueraCereso,vm.personaSeleccionada.registroRemoto=respuesta.registroRemoto,vm.personaSeleccionada.fechaRegistro=respuesta.fechaRegistro,vm.personaSeleccionada.ultimaActualizacion=respuesta.ultimaActualizacion},function(){})}function muestraCapacitando(seleccion){var modalInstance=$modal.open({templateUrl:"app/components/capacitandos/modal-datos-capacitando.html",windowClass:"animated fadeIn",controller:"ModalVisualizaCapacitandoController as vm",windowClass:"app-modal-window",resolve:{registroEditar:function(){return seleccion}}});modalInstance.result.then(function(){},function(){})}function nuevoCapacitando(){var modalInstance=$modal.open({templateUrl:"app/components/capacitandos/modal-datos-capacitando.html",windowClass:"animated fadeIn",controller:"ModalNuevoCapacitandoController as vm",windowClass:"app-modal-window"});modalInstance.result.then(function(){vm.limpiaBusqueda()},function(){})}function eliminaCapacitando(seleccion){Capacitandos.inscripcionesCursos.count({id:seleccion.idAlumno}).$promise.then(function(resultado){resultado.count>0?swal({title:"Error",html:"No se puede eliminar el capacitando seleccionado porque ya se encuentra registrado en alg&uacute;n curso",type:"error",showCancelButton:!1,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar"}):swal({title:"Confirmar",html:"Se eliminar&aacute; al capacitando <strong>"+seleccion.apellidoPaterno+" "+seleccion.apellidoMaterno+" "+seleccion.nombre+"</strong>, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),Capacitandos.deleteById({id:seleccion.idAlumno}).$promise.then(function(){vm.limpiaBusqueda(),swal("Capacitando eliminado","","success")})})})}var vm=this;vm.muestraResultadosBusqueda=muestraResultadosBusqueda,vm.limpiaBusqueda=limpiaBusqueda,vm.muestraDatosRegistroActual=muestraDatosRegistroActual,vm.cambiarPagina=cambiarPagina,vm.nuevoCapacitando=nuevoCapacitando,vm.editaCapacitando=editaCapacitando,vm.muestraCapacitando=muestraCapacitando,vm.eliminaCapacitando=eliminaCapacitando,vm.mostrarbtnLimpiar=!1,vm.cadena_buscar="",vm.listaCapacitandos=[],vm.personaSeleccionada={},vm.tablalListaCapacitados={totalElementos:0,paginaActual:1,registrosPorPagina:5,inicio:0,fin:1,condicion:{},filtro_datos:{},fila_seleccionada:0},inicia()}angular.module("icat_control_escolar").controller("PrincipalCapacitandosController",PrincipalCapacitandosController),PrincipalCapacitandosController.$inject=["$scope","$stateParams","$modal","tablaDatosService","CatalogoUnidadesAdmtvas","Capacitandos","ControlProcesos"]}(),function(){"use strict";function ModalEditaCapacitandoController($modalInstance,$timeout,registroEditar,Capacitandos,CatalogoLocalidades,CatalogoNivelEstudios,CatalogoActividades,CatalogoExperiencias,CatalogoMedios,CatalogoMotivos){function inicia(){CatalogoLocalidades.find({filter:{fields:["idLocalidad","nombre"],order:"nombre ASC"}}).$promise.then(function(resp){vm.listaLocalidades=resp}),CatalogoNivelEstudios.find().$promise.then(function(resp){vm.listaNivelEstudios=resp}),CatalogoActividades.find().$promise.then(function(resp){vm.listaActividades=resp}),CatalogoExperiencias.find().$promise.then(function(resp){vm.listaExperiencia=resp}),CatalogoMedios.find().$promise.then(function(resp){vm.listaMedios=resp}),CatalogoMotivos.find().$promise.then(function(resp){vm.listaMotivos=resp})}function calculaNacim(){if(void 0!=vm.registroEditar.curp&&vm.registroEditar.curp.length>=10){var error_fecha=!1;if(isNaN(Number(vm.registroEditar.curp.substr(4,2)))?error_fecha=!0:isNaN(Number(vm.registroEditar.curp.substr(6,2)))?error_fecha=!0:isNaN(Number(vm.registroEditar.curp.substr(8,2)))&&(error_fecha=!0),1==error_fecha)vm.mostrar_msg_error=!0,vm.mensaje="La fecha de nacimiento dentro de la CURP es incorrecta",vm.registroEditar.edad="",$timeout(function(){vm.mostrar_msg_error=!1,vm.mensaje=""},2e3);else{var fechaHoy=new Date,anioHoy=fechaHoy.getFullYear(),anio=parseInt(vm.registroEditar.curp.substr(4,2))+2e3;if(anioHoy-anio<0)var anio=parseInt(vm.registroEditar.curp.substr(4,2))+1900;var mes=parseInt(vm.registroEditar.curp.substr(6,2)),dia=parseInt(vm.registroEditar.curp.substr(8,2)),fechaNacimiento=new Date(anio,mes-1,dia),edad=fechaHoy.getFullYear()-fechaNacimiento.getFullYear()-1;fechaHoy.getMonth()+1-mes>0&&edad++,fechaHoy.getDate()-dia>=0&&fechaHoy.getMonth()+1-mes==0&&edad++,vm.registroEditar.edad=edad,vm.registroEditar.anioNacimiento=anio.toString(),vm.registroEditar.mesNacimiento=vm.registroEditar.curp.substr(6,2),vm.registroEditar.diaNacimiento=vm.registroEditar.curp.substr(8,2)}}}function guardar(){return vm.mostrarSpiner=!0,""==vm.registroEditar.edad?(vm.mostrarSpiner=!1,vm.mostrar_msg_error=!0,vm.mensaje="La fecha de nacimiento dentro de la CURP es incorrecta",void $timeout(function(){vm.mostrar_msg_error=!1,vm.mensaje=""},2e3)):void Capacitandos.count({where:{and:[{email:vm.registroEditar.email},{idAlumno:{neq:vm.registroEditar.idAlumno}}]}}).$promise.then(function(resp){resp.count>0&&0==vm.correoCompartido?(vm.mostrarSpiner=!1,vm.mostrar_msg_error=!0,vm.mensaje="El email ya se encuentra registrado",$timeout(function(){vm.mostrar_msg_error=!1,vm.mensaje=""},2e3)):Capacitandos.count({where:{and:[{celular:vm.registroEditar.celular},{celular:{neq:""}},{idAlumno:{neq:vm.registroEditar.idAlumno}}]}}).$promise.then(function(resp){resp.count>0?(vm.mostrarSpiner=!1,vm.mostrar_msg_error=!0,vm.mensaje="El número de celular ya se encuentra registrado",$timeout(function(){vm.mostrar_msg_error=!1,vm.mensaje=""},2e3)):Capacitandos.count({where:{and:[{curp:vm.registroEditar.curp},{idAlumno:{neq:vm.registroEditar.idAlumno}}]}}).$promise.then(function(resp){resp.count>0?(vm.mostrarSpiner=!1,vm.mostrar_msg_error=!0,vm.mensaje="El CURP ya se encuentra registrado",$timeout(function(){vm.mostrar_msg_error=!1,vm.mensaje=""},2e3)):(vm.registroEditar.ultimaActualizacion=Date(),Capacitandos.prototype$updateAttributes({id:vm.registroEditar.idAlumno},{idUnidadAdmtva:vm.registroEditar.idUnidadAdmtva,apellidoPaterno:vm.registroEditar.apellidoPaterno,apellidoMaterno:vm.registroEditar.apellidoMaterno,nombre:vm.registroEditar.nombre,sexo:vm.registroEditar.sexo,email:vm.registroEditar.email,diaNacimiento:vm.registroEditar.diaNacimiento,mesNacimiento:vm.registroEditar.mesNacimiento,anioNacimiento:vm.registroEditar.anioNacimiento,edad:vm.registroEditar.edad,telefono:vm.registroEditar.telefono,celular:vm.registroEditar.celular,curp:vm.registroEditar.curp,domicilio:vm.registroEditar.domicilio,colonia:vm.registroEditar.colonia,codigoPostal:vm.registroEditar.codigoPostal,idLocalidad:vm.registroEditar.idLocalidad,idNivelEstudios:vm.registroEditar.idNivelEstudios,estadoCivil:vm.registroEditar.estadoCivil,foto:vm.registroEditar.foto,disVisual:vm.registroEditar.disVisual,disAuditiva:vm.registroEditar.disAuditiva,disLenguaje:vm.registroEditar.disLenguaje,disMotriz:vm.registroEditar.disMotriz,disMental:vm.registroEditar.disMental,enfermedadPadece:vm.registroEditar.enfermedadPadece,enfermedadCual:vm.registroEditar.enfermedadCual,tutorNombre:vm.registroEditar.tutorNombre,tutorCurp:vm.registroEditar.tutorCurp,tutorParentesco:vm.registroEditar.tutorParentesco,tutorDireccion:vm.registroEditar.tutorDireccion,tutorTelefono:vm.registroEditar.tutorTelefono,docActaNacimiento:vm.registroEditar.docActaNacimiento,docCompEstudios:vm.registroEditar.docCompEstudios,docIdentOficial:vm.registroEditar.docIdentOficial,docConstCurp:vm.registroEditar.docConstCurp,docFotografias:vm.registroEditar.docFotografias,docCompMigratorio:vm.registroEditar.docCompMigratorio,docCompDomicilio:vm.registroEditar.docCompDomicilio,docCurpTutor:vm.registroEditar.docCurpTutor,trabajaActualmente:vm.registroEditar.trabajaActualmente,idActividad:vm.registroEditar.idActividad,empresaTrabaja:vm.registroEditar.empresaTrabaja,empresaPuesto:vm.registroEditar.empresaPuesto,empresaAntiguedad:vm.registroEditar.empresaAntiguedad,empresaDireccion:vm.registroEditar.empresaDireccion,empresaTelefono:vm.registroEditar.empresaTelefono,idExperiencia:vm.registroEditar.idExperiencia,idMedio:vm.registroEditar.idMedio,idMotivo:vm.registroEditar.idMotivo,idGrupoPertenece:vm.registroEditar.idGrupoPertenece,gpoJefasFamilia:vm.registroEditar.gpoJefasFamilia,gpoSitViolencia:vm.registroEditar.gpoSitViolencia,gpoAdolCalle:vm.registroEditar.gpoAdolCalle,gpoIndigenas:vm.registroEditar.gpoIndigenas,gpoAdultoMayor:vm.registroEditar.gpoAdultoMayor,gpoLgbttti:vm.registroEditar.gpoLgbttti,gpoDentroCereso:vm.registroEditar.gpoDentroCereso,gpoCapDiferentes:vm.registroEditar.gpoCapDiferentes,gpoMenorReadap:vm.registroEditar.gpoMenorReadap,gpoFueraCereso:vm.registroEditar.gpoFueraCereso,ultimaActualizacion:vm.registroEditar.ultimaActualizacion}).$promise.then(function(respuesta){$modalInstance.close(vm.registroEditar)}))})})})}var vm=this;vm.calculaNacim=calculaNacim,vm.guardar=guardar,vm.mostrarNumControl=!0,vm.soloLectura=!1,vm.mostrarSpiner=!1,vm.mostrar_msg_error=!1,vm.mensaje="",vm.correoCompartido=!1,vm.listaLocalidades=[],vm.listaNivelEstudios=[],vm.listaActividades=[],vm.listaExperiencia=[],vm.listaMedios=[],vm.listaMotivos=[],vm.registroEditar={idAlumno:registroEditar.idAlumno,idUnidadAdmtva:registroEditar.idUnidadAdmtva,numControl:registroEditar.numControl,apellidoPaterno:registroEditar.apellidoPaterno,apellidoMaterno:registroEditar.apellidoMaterno,nombre:registroEditar.nombre,sexo:registroEditar.sexo,email:registroEditar.email,diaNacimiento:registroEditar.diaNacimiento,mesNacimiento:registroEditar.mesNacimiento,anioNacimiento:registroEditar.anioNacimiento,edad:registroEditar.edad,telefono:registroEditar.telefono,celular:registroEditar.celular,curp:registroEditar.curp,domicilio:registroEditar.domicilio,colonia:registroEditar.colonia,codigoPostal:registroEditar.codigoPostal,idLocalidad:registroEditar.idLocalidad,idNivelEstudios:registroEditar.idNivelEstudios,estadoCivil:registroEditar.estadoCivil,foto:registroEditar.foto,disVisual:registroEditar.disVisual,disAuditiva:registroEditar.disAuditiva,disLenguaje:registroEditar.disLenguaje,disMotriz:registroEditar.disMotriz,disMental:registroEditar.disMental,enfermedadPadece:registroEditar.enfermedadPadece,enfermedadCual:registroEditar.enfermedadCual,tutorNombre:registroEditar.tutorNombre,tutorCurp:registroEditar.tutorCurp,tutorParentesco:registroEditar.tutorParentesco,tutorDireccion:registroEditar.tutorDireccion,tutorTelefono:registroEditar.tutorTelefono,docActaNacimiento:registroEditar.docActaNacimiento,docCompEstudios:registroEditar.docCompEstudios,docIdentOficial:registroEditar.docIdentOficial,docConstCurp:registroEditar.docConstCurp,docFotografias:registroEditar.docFotografias,docCompMigratorio:registroEditar.docCompMigratorio,docCompDomicilio:registroEditar.docCompDomicilio,docCurpTutor:registroEditar.docCurpTutor,trabajaActualmente:registroEditar.trabajaActualmente,idActividad:registroEditar.idActividad,empresaTrabaja:registroEditar.empresaTrabaja,empresaPuesto:registroEditar.empresaPuesto,empresaAntiguedad:registroEditar.empresaAntiguedad,empresaDireccion:registroEditar.empresaDireccion,empresaTelefono:registroEditar.empresaTelefono,idExperiencia:registroEditar.idExperiencia,idMedio:registroEditar.idMedio,idMotivo:registroEditar.idMotivo,idGrupoPertenece:registroEditar.idGrupoPertenece,gpoJefasFamilia:registroEditar.gpoJefasFamilia,gpoSitViolencia:registroEditar.gpoSitViolencia,gpoAdolCalle:registroEditar.gpoAdolCalle,gpoIndigenas:registroEditar.gpoIndigenas,gpoAdultoMayor:registroEditar.gpoAdultoMayor,gpoLgbttti:registroEditar.gpoLgbttti,gpoDentroCereso:registroEditar.gpoDentroCereso,gpoCapDiferentes:registroEditar.gpoCapDiferentes,gpoMenorReadap:registroEditar.gpoMenorReadap,gpoFueraCereso:registroEditar.gpoFueraCereso,registroRemoto:registroEditar.registroRemoto,fechaRegistro:registroEditar.fechaRegistro,ultimaActualizacion:registroEditar.ultimaActualizacion},vm.temp={},inicia()}angular.module("icat_control_escolar").controller("ModalEditaCapacitandoController",ModalEditaCapacitandoController),ModalEditaCapacitandoController.$inject=["$modalInstance","$timeout","registroEditar","Capacitandos","CatalogoLocalidades","CatalogoNivelEstudios","CatalogoActividades","CatalogoExperiencias","CatalogoMedios","CatalogoMotivos"]}(),function(){"use strict";function ModalNuevoCapacitandoController($scope,$timeout,$modalInstance,Capacitandos,CatalogoLocalidades,CatalogoNivelEstudios,CatalogoActividades,CatalogoExperiencias,CatalogoMedios,CatalogoMotivos){function inicia(){CatalogoLocalidades.find({filter:{fields:["idLocalidad","nombre"],order:"nombre ASC"}}).$promise.then(function(resp){vm.listaLocalidades=resp}),CatalogoNivelEstudios.find().$promise.then(function(resp){vm.listaNivelEstudios=resp}),CatalogoActividades.find().$promise.then(function(resp){vm.listaActividades=resp}),CatalogoExperiencias.find().$promise.then(function(resp){vm.listaExperiencia=resp}),CatalogoMedios.find().$promise.then(function(resp){vm.listaMedios=resp}),CatalogoMotivos.find().$promise.then(function(resp){vm.listaMotivos=resp})}function calculaNacim(){if(void 0!=vm.registroEditar.curp&&vm.registroEditar.curp.length>=10){var error_fecha=!1;if(isNaN(Number(vm.registroEditar.curp.substr(4,2)))?error_fecha=!0:isNaN(Number(vm.registroEditar.curp.substr(6,2)))?error_fecha=!0:isNaN(Number(vm.registroEditar.curp.substr(8,2)))&&(error_fecha=!0),1==error_fecha)vm.mostrar_msg_error=!0,vm.mensaje="La fecha de nacimiento dentro de la CURP es incorrecta",vm.registroEditar.edad="",$timeout(function(){vm.mostrar_msg_error=!1,vm.mensaje=""},2e3);else{var fechaHoy=new Date,anioHoy=fechaHoy.getFullYear(),anio=parseInt(vm.registroEditar.curp.substr(4,2))+2e3;if(anioHoy-anio<0)var anio=parseInt(vm.registroEditar.curp.substr(4,2))+1900;var mes=parseInt(vm.registroEditar.curp.substr(6,2)),dia=parseInt(vm.registroEditar.curp.substr(8,2)),fechaNacimiento=new Date(anio,mes-1,dia),edad=fechaHoy.getFullYear()-fechaNacimiento.getFullYear()-1;fechaHoy.getMonth()+1-mes>0&&edad++,fechaHoy.getDate()-dia>=0&&fechaHoy.getMonth()+1-mes==0&&edad++,vm.registroEditar.edad=edad,vm.registroEditar.anioNacimiento=anio.toString(),vm.registroEditar.mesNacimiento=vm.registroEditar.curp.substr(6,2),vm.registroEditar.diaNacimiento=vm.registroEditar.curp.substr(8,2)}}}function guardar(){return vm.mostrarSpiner=!0,""==vm.registroEditar.edad?(vm.mostrarSpiner=!1,vm.mostrar_msg_error=!0,vm.mensaje="La fecha de nacimiento dentro de la CURP es incorrecta",void $timeout(function(){vm.mostrar_msg_error=!1,vm.mensaje=""},3e3)):void Capacitandos.count({where:{email:vm.registroEditar.email}}).$promise.then(function(resp){resp.count>0&&0==vm.correoCompartido?(vm.mostrarSpiner=!1,vm.mostrar_msg_error=!0,vm.mensaje="El email ya se encuentra registrado",$timeout(function(){vm.mostrar_msg_error=!1,vm.mensaje=""},3e3)):Capacitandos.count({where:{and:[{celular:vm.registroEditar.celular},{celular:{neq:""}}]}}).$promise.then(function(resp){resp.count>0?(vm.mostrarSpiner=!1,vm.mostrar_msg_error=!0,vm.mensaje="El número de celular ya se encuentra registrado",$timeout(function(){vm.mostrar_msg_error=!1,vm.mensaje=""},3e3)):Capacitandos.count({where:{curp:vm.registroEditar.curp}}).$promise.then(function(resp){resp.count>0?(vm.mostrarSpiner=!1,vm.mostrar_msg_error=!0,vm.mensaje="El CURP ya se encuentra registrado",$timeout(function(){vm.mostrar_msg_error=!1,vm.mensaje=""},3e3)):(vm.registroEditar.ultimaActualizacion=Date(),Capacitandos.create({idUnidadAdmtva:vm.registroEditar.idUnidadAdmtva,apellidoPaterno:vm.registroEditar.apellidoPaterno,apellidoMaterno:vm.registroEditar.apellidoMaterno,nombre:vm.registroEditar.nombre,sexo:vm.registroEditar.sexo,email:vm.registroEditar.email,diaNacimiento:vm.registroEditar.diaNacimiento,mesNacimiento:vm.registroEditar.mesNacimiento,anioNacimiento:vm.registroEditar.anioNacimiento,edad:vm.registroEditar.edad,telefono:vm.registroEditar.telefono,celular:vm.registroEditar.celular,curp:vm.registroEditar.curp,domicilio:vm.registroEditar.domicilio,colonia:vm.registroEditar.colonia,codigoPostal:vm.registroEditar.codigoPostal,idLocalidad:vm.registroEditar.idLocalidad,idNivelEstudios:vm.registroEditar.idNivelEstudios,estadoCivil:vm.registroEditar.estadoCivil,foto:vm.registroEditar.foto,disVisual:vm.registroEditar.disVisual,disAuditiva:vm.registroEditar.disAuditiva,disLenguaje:vm.registroEditar.disLenguaje,disMotriz:vm.registroEditar.disMotriz,disMental:vm.registroEditar.disMental,enfermedadPadece:vm.registroEditar.enfermedadPadece,enfermedadCual:vm.registroEditar.enfermedadCual,tutorNombre:vm.registroEditar.tutorNombre,tutorCurp:vm.registroEditar.tutorCurp,tutorParentesco:vm.registroEditar.tutorParentesco,tutorDireccion:vm.registroEditar.tutorDireccion,tutorTelefono:vm.registroEditar.tutorTelefono,docActaNacimiento:vm.registroEditar.docActaNacimiento,docCompEstudios:vm.registroEditar.docCompEstudios,docIdentOficial:vm.registroEditar.docIdentOficial,docConstCurp:vm.registroEditar.docConstCurp,docFotografias:vm.registroEditar.docFotografias,docCompMigratorio:vm.registroEditar.docCompMigratorio,docCompDomicilio:vm.registroEditar.docCompDomicilio,docCurpTutor:vm.registroEditar.docCurpTutor,trabajaActualmente:vm.registroEditar.trabajaActualmente,idActividad:vm.registroEditar.idActividad,empresaTrabaja:vm.registroEditar.empresaTrabaja,empresaPuesto:vm.registroEditar.empresaPuesto,empresaAntiguedad:vm.registroEditar.empresaAntiguedad,empresaDireccion:vm.registroEditar.empresaDireccion,empresaTelefono:vm.registroEditar.empresaTelefono,idExperiencia:vm.registroEditar.idExperiencia,idMedio:vm.registroEditar.idMedio,idMotivo:vm.registroEditar.idMotivo,idGrupoPertenece:vm.registroEditar.idGrupoPertenece,gpoJefasFamilia:vm.registroEditar.gpoJefasFamilia,gpoSitViolencia:vm.registroEditar.gpoSitViolencia,gpoAdolCalle:vm.registroEditar.gpoAdolCalle,gpoIndigenas:vm.registroEditar.gpoIndigenas,gpoAdultoMayor:vm.registroEditar.gpoAdultoMayor,gpoLgbttti:vm.registroEditar.gpoLgbttti,gpoDentroCereso:vm.registroEditar.gpoDentroCereso,gpoCapDiferentes:vm.registroEditar.gpoCapDiferentes,gpoMenorReadap:vm.registroEditar.gpoMenorReadap,gpoFueraCereso:vm.registroEditar.gpoFueraCereso,registroRemoto:vm.registroEditar.registroRemoto,fechaRegistro:vm.registroEditar.ultimaActualizacion,ultimaActualizacion:vm.registroEditar.ultimaActualizacion}).$promise.then(function(respuesta){$modalInstance.close()}))})})})}var vm=this;vm.calculaNacim=calculaNacim,vm.guardar=guardar,vm.mostrarNumControl=!1,vm.soloLectura=!1,vm.mostrarSpiner=!1,vm.mostrar_msg_error=!1,vm.mensaje="",vm.correoCompartido=!1,vm.listaLocalidades=[],vm.listaNivelEstudios=[],vm.listaActividades=[],vm.listaExperiencia=[],vm.listaMedios=[],vm.listaMotivos=[],vm.registroEditar={idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id,numControl:"",apellidoPaterno:"",apellidoMaterno:"",nombre:"",sexo:"",email:"",diaNacimiento:"",mesNacimiento:"",anioNacimiento:"",edad:"",telefono:"",celular:"",curp:"",domicilio:"",colonia:"",codigoPostal:"",idLocalidad:0,idNivelEstudios:0,estadoCivil:"",foto:"",disVisual:!1,disAuditiva:!1,disLenguaje:!1,disMotriz:!1,disMental:!1,enfermedadPadece:"",enfermedadCual:"",tutorNombre:"",tutorCurp:"",tutorParentesco:"",tutorDireccion:"",tutorTelefono:"",docActaNacimiento:!1,docCompEstudios:!1,docIdentOficial:!1,docConstCurp:!1,docFotografias:!1,docCompMigratorio:!1,docCompDomicilio:!1,docCurpTutor:!1,trabajaActualmente:"",idActividad:0,empresaTrabaja:"",empresaPuesto:"",empresaAntiguedad:"",empresaDireccion:"",empresaTelefono:"",idExperiencia:0,idMedio:0,idMotivo:0,idGrupoPertenece:0,gpoJefasFamilia:!1,gpoSitViolencia:!1,gpoAdolCalle:!1,gpoIndigenas:!1,gpoAdultoMayor:!1,gpoLgbttti:!1,gpoDentroCereso:!1,gpoCapDiferentes:!1,gpoMenorReadap:!1,gpoFueraCereso:!1,registroRemoto:!1,fechaRegistro:"",ultimaActualizacion:""},vm.temp={},inicia()}angular.module("icat_control_escolar").controller("ModalNuevoCapacitandoController",ModalNuevoCapacitandoController),ModalNuevoCapacitandoController.$inject=["$scope","$timeout","$modalInstance","Capacitandos","CatalogoLocalidades","CatalogoNivelEstudios","CatalogoActividades","CatalogoExperiencias","CatalogoMedios","CatalogoMotivos"]}(),function(){"use strict";function ModalVisualizaCapacitandoController($modalInstance,registroEditar,CatalogoLocalidades,CatalogoNivelEstudios,CatalogoActividades,CatalogoExperiencias,CatalogoMedios,CatalogoMotivos){function inicia(){CatalogoLocalidades.find({filter:{fields:["idLocalidad","nombre"],order:"nombre ASC"}}).$promise.then(function(resp){vm.listaLocalidades=resp}),CatalogoNivelEstudios.find().$promise.then(function(resp){vm.listaNivelEstudios=resp}),CatalogoActividades.find().$promise.then(function(resp){vm.listaActividades=resp}),CatalogoExperiencias.find().$promise.then(function(resp){vm.listaExperiencia=resp}),CatalogoMedios.find().$promise.then(function(resp){vm.listaMedios=resp}),CatalogoMotivos.find().$promise.then(function(resp){vm.listaMotivos=resp})}var vm=this;vm.soloLectura=!0,vm.mostrarSpiner=!1,vm.mostrar_msg_error=!1,vm.mensaje="",vm.listaLocalidades=[],vm.listaNivelEstudios=[],vm.listaActividades=[],vm.listaExperiencia=[],vm.listaMedios=[],vm.listaMotivos=[],vm.registroEditar={idAlumno:registroEditar.idAlumno,idUnidadAdmtva:registroEditar.idUnidadAdmtva,numControl:registroEditar.numControl,apellidoPaterno:registroEditar.apellidoPaterno,apellidoMaterno:registroEditar.apellidoMaterno,nombre:registroEditar.nombre,sexo:registroEditar.sexo,email:registroEditar.email,diaNacimiento:registroEditar.diaNacimiento,mesNacimiento:registroEditar.mesNacimiento,anioNacimiento:registroEditar.anioNacimiento,edad:registroEditar.edad,telefono:registroEditar.telefono,celular:registroEditar.celular,curp:registroEditar.curp,domicilio:registroEditar.domicilio,colonia:registroEditar.colonia,codigoPostal:registroEditar.codigoPostal,idLocalidad:registroEditar.idLocalidad,idNivelEstudios:registroEditar.idNivelEstudios,estadoCivil:registroEditar.estadoCivil,foto:registroEditar.foto,disVisual:registroEditar.disVisual,disAuditiva:registroEditar.disAuditiva,disLenguaje:registroEditar.disLenguaje,disMotriz:registroEditar.disMotriz,disMental:registroEditar.disMental,enfermedadPadece:registroEditar.enfermedadPadece,enfermedadCual:registroEditar.enfermedadCual,tutorNombre:registroEditar.tutorNombre,tutorCurp:registroEditar.tutorCurp,tutorParentesco:registroEditar.tutorParentesco,tutorDireccion:registroEditar.tutorDireccion,tutorTelefono:registroEditar.tutorTelefono,docActaNacimiento:registroEditar.docActaNacimiento,docCompEstudios:registroEditar.docCompEstudios,docIdentOficial:registroEditar.docIdentOficial,docConstCurp:registroEditar.docConstCurp,docFotografias:registroEditar.docFotografias,docCompMigratorio:registroEditar.docCompMigratorio,docCompDomicilio:registroEditar.docCompDomicilio,docCurpTutor:registroEditar.docCurpTutor,trabajaActualmente:registroEditar.trabajaActualmente,idActividad:registroEditar.idActividad,empresaTrabaja:registroEditar.empresaTrabaja,empresaPuesto:registroEditar.empresaPuesto,empresaAntiguedad:registroEditar.empresaAntiguedad,empresaDireccion:registroEditar.empresaDireccion,empresaTelefono:registroEditar.empresaTelefono,idExperiencia:registroEditar.idExperiencia,idMedio:registroEditar.idMedio,idMotivo:registroEditar.idMotivo,idGrupoPertenece:registroEditar.idGrupoPertenece,gpoJefasFamilia:registroEditar.gpoJefasFamilia,gpoSitViolencia:registroEditar.gpoSitViolencia,gpoAdolCalle:registroEditar.gpoAdolCalle,gpoIndigenas:registroEditar.gpoIndigenas,gpoAdultoMayor:registroEditar.gpoAdultoMayor,gpoLgbttti:registroEditar.gpoLgbttti,gpoDentroCereso:registroEditar.gpoDentroCereso,gpoCapDiferentes:registroEditar.gpoCapDiferentes,gpoMenorReadap:registroEditar.gpoMenorReadap,gpoFueraCereso:registroEditar.gpoFueraCereso,registroRemoto:registroEditar.registroRemoto,fechaRegistro:registroEditar.fechaRegistro,ultimaActualizacion:registroEditar.ultimaActualizacion},vm.temp={},inicia()}angular.module("icat_control_escolar").controller("ModalVisualizaCapacitandoController",ModalVisualizaCapacitandoController),ModalVisualizaCapacitandoController.$inject=["$modalInstance","registroEditar","CatalogoLocalidades","CatalogoNivelEstudios","CatalogoActividades","CatalogoExperiencias","CatalogoMedios","CatalogoMotivos"]}(),function(){"use strict";function RegistroInscripPagoCursoController($scope,$stateParams,$modal,tablaDatosService,CatalogoUnidadesAdmtvas,CursosOficiales,InscripcionCurso,ControlProcesos){function inicia(){vm.tablaListaCursos.condicion={and:[{or:[{estatus:2},{estatus:4}]},{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}]},vm.tablaListaCursos.filtro_datos={filter:{where:vm.tablaListaCursos.condicion,order:["nombreCurso ASC"],limit:vm.tablaListaCursos.registrosPorPagina,skip:vm.tablaListaCursos.paginaActual-1,include:[{relation:"localidad_pertenece",scope:{fields:["nombre"]}},{relation:"inscripcionesCursos",scope:{fields:["id","pagado","idAlumno","fechaInscripcion","fechaPago","numFactura"],include:{relation:"Capacitandos",scope:{fields:["numControl","apellidoPaterno","apellidoMaterno","nombre","curp"]}}}}]}},vm.client=1,vm.tablaListaCursos.paginaActual=1,vm.tablaListaCursos.inicio=0,
vm.tablaListaCursos.fin=1,vm.listaCursos={},tablaDatosService.obtiene_datos_tabla(CursosOficiales,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.totalElementos=respuesta.total_registros,vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.tablaListaCursos.totalElementos>0&&(vm.listaCursos=respuesta.datos,formateaListado(),vm.cursoSeleccionado=vm.listaCursos[0],agregaNombreCompleto(),vm.client=2,vm.tablaListaCursos.fila_seleccionada=0,muestraDatosRegistroActual(vm.cursoSeleccionado))})}function muestraResultadosBusqueda(){vm.client=1,vm.listaCursos={},vm.cursoSeleccionado={},vm.tablaListaCursos.fila_seleccionada=void 0,vm.tablaListaCursos.paginaActual=1,vm.tablaListaCursos.inicio=0,vm.tablaListaCursos.fin=1;var condicion_busqueda={nombreCurso:{regexp:"/.*"+vm.cadena_buscar+".*/i"}};vm.tablaListaCursos.condicion={and:[{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},{or:[{estatus:2},{estatus:4}]},condicion_busqueda]},tablaDatosService.obtiene_datos_tabla(CursosOficiales,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.totalElementos=respuesta.total_registros,vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.tablaListaCursos.totalElementos>0&&(vm.listaCursos=respuesta.datos,formateaListado(),vm.cursoSeleccionado=vm.listaCursos[0],agregaNombreCompleto(),vm.client=2,vm.tablaListaCursos.fila_seleccionada=0,muestraDatosRegistroActual(vm.cursoSeleccionado)),vm.mostrarbtnLimpiar=!0})}function limpiaBusqueda(){vm.mostrarbtnLimpiar=!1,vm.cadena_buscar="",vm.client=1,vm.listaCursos={},vm.cursoSeleccionado={},vm.tablaListaCursos.fila_seleccionada=void 0,vm.tablaListaCursos.paginaActual=1,vm.tablaListaCursos.inicio=0,vm.tablaListaCursos.fin=1,vm.tablaListaCursos.condicion={and:[{idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id},{or:[{estatus:2},{estatus:4}]}]},tablaDatosService.obtiene_datos_tabla(CursosOficiales,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.totalElementos=respuesta.total_registros,vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.tablaListaCursos.totalElementos>0&&(vm.listaCursos=respuesta.datos,formateaListado(),vm.cursoSeleccionado=vm.listaCursos[0],agregaNombreCompleto(),vm.client=2,vm.tablaListaCursos.fila_seleccionada=0,muestraDatosRegistroActual(vm.cursoSeleccionado))})}function muestraDatosRegistroActual(seleccion){var index=vm.listaCursos.indexOf(seleccion);vm.cursoSeleccionado=seleccion,vm.client=2,vm.tablaListaCursos.fila_seleccionada=index}function cambiarPagina(){vm.tablaListaCursos.totalElementos>0&&tablaDatosService.cambia_pagina(CursosOficiales,vm.tablaListaCursos).then(function(respuesta){vm.tablaListaCursos.inicio=respuesta.inicio,vm.tablaListaCursos.fin=respuesta.fin,vm.listaCursos=respuesta.datos,formateaListado(),vm.cursoSeleccionado=vm.listaCursos[0],agregaNombreCompleto(),vm.client=2,vm.tablaListaCursos.fila_seleccionada=0,muestraDatosRegistroActual(vm.cursoSeleccionado)})}function registraInscripcion(seleccion){var modalInstance=$modal.open({templateUrl:"app/components/cursos_oficiales/inscripciones-pagos/modal-agrega-persona.html",windowClass:"animated fadeIn",controller:"ModalAgregaPersonaController as vm",size:"lg",resolve:{registroEditar:function(){return seleccion}}});modalInstance.result.then(function(respuesta){vm.cursoSeleccionado.inscripcionesCursos.push(respuesta),agregaNombreCompleto(),CursosOficiales.findById({id:seleccion.idCurso,filter:{fields:["idCurso","minRequeridoInscritos"],include:[{relation:"inscripcionesCursos",scope:{fields:["id","idAlumno"]}}]}}).$promise.then(function(curso){curso.inscripcionesCursos.length==curso.minRequeridoInscritos&&ControlProcesos.create({proceso:"Inscripcion a curso",accion:"ALCANCE MINIMO INSCRITOS",idDocumento:curso.idCurso,idUsuario:$scope.currentUser.id_usuario,idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}).$promise.then(function(resp){ControlProcesos.findById({id:resp.id,filter:{fields:["identificador"]}}).$promise.then(function(resp_control){})})})},function(){})}function muestraDocInscripcion(seleccion){console.log(seleccion.id)}function registraPago(seleccion){var modalInstance=$modal.open({templateUrl:"app/components/cursos_oficiales/inscripciones-pagos/modal-captura-num-factura.html",windowClass:"animated fadeIn",controller:"ModalCapturaNumFacturaController as vm",resolve:{registroEditar:function(){return{nombreCurso:vm.cursoSeleccionado.nombreCurso,seleccion:seleccion}}}});modalInstance.result.then(function(respuesta){var index=vm.cursoSeleccionado.inscripcionesCursos.map(function(instructor){return instructor.id}).indexOf(respuesta.id);vm.cursoSeleccionado.inscripcionesCursos[index].pagado=respuesta.pagado,vm.cursoSeleccionado.inscripcionesCursos[index].numFactura=respuesta.numFactura,CursosOficiales.findById({id:seleccion.idCurso,filter:{fields:["idCurso","minRequeridoPago"],include:[{relation:"inscripcionesCursos",scope:{fields:["id","pagado","idAlumno"]}}]}}).$promise.then(function(curso){var num_pagados=0;angular.forEach(curso.inscripcionesCursos,function(registro){registro.pagado>0&&num_pagados++}),num_pagados==curso.minRequeridoPago&&CursosOficiales.prototype$updateAttributes({id:seleccion.idCurso},{estatus:4}).$promise.then(function(respuesta){vm.cursoSeleccionado.estatus=respuesta.estatus,ControlProcesos.create({proceso:"Inscripcion a curso",accion:"ALCANCE MINIMO PAGADOS",idDocumento:curso.idCurso,idUsuario:$scope.currentUser.id_usuario,idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}).$promise.then(function(resp){ControlProcesos.findById({id:resp.id,filter:{fields:["identificador"]}}).$promise.then(function(resp_control){})})})})},function(){})}function editaNumFactura(seleccion){var modalInstance=$modal.open({templateUrl:"app/components/cursos_oficiales/inscripciones-pagos/modal-captura-num-factura.html",windowClass:"animated fadeIn",controller:"ModalCapturaNumFacturaController as vm",resolve:{registroEditar:function(){return{nombreCurso:vm.cursoSeleccionado.nombreCurso,seleccion:seleccion}}}});modalInstance.result.then(function(respuesta){var index=vm.cursoSeleccionado.inscripcionesCursos.map(function(instructor){return instructor.id}).indexOf(respuesta.id);vm.cursoSeleccionado.inscripcionesCursos[index].pagado=respuesta.pagado,vm.cursoSeleccionado.inscripcionesCursos[index].numFactura=respuesta.numFactura},function(){})}function eliminaInscrito(seleccion){swal({title:"Confirmar",html:"La persona <strong>"+seleccion.Capacitandos.apellidoPaterno+" "+seleccion.Capacitandos.apellidoMaterno+" "+seleccion.Capacitandos.nombre+"</strong> se eliminar&aacute; de la lista de inscripci&oacute;n, ¿Continuar?",type:"warning",showCancelButton:!0,confirmButtonColor:"#9a0000",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!0},function(){swal.disableButtons(),InscripcionCurso.deleteById({id:seleccion.id}).$promise.then(function(){var index=vm.cursoSeleccionado.inscripcionesCursos.indexOf(seleccion);index>=0&&vm.cursoSeleccionado.inscripcionesCursos.splice(index,1),swal("Capacitando eliminado","","success"),CursosOficiales.findById({id:seleccion.idCurso,filter:{fields:["idCurso","minRequeridoPago"],include:[{relation:"inscripcionesCursos",scope:{fields:["id","pagado","idAlumno"]}}]}}).$promise.then(function(curso){var num_pagados=0;angular.forEach(curso.inscripcionesCursos,function(registro){registro.pagado>0&&num_pagados++}),num_pagados<curso.minRequeridoPago&&CursosOficiales.prototype$updateAttributes({id:seleccion.idCurso},{estatus:2}).$promise.then(function(respuesta){vm.cursoSeleccionado.estatus=respuesta.estatus,ControlProcesos.create({proceso:"Inscripcion a curso",accion:"REVERSION MINIMO PAGADOS",idDocumento:curso.idCurso,idUsuario:$scope.currentUser.id_usuario,idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id}).$promise.then(function(resp){ControlProcesos.findById({id:resp.id,filter:{fields:["identificador"]}}).$promise.then(function(resp_control){})})})})})})}function agregaNombreCompleto(){angular.forEach(vm.listaCursos,function(curso){if(void 0!==curso.inscripcionesCursos)for(var i=0;i<curso.inscripcionesCursos.length;i++)curso.inscripcionesCursos[i].Capacitandos.nombreCompleto=curso.inscripcionesCursos[i].Capacitandos.apellidoPaterno+" "+curso.inscripcionesCursos[i].Capacitandos.apellidoMaterno+" "+curso.inscripcionesCursos[i].Capacitandos.nombre})}function formateaListado(){var hoy=new Date;hoy.setHours(0),hoy.setMinutes(0),hoy.setSeconds(0),hoy.setMilliseconds(0);for(var i=0;i<vm.listaCursos.length;i++){var fecha_inicio=new Date(vm.listaCursos[i].fechaInicio);fecha_inicio.setHours(0),fecha_inicio.setMinutes(0),fecha_inicio.setSeconds(0),fecha_inicio.setMilliseconds(0);var dif=fecha_inicio-hoy,num_dias_falta=Math.floor(dif/864e5);vm.listaCursos[i].diasDif=num_dias_falta}}var vm=this;vm.muestraResultadosBusqueda=muestraResultadosBusqueda,vm.limpiaBusqueda=limpiaBusqueda,vm.muestraDatosRegistroActual=muestraDatosRegistroActual,vm.cambiarPagina=cambiarPagina,vm.registraInscripcion=registraInscripcion,vm.muestraDocInscripcion=muestraDocInscripcion,vm.registraPago=registraPago,vm.editaNumFactura=editaNumFactura,vm.eliminaInscrito=eliminaInscrito,vm.mostrarbtnLimpiar=!1,vm.cadena_buscar="",vm.tablaListaCursos={totalElementos:0,paginaActual:1,registrosPorPagina:5,inicio:0,fin:1,condicion:{},filtro_datos:{},fila_seleccionada:0},inicia()}angular.module("icat_control_escolar").controller("RegistroInscripPagoCursoController",RegistroInscripPagoCursoController),RegistroInscripPagoCursoController.$inject=["$scope","$stateParams","$modal","tablaDatosService","CatalogoUnidadesAdmtvas","CursosOficiales","InscripcionCurso","ControlProcesos"]}(),function(){"use strict";function ModalAgregaPersonaController($scope,$modalInstance,$timeout,tablaDatosService,registroEditar,Capacitandos,CursosOficiales){function inicia(){vm.tablalListaCapacitados.filtro_datos={filter:{where:vm.tablalListaCapacitados.condicion,order:["numControl","apellidoPaterno ASC","apellidoMaterno ASC","nombre ASC","curp ASC"],limit:vm.tablalListaCapacitados.registrosPorPagina,skip:vm.tablalListaCapacitados.paginaActual-1,include:[{relation:"unidad_pertenece",scope:{fields:["nombre"]}},{relation:"inscripcionesCursos",scope:{fields:["id","idCurso"]}}]}}}function muestraResultadosBusqueda(){vm.listaCapacitandos={},vm.personaSeleccionada={},vm.tablalListaCapacitados.fila_seleccionada=void 0,vm.tablalListaCapacitados.paginaActual=1,vm.tablalListaCapacitados.inicio=0,vm.tablalListaCapacitados.fin=1,vm.mostrarbtnLimpiar=!0,vm.tablalListaCapacitados.condicion={or:[{apellidoPaterno:{regexp:"/.*"+vm.cadena_buscar+".*/i"}},{apellidoMaterno:{regexp:"/.*"+vm.cadena_buscar+".*/i"}},{nombre:{regexp:"/.*"+vm.cadena_buscar+".*/i"}}]},tablaDatosService.obtiene_datos_tabla(Capacitandos,vm.tablalListaCapacitados).then(function(respuesta){vm.tablalListaCapacitados.totalElementos=respuesta.total_registros,vm.tablalListaCapacitados.inicio=respuesta.inicio,vm.tablalListaCapacitados.fin=respuesta.fin,vm.tablalListaCapacitados.totalElementos>0&&(vm.listaCapacitandos=respuesta.datos,vm.personaSeleccionada=vm.listaCapacitandos[0],vm.tablalListaCapacitados.fila_seleccionada=0,muestraDatosRegistroActual(vm.personaSeleccionada))})}function limpiaBusqueda(){vm.mostrarbtnLimpiar=!1,vm.cadena_buscar="",vm.listaCapacitandos={},vm.personaSeleccionada={},vm.tablalListaCapacitados.fila_seleccionada=void 0,vm.tablalListaCapacitados.paginaActual=1,vm.tablalListaCapacitados.inicio=0,vm.tablalListaCapacitados.fin=1,vm.tablalListaCapacitados.condicion={},tablaDatosService.obtiene_datos_tabla(Capacitandos,vm.tablalListaCapacitados).then(function(respuesta){vm.tablalListaCapacitados.totalElementos=respuesta.total_registros,vm.tablalListaCapacitados.inicio=respuesta.inicio,vm.tablalListaCapacitados.fin=respuesta.fin,vm.tablalListaCapacitados.totalElementos>0&&(vm.listaCapacitandos=respuesta.datos,vm.personaSeleccionada=vm.listaCapacitandos[0],vm.tablalListaCapacitados.fila_seleccionada=0,muestraDatosRegistroActual(vm.personaSeleccionada))})}function muestraDatosRegistroActual(seleccion){var index=vm.listaCapacitandos.indexOf(seleccion);vm.personaSeleccionada=seleccion,vm.tablalListaCapacitados.fila_seleccionada=index}function cambiarPagina(){vm.tablalListaCapacitados.totalElementos>0&&tablaDatosService.cambia_pagina(Capacitandos,vm.tablalListaCapacitados).then(function(respuesta){vm.tablalListaCapacitados.inicio=respuesta.inicio,vm.tablalListaCapacitados.fin=respuesta.fin,vm.listaCapacitandos=respuesta.datos,vm.personaSeleccionada=vm.listaCapacitandos[0],vm.tablalListaCapacitados.fila_seleccionada=0,muestraDatosRegistroActual(vm.personaSeleccionada)})}function guardar(){vm.mostrarSpiner=!0;var inscripEncontrada=!1;return angular.forEach(vm.personaSeleccionada.inscripcionesCursos,function(record){registroEditar.idCurso==record.idCurso&&(inscripEncontrada=!0)}),1==inscripEncontrada?(vm.mostrarSpiner=!1,vm.mostrar_msg_error=!0,vm.mensaje="Esta persona ya esta inscrita en este curso",void $timeout(function(){vm.mostrar_msg_error=!1,vm.mensaje=""},2e3)):void CursosOficiales.inscripcionesCursos.create({id:registroEditar.idCurso},{idAlumno:vm.personaSeleccionada.idAlumno,fechaInscripcion:Date()}).$promise.then(function(resp){var nuevoElemento={id:resp.id,idAlumno:resp.idAlumno,idCurso:resp.idCurso,fechaInscripcion:resp.fechaInscripcion,fechaPago:"",numFactura:"",pagado:0,Capacitandos:{idAlumno:vm.personaSeleccionada.idAlumno,numControl:vm.personaSeleccionada.numControl,apellidoPaterno:vm.personaSeleccionada.apellidoPaterno,apellidoMaterno:vm.personaSeleccionada.apellidoMaterno,nombre:vm.personaSeleccionada.nombre,curp:vm.personaSeleccionada.curp}};$modalInstance.close(nuevoElemento)})}var vm=this;vm.muestraResultadosBusqueda=muestraResultadosBusqueda,vm.limpiaBusqueda=limpiaBusqueda,vm.muestraDatosRegistroActual=muestraDatosRegistroActual,vm.cambiarPagina=cambiarPagina,vm.guardar=guardar,vm.mostrarbtnLimpiar=!1,vm.cadena_buscar="",vm.listaCapacitandos=[],vm.personaSeleccionada={},vm.tablalListaCapacitados={totalElementos:0,paginaActual:1,registrosPorPagina:5,inicio:-1,fin:0,condicion:{},filtro_datos:{},fila_seleccionada:0},vm.mostrarSpiner=!1,vm.mostrar_msg_error=!1,vm.mensaje="",inicia()}angular.module("icat_control_escolar").controller("ModalAgregaPersonaController",ModalAgregaPersonaController),ModalAgregaPersonaController.$inject=["$scope","$modalInstance","$timeout","tablaDatosService","registroEditar","Capacitandos","CursosOficiales"]}(),function(){"use strict";function ModalCapturaNumFacturaController($scope,$modalInstance,registroEditar,InscripcionCurso){function inicia(){0==vm.registroEdicion.pagado?vm.titulo="Registro del pago":vm.titulo="Registro del número de factura"}function guardar(){vm.mostrarSpiner=!0,InscripcionCurso.prototype$updateAttributes({id:vm.registroEdicion.id},{pagado:vm.registroEdicion.pagado,numFactura:vm.registroEdicion.numFactura,fechaPago:Date()}).$promise.then(function(respuesta){$modalInstance.close(respuesta)}).catch(function(error){})}var vm=this;vm.guardar=guardar,vm.pagadotemp=registroEditar.seleccion.pagado,vm.registroEdicion={id:registroEditar.seleccion.id,idAlumno:registroEditar.seleccion.idAlumno,nombreCompleto:registroEditar.seleccion.Capacitandos.nombreCompleto,idCurso:registroEditar.seleccion.idCurso,nombreCurso:registroEditar.nombreCurso,numFactura:registroEditar.seleccion.numFactura,pagado:registroEditar.seleccion.pagado},vm.titulo="",inicia()}angular.module("icat_control_escolar").controller("ModalCapturaNumFacturaController",ModalCapturaNumFacturaController),ModalCapturaNumFacturaController.$inject=["$scope","$modalInstance","registroEditar","InscripcionCurso"]}(),function(){"use strict";function BitacoraController($scope,$stateParams,$modal,tablaDatosService,VistaControlProcesos){function inicia(){vm.tablaBitacora.condicion={idUsuario:$scope.currentUser.id_usuario},vm.tablaBitacora.filtro_datos={filter:{where:vm.tablaBitacora.condicion,order:["fechaGeneracion DESC"],limit:vm.tablaBitacora.registrosPorPagina,skip:vm.tablaBitacora.paginaActual-1}},vm.listaRegistros={},tablaDatosService.obtiene_datos_tabla(VistaControlProcesos,vm.tablaBitacora).then(function(respuesta){vm.tablaBitacora.totalElementos=respuesta.total_registros,vm.tablaBitacora.inicio=respuesta.inicio,vm.tablaBitacora.fin=respuesta.fin,vm.tablaBitacora.totalElementos>0&&(vm.listaRegistros=respuesta.datos)})}function muestraResultadosBusqueda(){vm.listaRegistros={},vm.tablaBitacora.paginaActual=1,vm.tablaBitacora.inicio=0,vm.tablaBitacora.fin=1,vm.tablaBitacora.condicion={and:[{documento:{regexp:"/.*"+vm.cadena_buscar+".*/i"}},{idUsuario:$scope.currentUser.id_usuario}]},tablaDatosService.obtiene_datos_tabla(VistaControlProcesos,vm.tablaBitacora).then(function(respuesta){vm.tablaBitacora.totalElementos=respuesta.total_registros,vm.tablaBitacora.inicio=respuesta.inicio,vm.tablaBitacora.fin=respuesta.fin,vm.tablaBitacora.totalElementos>0&&(vm.listaRegistros=respuesta.datos),vm.mostrarbtnLimpiar=!0})}function limpiaBusqueda(){vm.listaRegistros={},vm.tablaBitacora.paginaActual=1,vm.tablaBitacora.inicio=0,vm.tablaBitacora.fin=1,vm.tablaBitacora.condicion={idUsuario:$scope.currentUser.id_usuario},tablaDatosService.obtiene_datos_tabla(VistaControlProcesos,vm.tablaBitacora).then(function(respuesta){vm.tablaBitacora.totalElementos=respuesta.total_registros,vm.tablaBitacora.inicio=respuesta.inicio,vm.tablaBitacora.fin=respuesta.fin,vm.tablaBitacora.totalElementos>0&&(vm.listaRegistros=respuesta.datos),vm.mostrarbtnLimpiar=!1,vm.cadena_buscar="",vm.fechaBuscar=""})}function cambiarPagina(){vm.tablaBitacora.totalElementos>0&&tablaDatosService.cambia_pagina(VistaControlProcesos,vm.tablaBitacora).then(function(respuesta){vm.tablaBitacora.inicio=respuesta.inicio,vm.tablaBitacora.fin=respuesta.fin,vm.listaRegistros={},vm.listaRegistros=respuesta.datos})}function openCalendar1($event){$event.preventDefault(),$event.stopPropagation(),vm.opened1=!0}var vm=this;vm.openCalendar1=openCalendar1,vm.muestraResultadosBusqueda=muestraResultadosBusqueda,vm.limpiaBusqueda=limpiaBusqueda,vm.cambiarPagina=cambiarPagina,vm.listaRegistros=[],vm.fechaBuscar="",vm.tablaBitacora={totalElementos:0,paginaActual:1,registrosPorPagina:10,inicio:0,fin:1,condicion:{},filtro_datos:{},fila_seleccionada:0},inicia(),$scope.$watch("vm.fechaBuscar",function(){if(""!=vm.fechaBuscar){var fecha_inicio=new Date(vm.fechaBuscar);fecha_inicio.setHours(0),fecha_inicio.setMinutes(0),fecha_inicio.setSeconds(0),fecha_inicio.setMilliseconds(0);var fecha_fin=new Date(vm.fechaBuscar);fecha_fin.setHours(23),fecha_fin.setMinutes(59),fecha_fin.setSeconds(59),fecha_fin.setMilliseconds(999),vm.listaRegistros={},vm.tablaBitacora.paginaActual=1,vm.tablaBitacora.inicio=0,vm.tablaBitacora.fin=1,vm.tablaBitacora.condicion={and:[{fechaGeneracion:{between:[fecha_inicio,fecha_fin]}},{idUsuario:$scope.currentUser.id_usuario}]},tablaDatosService.obtiene_datos_tabla(VistaControlProcesos,vm.tablaBitacora).then(function(respuesta){vm.tablaBitacora.totalElementos=respuesta.total_registros,vm.tablaBitacora.inicio=respuesta.inicio,vm.tablaBitacora.fin=respuesta.fin,vm.tablaBitacora.totalElementos>0&&(vm.listaRegistros=respuesta.datos)})}})}angular.module("icat_control_escolar").controller("BitacoraController",BitacoraController),BitacoraController.$inject=["$scope","$stateParams","$modal","tablaDatosService","VistaControlProcesos"]}(),function(){"use strict";function ResumenGeneralController($scope,CatalogoUnidadesAdmtvas,Capacitandos,CursosOficiales){function inicia(){var fechaHoy=new Date;vm.anio=fechaHoy.getFullYear().toString(),1==$scope.currentUser.unidad_pertenece_id?CatalogoUnidadesAdmtvas.find({filter:{where:{idUnidadAdmtva:{gt:1}},fields:["idUnidadAdmtva","nombre"],order:"nombre ASC"}}).$promise.then(function(resp){angular.forEach(resp,function(registro){vm.listaUnidades.push({idUnidadAdmtva:registro.idUnidadAdmtva,nombre:registro.nombre})}),vm.unidadSeleccionada=vm.listaUnidades[0],vm.cambiaAnioUnidad()}):(vm.unidadSeleccionada={idUnidadAdmtva:$scope.currentUser.unidad_pertenece_id,nombre:$scope.currentUser.nombre_unidad},vm.cambiaAnioUnidad())}function cambiaAnioUnidad(){vm.trimestre=0,vm.datos.total_capacitandos=0,vm.datos.cursos_activados=0,vm.datos.capacitandos_activos=0,CursosOficiales.resumen_total({id_unidad:$scope.currentUser.unidad_pertenece_id>1?$scope.currentUser.unidad_pertenece_id:vm.unidadSeleccionada.idUnidadAdmtva,anio:vm.anio}).$promise.then(function(resp){angular.forEach(resp,function(registro){vm.datos.total_capacitandos+=parseInt(registro.total_inscritos),vm.datos.cursos_activados+=parseInt(registro.num_cursos),vm.datos.capacitandos_activos+=parseInt(registro.num_personas_inscritas)})}),vm.calculaDatosAnuales()}function calculaDatosAnuales(){vm.data_cursos_impartidos=[],vm.data_personas_inscritas=[],vm.data_personas_aprueban=[],vm.datos2.capacitandos_inscritos=0,vm.datos2.capacitandos_terminaron=0,vm.datos2.eficiencia_terminal=0,CursosOficiales.cursos_mes({id_unidad:$scope.currentUser.unidad_pertenece_id>1?$scope.currentUser.unidad_pertenece_id:vm.unidadSeleccionada.idUnidadAdmtva,anio:vm.anio,meses:"0"}).$promise.then(function(resp){var sum_data_cursos_impartidos=0,sum_data_personas_inscritas=0,sum_data_personas_aprueban=0;if(resp.length>0){var mes=resp[0].mes;angular.forEach(resp,function(registro){mes!=registro.mes?(vm.data_cursos_impartidos.push([gd(registro.anio,mes,1),sum_data_cursos_impartidos]),vm.data_personas_inscritas.push([gd(registro.anio,mes,1),sum_data_personas_inscritas]),vm.data_personas_aprueban.push([gd(registro.anio,mes,1),sum_data_personas_aprueban]),sum_data_cursos_impartidos=0,sum_data_personas_inscritas=0,sum_data_personas_aprueban=0,mes=registro.mes,sum_data_cursos_impartidos+=parseInt(registro.num_cursos),sum_data_personas_inscritas+=parseInt(registro.num_personas),sum_data_personas_aprueban+=parseInt(registro.num_personas_terminan)):(sum_data_cursos_impartidos+=parseInt(registro.num_cursos),sum_data_personas_inscritas+=parseInt(registro.num_personas),sum_data_personas_aprueban+=parseInt(registro.num_personas_terminan)),vm.datos2.capacitandos_inscritos+=parseInt(registro.num_personas),vm.datos2.capacitandos_terminaron+=parseInt(registro.num_personas_terminan)}),mes=resp[resp.length-1].mes,vm.data_cursos_impartidos.push([gd(resp[resp.length-1].anio,mes,1),sum_data_cursos_impartidos]),vm.data_personas_inscritas.push([gd(resp[resp.length-1].anio,mes,1),sum_data_personas_inscritas]),vm.data_personas_aprueban.push([gd(resp[resp.length-1].anio,mes,1),sum_data_personas_aprueban]),0==vm.datos2.capacitandos_terminaron?vm.datos2.eficiencia_terminal=0:vm.datos2.eficiencia_terminal=vm.datos2.capacitandos_terminaron/vm.datos2.capacitandos_inscritos*100}}),vm.flotDataCursos=[{label:"Personas inscritas",grow:{stepMode:"linear"},data:vm.data_personas_inscritas,color:"#1ab394",bars:{show:!0,align:"center",barWidth:15552e5,lineWidth:0}},{label:"Cursos impartidos",grow:{stepMode:"linear"},data:vm.data_cursos_impartidos,yaxis:2,color:"#1C84C6",lines:{lineWidth:1,show:!0,fill:!0,fillColor:{colors:[{opacity:.2},{opacity:.2}]}}}],vm.flotOptionsCursos={grid:{hoverable:!0,clickable:!0,tickColor:"#d5d5d5",borderWidth:0,color:"#d5d5d5"},colors:["#1ab394","#464f88"],tooltip:!0,xaxis:{mode:"time",timeformat:"%b",tickSize:[1,"month"],monthNames:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],tickLength:0,axisLabel:"Mes",axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"Arial",axisLabelPadding:10,color:"#d5d5d5"},yaxes:[{position:"left",tickDecimals:0,color:"#d5d5d5",axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"Arial",axisLabelPadding:3},{position:"right",tickDecimals:0,color:"#d5d5d5",axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:" Arial",axisLabelPadding:67}],legend:{noColumns:1,labelBoxBorderColor:"#d5d5d5",position:"ne",margin:[-170,15]}},vm.flotDataEficiencia=[{label:"Personas inscritas",grow:{stepMode:"linear"},data:vm.data_personas_inscritas,yaxis:1,color:"#1ab394",bars:{show:!0,align:"center",barWidth:15552e5,lineWidth:0}},{label:"Personas aprueban el curso",grow:{stepMode:"linear"},data:vm.data_personas_aprueban,yaxis:1,color:"#1C84C6",lines:{lineWidth:1,show:!0,fill:!0,fillColor:{colors:[{opacity:.2},{opacity:.2}]}}}],vm.flotOptionsEficiencia={grid:{hoverable:!0,clickable:!0,tickColor:"#d5d5d5",borderWidth:0,color:"#d5d5d5"},colors:["#1ab394","#464f88"],tooltip:!0,xaxis:{mode:"time",timeformat:"%b",tickSize:[1,"month"],monthNames:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],tickLength:0,axisLabel:"Mes",axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"Arial",axisLabelPadding:10,color:"#d5d5d5"},yaxes:[{tickDecimals:0,color:"#d5d5d5",axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"Arial",axisLabelPadding:3}],legend:{noColumns:1,labelBoxBorderColor:"#d5d5d5",position:"ne"}}}function cambiaPeriodo(){if(0==parseInt(vm.trimestre))vm.calculaDatosAnuales();else{var meses=[];if(1==parseInt(vm.trimestre)){var fecha_inicio=new Date(parseInt(vm.anio),0,1,0,0,0,0);new Date(parseInt(vm.anio),2,31,23,59,59,999);meses=[1,2,3]}else if(2==parseInt(vm.trimestre)){var fecha_inicio=new Date(parseInt(vm.anio),3,1,0,0,0,0);new Date(parseInt(vm.anio),5,30,23,59,59,999);meses=[4,5,6]}else if(3==parseInt(vm.trimestre)){var fecha_inicio=new Date(parseInt(vm.anio),6,1,0,0,0,0);new Date(parseInt(vm.anio),8,30,23,59,59,999);meses=[7,8,9]}else if(4==parseInt(vm.trimestre)){var fecha_inicio=new Date(parseInt(vm.anio),9,1,0,0,0,0);new Date(parseInt(vm.anio),11,31,23,59,59,999);meses=[10,11,12]}else if(parseInt(vm.trimestre)>=11){var fecha_inicio=new Date(parseInt(vm.anio),parseInt(vm.trimestre)-11,1,0,0,0,0),numDias=new Date(parseInt(vm.anio),parseInt(vm.trimestre)-10,0).getDate();new Date(parseInt(vm.anio),parseInt(vm.trimestre)-11,numDias,23,59,59,999);meses=[fecha_inicio.getMonth()+1]}vm.data_seleccionados=[],CursosOficiales.cursos_mes({id_unidad:$scope.currentUser.unidad_pertenece_id>1?$scope.currentUser.unidad_pertenece_id:vm.unidadSeleccionada.idUnidadAdmtva,anio:vm.anio,meses:meses.toString(),filter:{order:["mes ASC"]}}).$promise.then(function(resp){vm.datos2.capacitandos_inscritos=0,vm.datos2.capacitandos_terminaron=0,vm.datos2.eficiencia_terminal=0;var sum_data_personas_inscritas=0;if(resp.length>0){var mes=resp[0].mes;angular.forEach(resp,function(registro){mes!=registro.mes?(vm.data_seleccionados.push([gd(registro.anio,mes,1),sum_data_personas_inscritas]),sum_data_personas_inscritas=0,mes=registro.mes,sum_data_personas_inscritas+=parseInt(registro.num_personas)):sum_data_personas_inscritas+=parseInt(registro.num_personas),vm.datos2.capacitandos_inscritos+=parseInt(registro.num_personas),vm.datos2.capacitandos_terminaron+=parseInt(registro.num_personas_terminan)}),mes=resp[resp.length-1].mes,vm.data_seleccionados.push([gd(resp[resp.length-1].anio,mes,1),sum_data_personas_inscritas])}0==vm.datos2.capacitandos_terminaron?vm.datos2.eficiencia_terminal=0:vm.datos2.eficiencia_terminal=vm.datos2.capacitandos_terminaron/vm.datos2.capacitandos_inscritos*100,vm.flotDataCursos=[{label:"Personas inscritas",grow:{stepMode:"linear"},data:vm.data_personas_inscritas,color:"#1ab394",bars:{show:!0,align:"center",barWidth:15552e5,lineWidth:0}},{label:"Meses seleccionados",grow:{stepMode:"linear"},data:vm.data_seleccionados,color:"#FF0000",bars:{show:!0,align:"center",barWidth:15552e5,lineWidth:0}},{label:"Cursos impartidos",grow:{stepMode:"linear"},data:vm.data_cursos_impartidos,yaxis:2,color:"#1C84C6",lines:{lineWidth:1,show:!0,fill:!0,fillColor:{colors:[{opacity:.2},{opacity:.2}]}}}],vm.flotDataEficiencia=[{label:"Personas inscritas",grow:{stepMode:"linear"},data:vm.data_personas_inscritas,yaxis:1,color:"#1ab394",bars:{show:!0,align:"center",barWidth:15552e5,lineWidth:0}},{label:"Meses seleccionados",grow:{stepMode:"linear"},data:vm.data_seleccionados,yaxis:1,color:"#FF0000",bars:{show:!0,align:"center",barWidth:15552e5,lineWidth:0}},{label:"Personas aprueban el curso",grow:{stepMode:"linear"},data:vm.data_personas_aprueban,yaxis:1,color:"#1C84C6",lines:{lineWidth:1,show:!0,fill:!0,fillColor:{colors:[{opacity:.2},{opacity:.2}]}}}]})}}function gd(year,month,day){return new Date(year,month-1,day).getTime()}var vm=this;vm.cambiaAnioUnidad=cambiaAnioUnidad,vm.cambiaPeriodo=cambiaPeriodo,vm.calculaDatosAnuales=calculaDatosAnuales,vm.anio="",vm.trimestre="0",vm.listaUnidades=[{idUnidadAdmtva:0,nombre:"Todas"}],vm.unidadSeleccionada=[],vm.id_unidad_actual=-1,vm.datos={total_capacitandos:0,cursos_activados:0,capacitandos_activos:0},vm.datos2={capacitandos_inscritos:0,capacitandos_terminaron:0,eficiencia_terminal:0},inicia()}angular.module("icat_control_escolar").controller("ResumenGeneralController",ResumenGeneralController),ResumenGeneralController.$inject=["$scope","CatalogoUnidadesAdmtvas","Capacitandos","CursosOficiales"]}();